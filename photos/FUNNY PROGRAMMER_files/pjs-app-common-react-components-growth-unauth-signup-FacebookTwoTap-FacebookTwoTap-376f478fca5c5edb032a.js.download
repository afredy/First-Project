(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["app-common-react-components-growth-unauth-signup-FacebookTwoTap-FacebookTwoTap"],{FOfM:function(e,t,o){"use strict";var n=o("WQSK"),a={};a.isGoogleOneTapDisabled=function(){return"1"===n.get("disableUnauthGoogleOneTap")||n.get("fba")},a.disableGoogleOneTapDialog=function(){n.set("disableUnauthGoogleOneTap","1",168)},t.a=a},aqpJ:function(e,t,o){"use strict";o.r(t),o.d(t,"FacebookTwoTap",function(){return F});var n=o("GyhR"),a=o.n(n),i=o("Ivf5"),c=o("WQSK"),r=o("IItM"),l=o("1JxL"),s=o("FOfM"),u=o("Qo1m"),p=o("hvnN"),b=o.n(p),_=o("CBQr"),f=o("ggpB"),d=o("9Y9K"),h=o("73jm"),g=o("JsRk"),m=o("cEhz"),w=o("+U6O");function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var C="unauth_web.fb_api_connected_status",F=function(e){function t(){var e,o,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,r=new Array(c),l=0;l<c;l++)r[l]=arguments[l];return n=this,i=(e=E(t)).call.apply(e,[this].concat(r)),o=!i||"object"!==T(i)&&"function"!=typeof i?S(n):i,k(S(S(o)),"state",{shouldHideFacebookTwoTap:!1,marginRight:"-300px"}),k(S(S(o)),"hideFBTwoTap",function(e,t,n){o.setState({shouldHideFacebookTwoTap:!0});var a=o.props,i=a.container;"FB_AUTOLOGIN_AUTH_EXPIRED"===a.facebookAutoLoginStatus?Object(f.a)("web_fb_two_tap_v2.hide.user_cancel.".concat(i)):Object(f.a)("web_fb_two_tap_v1.hide.user_cancel.".concat(i)),(n||t)&&Object(f.a)("".concat(C,".not_now.").concat(i))}),k(S(S(o)),"replaceWithLoginModal",function(e,t,n){if(n||t){var a=o.props.container;Object(f.a)("".concat(C,".switch_to_login.").concat(a))}o.setState({shouldHideFacebookTwoTap:!0}),o.props.showLoginModal()}),k(S(S(o)),"replaceWithSignUpModal",function(e,t,n){if(n||t){var a=o.props.container;Object(f.a)("".concat(C,".switch_to_signup.").concat(a))}o.setState({shouldHideFacebookTwoTap:!0}),o.props.showSignupModal()}),k(S(S(o)),"handleSocialConnectVerified",function(e,t,n){o.hideFBTwoTap(),o.props.onSocialConnectVerified&&o.props.onSocialConnectVerified(e,t,n)}),k(S(S(o)),"handleFBEmailDeniedPerm",function(){o.hideFBTwoTap(),o.props.onFBEmailDeniedPerm&&o.props.onFBEmailDeniedPerm()}),k(S(S(o)),"handlePostConnectClick",function(e,t,n){"FB_AUTOLOGIN_AUTH_EXPIRED"===o.props.facebookAutoLoginStatus?Object(f.a)("web_fb_two_tap_v2.fb_connect_button_click.".concat(status)):Object(f.a)("web_fb_two_tap_v1.fb_connect_button_click.".concat(status)),o.setState({shouldHideFacebookTwoTap:!0}),(t||n)&&Object(f.a)("".concat(C,".click.").concat(o.props.container))}),k(S(S(o)),"handlePostSuccessConnect",function(e,t,n){"FB_AUTOLOGIN_AUTH_EXPIRED"===o.props.facebookAutoLoginStatus?Object(f.a)("web_fb_two_tap_v2.fb_connect_success"):Object(f.a)("web_fb_two_tap_v1.fb_connect_success"),(t||n)&&Object(f.a)("".concat(C,".success.").concat(o.props.container))}),k(S(S(o)),"renderModalTitle",function(e){return e?a.a.createElement(w.b,null,a.a.createElement(w.b,{dangerouslySetInlineStyle:{__style:{fontSize:"24px",fontWeight:"bold",fontFamily:"HelveticaNeue",fontStyle:"normal",fontStretch:"normal",lineHeight:"1.17",letterSpacing:"-0.3px",justifySelf:"center",color:"#333"}}},u.a._("Welcome back!","title of a popup modal which contains a facebook login in button and a not now button")),a.a.createElement(w.b,{marginTop:2},a.a.createElement(w.K,{size:"lg",overflow:"normal"},u.a._("We found your account. Click continue to login in","Description text on a popup modal which contains a facebook login in button and a not now button")))):a.a.createElement(w.b,null,a.a.createElement(w.b,{dangerouslySetInlineStyle:{__style:{fontSize:"24px",fontWeight:"bold",fontFamily:"HelveticaNeue",fontStyle:"normal",fontStretch:"normal",lineHeight:"1.17",letterSpacing:"-0.3px",justifySelf:"center",color:"#333"}}},u.a._("We’ve missed you!","title of a popup modal which contains a facebook login in button and a not now button")),a.a.createElement(w.b,{marginTop:2},a.a.createElement(w.K,{size:"lg",overflow:"normal"},u.a._("It’s been too long since the last time you linked your Facebook account to use Pinterest. Click below to start the reunion.","Description text on a popup modal which contains a facebook login in button and a not now button"))))}),k(S(S(o)),"onCloseClick",function(e,t,n){(n||t)&&Object(f.a)("".concat(C,".close.").concat(o.props.container)),o.props.onCloseClick&&o.props.onCloseClick()}),k(S(S(o)),"renderCloseButton",function(e,t,n){return n||t?a.a.createElement(w.b,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:41,right:55}}},a.a.createElement(w.o,{accessibilityLabel:u.a._("Close","accessible label for close button"),icon:"cancel",iconColor:"white",onClick:function(){return o.onCloseClick(e,t,n)},size:"lg"})):null}),o}var o,i,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,n["Component"]),o=t,(i=[{key:"componentDidMount",value:function(){this.context.isBot||Object(f.a)("unauth_web_container.".concat(r.a.FACEBOOK_TWO_TAP,".").concat(this.context.hybridTier,".other.shown"))}},{key:"getFBLoginInStatus",value:function(e,t){return t?"fb_auto_disabled":"FB_AUTOLOGIN_AUTH_EXPIRED"===e||"FB_AUTOLOGIN_NOT_AUTHORIZED"===e||"FB_AUTOLOGIN_CONNECTED"===e?"fb_auto_".concat(e):"fb_auto_unknown"}},{key:"getGoogleLoginInStatus",value:function(e,t){return t?"google_auto_disabled":e?"google_auto_fail":"google_auto_unknown"}},{key:"renderModalFooter",value:function(e,t,o){var n=this;return this.props.modalType===h.b.login||this.props.modalType===h.b.signupOrPersonalizedLogin||o?a.a.createElement(w.b,{display:"flex",justifyContent:"center",marginTop:4},a.a.createElement(w.b,{marginEnd:1},a.a.createElement(w.K,{size:"sm"},u.a._("Not you?","Short message on the bottom of the login modal that prompts a user to log in to a different account"))),a.a.createElement(w.P,{onTouch:function(){return n.replaceWithLoginModal(e,t,o)},fullWidth:!1},a.a.createElement(w.K,{bold:!0,color:"darkGray",size:"sm"},a.a.createElement("a",null,u.a._("Log in with a different account","Short message on the bottom of the login modal that prompts a user to log in to a different account"))))):this.props.modalType===h.b.signup?a.a.createElement(w.b,{display:"flex",justifyContent:"center",marginTop:4},a.a.createElement(w.b,{marginEnd:1},a.a.createElement(w.K,{size:"sm"},u.a._("Not you?","Short message on the bottom of the login modal that prompts a user to sign up to a different account"))),a.a.createElement(w.P,{onTouch:function(){return n.replaceWithSignUpModal(e,t,o)},fullWidth:!1},a.a.createElement(w.K,{bold:!0,color:"darkGray",size:"sm"},a.a.createElement("a",null,u.a._("Create a new account","Short message on the bottom of the login modal that prompts a user to sign up to a different account"))))):a.a.createElement(w.b,{marginTop:1},a.a.createElement(w.c,{text:u.a._("Not now","Button text of a dismiss button on a popup modal which also contains a facebook connect button"),onClick:function(){return n.hideFBTwoTap(e,t,o)}}))}},{key:"render",value:function(){var e=this;if(this.context.isBot)return null;var t=this.props,o=t.container,n=t.facebookAutoLoginStatus,i=t.googleOneTapFail,p=t.seoUnauthExperiments,b=this.state.shouldHideFacebookTwoTap,d=this.getFBLoginInStatus(n,!!c.get("fba")),g=this.getGoogleLoginInStatus(i,s.a.isGoogleOneTapDisabled()),m=this.state.marginRight;if(b)return null;var T="FB_AUTOLOGIN_CONNECTED"===n&&(this.props.modalType===h.b.login||this.props.modalType===h.b.signup)&&!!this.props.parentShowSignupModal;if(T){var y=p.v2ActivateExperiment("web_unauth_fb_api_connected_status")||"";T=T&&y.startsWith("fb_one_tap_exp_enabled_on_action")||y.startsWith("fb_one_tap_exp_enabled_on_load_and_action")}var E="FB_AUTOLOGIN_CONNECTED"===n&&"1"!==sessionStorage.getItem("ssms")&&!!this.props.parentShowSignupModal;if(E){var O=p.v2ActivateExperiment("web_unauth_fb_api_connected_status")||"";E=E&&O.startsWith("fb_one_tap_exp_enabled_on_load")}return"fb_auto_FB_AUTOLOGIN_CONNECTED"===String(d)&&Object(f.a)("".concat(C,".connected.").concat(o)),"FB_AUTOLOGIN_AUTH_EXPIRED"===n&&!c.get("fba")||T||E?(Object(f.a)("web_fb_two_tap_v2.show.".concat(d,".").concat(g,".").concat(o)),(E||E)&&Object(f.a)("".concat(C,".show.").concat(o)),a.a.createElement(w.b,{height:"100%",width:"100%",display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{background:"rgba(0, 0, 0, 0.5)",WebkitBackfaceVisibility:"hidden",bottom:"0px",justifyContent:"center",position:"fixed",zIndex:"10001"}}},a.a.createElement(w.b,{color:"white",padding:8,shape:"rounded",width:"332px"},this.renderModalTitle(E||T),a.a.createElement(w.b,{marginTop:5},a.a.createElement(l.b,{container:r.a.FACEBOOK_TWO_TAP,buttonText:u.a._("Login with Facebook","Button text on facebook connect button"),onFBEmailDeniedPerm:this.handleFBEmailDeniedPerm,onSocialConnectVerified:this.handleSocialConnectVerified,useGestaltTooltip:!0,handlePostConnectClick:function(){return e.handlePostConnectClick(d,E,T)},handlePostSuccessConnect:function(){return e.handlePostSuccessConnect(d,E,T)},type:"continue"})),this.renderModalFooter(d,T,E)),this.renderCloseButton(d,T,E))):(Object(f.a)("web_fb_two_tap_v1.".concat("hide",".").concat(d,".").concat(g,".").concat(o)),a.a.createElement(w.b,{color:"white",direction:"column",display:"flex",dangerouslySetInlineStyle:{__style:{boxShadow:"0 3px 6px 0 rgba(0, 0, 0, 0.1)",border:"solid 1px rgba(0, 0, 0, 0.04)",transition:"margin-right 250ms cubic-bezier(0.0,0.0,0.2,1)",marginRight:m,marginTop:this.props.isShowEUCookieBar?"52px":"16px",zIndex:"700"}},padding:4,position:"fixed",right:!0,shape:"rounded",width:300,top:!0},a.a.createElement(w.b,{display:"none"},""),a.a.createElement(w.b,null,a.a.createElement(w.b,null,a.a.createElement(w.K,{bold:!0,size:"xl"},u.a._("Sign in to Pinterest with Facebook","Sign up prompt on Facebook two tap"))),a.a.createElement(w.b,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:8,right:8}}},a.a.createElement(w.o,{accessibilityLabel:u.a._("Close","accessible label for close button"),icon:"cancel",onClick:function(){return e.hideFBTwoTap()},size:"xs"}))),a.a.createElement(w.b,{marginTop:1},a.a.createElement(l.b,{container:r.a.FACEBOOK_TWO_TAP,buttonText:u.a._("Continue with Facebook","Button text on facebook connect button"),onFBEmailDeniedPerm:this.handleFBEmailDeniedPerm,onSocialConnectVerified:this.handleSocialConnectVerified,useGestaltTooltip:!0,handlePostConnectClick:this.handlePostConnectClick,handlePostSuccessConnect:this.handlePostSuccessConnect})),a.a.createElement(w.b,{marginTop:1},a.a.createElement(w.K,{align:"center",size:"md"},a.a.createElement(_.a,{dark:!0,large:!0,noContainer:!0})))))}}])&&y(o.prototype,i),p&&y(o,p),t}();F.contextTypes={isBot:b.a.bool,hybridTier:b.a.string,cookies:b.a.object.isRequired},t.default=Object(d.compose)(g.withRouter,m.b,Object(i.connect)(function(e){return{googleOneTapFail:e.googleOneTap.googleOneTapFail,facebookAutoLoginStatus:e.facebookAutoLogin.facebookAutoLoginStatus,isShowEUCookieBar:e.euCookieBar.isShowEUCookieBar}}))(F)}}]);