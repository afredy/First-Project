(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[5],{"+aUF":function(e,t,o){"use strict";var n=o("GyhR"),r=o.n(n);o("hvnN");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){s(e,t,o[t])})}return e}function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function l(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d={button:{border:"0px",height:"36px",display:"inline-block",borderRadius:"4px",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",padding:"0 18px",fontSize:"15px",fontWeight:"bold",outline:"none",WebkitBoxShadow:"none",boxShadow:"none",cursor:"pointer",marginTop:"10px",verticalAlign:"middle",textAlign:"center"},buttonRed:{backgroundColor:"#e60023",color:"#fff"},buttonLightGrey:{backgroundColor:"#ebebeb",color:"#444"},buttonDarkGrey:{backgroundColor:"#333",color:"#fff"},buttonWhite:{backgroundColor:"#fff",color:"#444"},buttonWhiteBlueText:{backgroundColor:"#fff",color:"#4a90e2"},buttonTransparent:{backgroundColor:"transparent",border:"1px solid #fff",color:"#fff"},disabledButton:{backgroundColor:"#efefef",color:"#8e8e8e"},loadingSpinner:{padding:"0 10px",position:"relative"},noStyles:{background:"none",border:"none",padding:"0",textAlign:"left"}},g=function(e){function t(e,o){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=c(this,u(t).call(this,e,o))).state={loadingWidth:null,isMountedClientSide:!1},n}var o,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,n["Component"]),o=t,(a=[{key:"componentDidMount",value:function(){var e=0;this._buttonRef&&(e=this._buttonRef.getBoundingClientRect().width+parseFloat(this._buttonRef.style.marginLeft)+parseFloat(this._buttonRef.style.marginRight),this.setState({loadingWidth:e})),this.setState({isMountedClientSide:!0})}},{key:"renderSpinner",value:function(){return r.a.createElement("div",{className:"loadingSpinner",style:d.loadingSpinner})}},{key:"render",value:function(){var e=this,t=this.state.loadingWidth,o=this.props.loading||this.props.numServerRenderedPins>0&&!1===this.state.isMountedClientSide,n=this.props.className,a={},s=!1,l=n.split(" ");this.props.disabled?a=d.disabledButton:l.indexOf("red")>-1?a=d.buttonRed:l.indexOf("lightGrey")>-1?a=d.buttonLightGrey:l.indexOf("darkGrey")>-1?a=d.buttonDarkGrey:l.indexOf("white")>-1?a=d.buttonWhite:l.indexOf("blueText")>-1?a=d.buttonWhiteBlueText:l.indexOf("noButtonStyles")>-1?s=!0:(l.indexOf("transparent")>-1||l.indexOf("blueTransparent")>-1)&&(a=d.buttonTransparent);var c=s?i({},d.noStyles,this.props.styleOverrides):i({},d.button,a,this.props.styleOverrides);if(o){var u={cursor:"default"};t&&Object.assign(u,{width:t}),c=i({},c,u)}else this.props.disabled?c=i({},c,{cursor:"not-allowed"}):n+=" active";return r.a.createElement("button",{"aria-label":this.props.accessibilityLabel,className:n,disabled:this.props.disabled,href:this.props.href,id:this.props.id,onClick:this.props.onClick,ref:this.props.buttonRef||function(t){e._buttonRef=t},style:c,type:this.props.type},o?this.renderSpinner():this.props.children)}}])&&l(o.prototype,a),s&&l(o,s),t}();g.defaultProps={accessibilityLabel:"",styleOverrides:{},loading:!1,type:"button"},t.a=g},"1JxL":function(e,t,o){"use strict";var n=o("GyhR"),r=o.n(n),a=o("Ivf5"),i=o("5dtr"),s=o("+aUF"),l=o("D+W/"),c=o("n/kK"),u=o("hKcJ"),p=o("Qo1m"),d=o("3nbW"),g=o("i7XF"),f=o("hvnN"),h=o.n(f),b=o("hw9M"),m=o.n(b),y=o("4+0X"),_=o("YkTi"),w=o("QWmP");function v(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,o,n;return t=e,(o=[{key:"connect",value:function(e,t){var o=this;if(window.addEventListener("message",function(e){var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.origin===t&&"social-connect-complete"===e.data.type&&o.complete(e.data)}),t.rerequest_facebook_email)m()().then(function(e){e.default.ensureInit(function(e){e.login(function(e){var o,n,r=e.authResponse;r&&((o=r.grantedScopes)&&(o=o.split(",")),n=r.userID);var a=o.indexOf("email")>-1,i={id:n};"connected"===e.status&&a?t.success(i):t.error(i),t.complete()},{scope:"email",auth_type:"rerequest",return_scopes:!0})},_.a)});else{var n=this.getWindowOptions(),r=window.open("/connect/"+e+"/","",n);if(!r)return Object(w.a)(p.a._("You must enable popups!")),void t.error({network:e,alertedUpstream:!0});var a=setInterval(function(){r.closed&&(clearInterval(a),o.handleComplete({network:e,error_message:"Window closed."}))},1e3);y.a.instance.subscribe("site","socialConnectCompleted",function(e,o,n){clearInterval(a),n.error_message?t.error(n):t.success(n),"complete"in t&&t.complete()})}}},{key:"getWindowOptions",value:function(){var e=screen.width,t=screen.height;return"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=580,height=400,left="+Math.round((e-580)/2)+",top="+(t>400?Math.round((t-400)/2):0)}},{key:"complete",value:function(e){this.handleComplete(e)}},{key:"handleComplete",value:function(e){if("facebook"===e.network){var t=e.id;t&&"string"!=typeof t&&(e.error_message="Facebook id must be of string type")}y.a.instance.publish("site","socialConnectCompleted",e)}}])&&v(t.prototype,o),n&&v(t,n),e}(),O=o("tQ9o"),S=o("7M64"),k=o("rlRx"),x=o("9Y9K"),C=o("08qL"),R=o("+U6O"),L=o("rQW8"),P=o("k9eC"),T=o("JsRk"),j=o("ggpB"),A=o("2Npu"),I=o("cEhz"),B=o("C5uM"),F=o("2rhI"),N=o("G8/I");function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){q(e,t,o[t])})}return e}function D(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",function(){return z});var K={button:{backgroundClip:"padding-box",backgroundColor:"#4267b2",borderRadius:"2px",display:"block",fontWeight:"normal",height:"40px",marginTop:"0px",padding:"0px 0px 0px 8px",position:"absolute",textAlign:"left",transition:"opacity .2s linear",width:"100%"},container:{position:"relative"},tooltip:{top:"12px",left:"100%",position:"absolute"},icon:{display:"inline-block",margin:"8px"},text:{color:"#fff",display:"inline-block",fontFamily:C.b,fontSize:"15px",fontWeight:"bold",letterSpacing:"normal",lineHeight:"16px",paddingLeft:"4px",paddingTop:"1px",textAlign:"center",verticalAlign:"text-bottom",WebkitFontSmoothing:"auto",whiteSpace:"normal",width:"88%"},fbProfileButton:{height:"40px",textAlign:"left"}},z="facebook",Y=18,H=function(e){function t(){var e,o,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return n=this,a=(e=G(t)).call.apply(e,[this].concat(s)),o=!a||"object"!==W(a)&&"function"!=typeof a?V(n):a,q(V(V(o)),"getContainerName",function(){var e;return window.fbConnectButtonContainerStack&&window.fbConnectButtonContainerStack[window.fbConnectButtonContainerStack.length-1]&&(e=window.fbConnectButtonContainerStack[window.fbConnectButtonContainerStack.length-1]),e}),q(V(V(o)),"profilePicButtonConnectSuccess",function(e){var t=o.props,n=t.container,r=t.handlePostSuccessConnect,a=t.isAccountSwitch,i=t.loadingIndicatorCallback,s=t.onLoginWithMfa,c=t.onLoginWithSuspended,u=t.preventRegister,g=t.seoUnauthExperiments;i&&i(!0);var f={facebook_id:e.userID,facebook_token:e.accessToken},h={container:o.getContainerName(),hybridTier:o.context.hybridTier,page:o.context.pageType};Object(d.a)(f,h,g,a).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a&&e.resource_response&&e.resource_response.data&&e.resource_response.data.user){var t=e.resource_response.data.user;Object(k.b)(t,z,n)}Object(j.d)("login.facebook"),o.contextLogSignupLoginEvent(7536),o.navigateAfterLogin(),r&&r()},function(e){if(o.contextLogSignupLoginEvent(7535),e.api_error_code===l.a.LOGIN_MFA_REQUIRED)i&&i(!1),Object(j.d)("login.facebook"),s&&s(f,e.data);else if(e.api_error_code===l.a.LOGIN_USER_NOT_FOUND||e.api_error_code===l.a.FACEBOOK_ACCOUNT_NOT_LINKED){if(u)return void u(z);o.profilePicButtonRegisterWithFacebook(e,f,h)}else e&&e.api_error_code&&Object(j.a)("facebook_button.failed_login_".concat(e.api_error_code)),e&&e.api_error_code===l.a.POLICY_VIOLATION_USER&&c?c():Object(w.a)(p.a._("Sorry, we can't log you in."))}),o.contextLogSignupLoginEvent(7534)}),q(V(V(o)),"statusChangeCallback",function(e){var t="";"connected"===e.status?(Object(j.a)("web.facebook_connect_button.login_status.connected"),o.profilePicButtonConnectSuccess(e.authResponse),t="success"):"not_authorized"===e.status?(Object(j.a)("web.facebook_connect_button.cancel.not_authorized"),Object(w.a)(p.a.commonStrings.connectError),t="not_authorized"):(Object(j.a)("web.facebook_connect_button.cancel.unknown"),Object(w.a)(p.a.commonStrings.connectError),t="other_error");var n=o.props.handlePostConnectClick;n&&n(t)}),q(V(V(o)),"handleConnectClick",function(){Object(j.a)("fallback_facebook_button.click");var e=new E;return Object(j.d)("login.facebook_connect.attempt"),e.connect(F.a.FACEBOOK,{success:function(e){o.onFacebookConnectSuccess(e)},error:function(e){e.alertedUpstream||Object(w.a)(p.a.commonStrings.connectError)},rerequest_facebook_email:o.rerequestFacebookEmail}),!1}),q(V(V(o)),"profilePicButtonRegisterWithFacebook",function(e,t,n){var r=o.context.country,a=o.props,i=a.disablePostSignupNextUrl,s=a.loadingIndicatorCallback,l=a.nextUrlParam,c=a.onFBEmailDeniedPerm,u=a.onSocialConnectVerified,d=a.requestContext,f=a.showSignupWelcomeLoadingFn,h=a.showResponseMessageModal,b=function(){s&&s(!1),e?(o.contextLogSignupLoginEvent(7488),Object(w.a)(p.a._("Email required for registration.")),window.FB.login(function(e){this.statusChangeCallback(e)},{auth_type:"rerequest",scope:B.a.join(",")})):o.navigate("/join/register/facebook/")},m=function e(t){t.socialConnectData.email?b():Object(B.b)("email").then(function(t){!t.hasPerm&&e?c():b()},b)},y=function(e){o.contextLogSignupLoginEvent(7487);var t=o.props.showResponseMessageModal;t?t(!0):g.b.handleSignupRedirect(l,i)},_=Object(F.d)(r)||Object(F.c)(r);u&&_?S.a.verifyFacebookEmailExists().then(function(e){if(e.birthday&&Object(L.f)(e.birthday,Y)){var r=new P.c(d,"web_unauth_fb_welcome_v2").enabled();d.experiments._queuedResource&&d.experiments._queuedResource.flush(),!h&&f&&r&&f(!0),S.a.attemptFacebookRegistration(Object.assign({},t,n)).then(y,m),o.contextLogSignupLoginEvent(7537)}else{s&&s(!1);var a=Object.assign({},t,n);u(F.a.FACEBOOK,e,a)}},m):S.a.attemptFacebookRegistration(M({},t,n)).then(y,m)}),q(V(V(o)),"registerWithFacebook",function(e,t){var n=o.context.country,r=o.props,a=r.disablePostSignupNextUrl,i=r.nextUrlParam,s=r.onSocialConnectVerified,l=function(t){o.props.loadingIndicatorCallback&&o.props.loadingIndicatorCallback(!1),e?(o.contextLogSignupLoginEvent(7488),o.rerequestFacebookEmail=!0,Object(w.a)(p.a._("Email required for registration."))):o.navigate("/join/register/facebook/")};s&&Object(F.d)(n)?S.a.verifyFacebookEmailExists().then(function(e){s(F.a.FACEBOOK,e,t)},l):(S.a.attemptFacebookRegistration(t).then(function(){o.contextLogSignupLoginEvent(7487);var e=o.props.showResponseMessageModal;e?e(!0):g.b.handleSignupRedirect(i||window.location.pathname,a)},l),o.contextLogSignupLoginEvent(7537))}),q(V(V(o)),"navigateAfterLogin",function(){var e=o.props.showResponseMessageModal;e?e(!0):g.b.handleRedirect(o.props.nextUrlParam||window.location.pathname)}),q(V(V(o)),"renderTooltip",function(e){return e?o.props.useGestaltTooltip?r.a.createElement(u.a,{anchor:o._fallbackButton,message:e}):r.a.createElement("div",{style:K.tooltip},r.a.createElement(O.a,{message:e})):null}),o}var o,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,n["Component"]),o=t,(a=[{key:"handleMessageEvent",value:function(e){Object(B.f)(e,function(e){return Object(j.a)("unauth_web.".concat(e))})}},{key:"componentDidMount",value:function(){var e=this;"undefined"!=typeof window&&(window.statusChangeCallback=this.statusChangeCallback,window.checkLoginState=this.checkLoginState,window.fbConnectButtonContainerStack?window.fbConnectButtonContainerStack.push(this.props.container):window.fbConnectButtonContainerStack=[this.props.container],window.nextUrlParam=this.props.nextUrlParam,window.fbButtonMounted=window.fbButtonMounted?window.fbButtonMounted+1:1,window.addEventListener("message",this.handleMessageEvent,!1));var t=this.context.userAgent;t.isMobile&&"ios"!==t.platform&&"ipad"!==t.platform?setTimeout(function(){window.__branchRedirectToStore||!window.__branchPinterestStarted?e.initializeFB():window.onbeforeunload=function(){window.__branchRedirectToStore&&e.initializeFB()}},50):this.initializeFB(),this.props.isRerequest&&(this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1),this.props.showSignupWelcomeLoadingFn&&this.props.showSignupWelcomeLoadingFn(!1))}},{key:"componentDidUpdate",value:function(){window.nextUrlParam=this.props.nextUrlParam}},{key:"componentWillUnmount",value:function(){if("undefined"!=typeof window){if(window.fbButtonMounted-=1,window.fbConnectButtonContainerStack){var e=window.fbConnectButtonContainerStack.indexOf(this.props.container);e>=0&&window.fbConnectButtonContainerStack.splice(e,1)}0===window.fbButtonMounted&&(delete window.statusChangeCallback,delete window.checkLoginState,delete window.nextUrlParam),window.removeEventListener("message",this.handleMessageEvent)}}},{key:"onFacebookConnectSuccess",value:function(e){var t=this,o=this.props,n=o.preventRegister,r=o.container;Object(j.d)("login.facebook_connect.success");var a={facebook_id:e.id,facebook_token:e.access_token},i={container:r,hybridTier:this.context.hybridTier,page:this.context.pageType};Object(d.a)(a,i,this.props.seoUnauthExperiments).then(function(){Object(j.d)("login.facebook"),t.contextLogSignupLoginEvent(7536),t.navigateAfterLogin()},function(e){if(t.contextLogSignupLoginEvent(7535),e.api_error_code===l.a.LOGIN_MFA_REQUIRED)Object(j.d)("login.facebook"),t.props.onLoginWithMfa&&t.props.onLoginWithMfa(a,e.data);else if(e.api_error_code===l.a.LOGIN_USER_NOT_FOUND||e.api_error_code===l.a.FACEBOOK_ACCOUNT_NOT_LINKED){if(n)return void n(z);t.registerWithFacebook(e,i)}else e&&e.api_error_code&&Object(j.a)("facebook_button.failed_login_".concat(e.api_error_code)),e.api_error_code===l.a.POLICY_VIOLATION_USER&&t.props.onLoginWithSuspended?t.props.onLoginWithSuspended():Object(w.a)(p.a._("Sorry, we can't log you in.","error message when user failed to login caused by suspend/deactivated etc."))}),this.contextLogSignupLoginEvent(7534)}},{key:"initializeFB",value:function(){var e=this;if(null!==this.profilePicButton){var t=(this.props.seoUnauthExperiments.v2ActivateExperiment("web_external_script_loader_with_wait")||"").startsWith("enabled");void 0!==window.FB&&null!==window.FB?window.FB.XFBML.parse():t?Object(N.b)("//connect.facebook.net/"+c.a.getLocaleString(this.context.locale)+"/sdk.js",N.a.FACEBOOK,!0).then(function(){window.FB.init({appId:l.a.GEN.templateConst.settings.FACEBOOK_API_KEY,status:!0,xfbml:!0,version:"v2.7"})}):(window.fbAsyncInit=function(){window.FB.init({appId:l.a.GEN.templateConst.settings.FACEBOOK_API_KEY,status:!0,xfbml:!0,version:"v2.7"})},function(t,o,n){var r=t.getElementsByTagName(o)[0];if(!t.getElementById(n)){var a=t.createElement(o);a.id=n,a.src="//connect.facebook.net/"+c.a.getLocaleString(e.context.locale)+"/sdk.js",r.parentNode&&r.parentNode.insertBefore(a,r)}}(document,"script","facebook-jssdk"))}}},{key:"checkLoginState",value:function(){window.FB.getLoginStatus(function(e){this.statusChangeCallback(e)})}},{key:"contextLogSignupLoginEvent",value:function(e){var t=this.props,o=t.contextLog,n=t.viewer;n.isAuth?o(e,{login_state:n.isLimitedLogin?2:1,signup_login_method:2}):o(e,{signup_login_method:2})}},{key:"login",value:function(e){var t=this;return Object(d.a)(e,{container:"fbconnectbtn"},this.props.seoUnauthExperiments).then(function(){t.navigateAfterLogin()})}},{key:"renderProfilePicButtonWithFallback",value:function(){var e=this,t=this.props.showFallback,o=this.props,n=o.type,a=o.isRerequest,i='<div class="fb-login-button" '+'data-scope="'.concat(B.a.join(","),'" ')+'onlogin="checkLoginState"'+'data-button-type="'.concat("login"===n?"login_with":"continue_with",'" ')+'data-use-continue-as="'.concat("login"===n?"false":"true",'" ')+'data-width="'.concat("268px",'"')+'data-size="large"></div>',l='<div class="fb-login-button" '+'data-scope="'.concat(B.a.join(","),'" ')+'onlogin="checkLoginState"'+'data-button-type="'.concat("login"===n?"login_with":"continue_with",'" ')+'data-use-continue-as="'.concat("login"===n?"false":"true",'" ')+'data-width="'.concat("268px",'"')+'data-auth-type="rerequest"data-size="large"></div>',c=this.props,u=c.buttonText,d=c.inline,g=K.button;d&&(g=M({},g,{width:"48%",display:"inline-block"})),t&&(g=M({},g,{position:"relative"}));var f=K.fbProfileButton;return r.a.createElement("div",{ref:function(t){e._fallbackButton=t}},r.a.createElement(s.a,{className:"FacebookConnectButton",onClick:this.handleConnectClick,styleOverrides:g,type:"button"},r.a.createElement(R.n,{accessibilityLabel:p.a._("facebook","accessible label for facebook icon"),color:"white",icon:"facebook",inline:!0,size:24}),r.a.createElement("span",{style:K.text},u)),!t&&r.a.createElement("div",{dangerouslySetInnerHTML:{__html:a?l:i},ref:function(t){e.profilePicButton=t},style:f}))}},{key:"render",value:function(){return r.a.createElement("div",{style:K.container},this.renderProfilePicButtonWithFallback(),this.renderTooltip(this.props.tooltip))}}])&&D(o.prototype,a),i&&D(o,i),t}();q(H,"contextTypes",{country:h.a.string,locale:h.a.string.isRequired,userAgent:h.a.shape({browserName:h.a.string.isRequired,isMobile:h.a.bool.isRequired,platform:h.a.string.isRequired,raw:h.a.string.isRequired}).isRequired,hybridTier:h.a.string,pageType:h.a.string}),q(H,"defaultProps",{inline:!1});t.b=Object(x.compose)(i.b,Object(a.connect)(function(e){return{viewer:e.viewer}}),I.b,T.withRouter,A.a)(H)},"2Uh4":function(e,t,o){"use strict";var n=o("B8/j"),r=o("ePT2"),a=o("NmcB");t.a=function(e){var t=e.usernameOrEmail,o=e.logOptions,i=e.callBack,s=e.ErrorCallback;o&&Object(a.a)(n.a.requestEnd,o),r.a.create("UserResetPasswordResource",{username_or_email:t}).callCreate({showError:!1}).then(function(e){o&&Object(a.a)(n.a.request,o),i&&i()},function(e){s&&s(e)})}},"7M64":function(e,t,o){"use strict";var n=o("WQSK"),r=o("f5ca"),a=o("D+W/"),i=o("oFGA"),s=o("ztFR"),l=o("Fpqi"),c=o("hw9M"),u=o.n(c),p=o("Kzci"),d=o("Qo1m"),g=o("l1Vv"),f=o.n(g),h=o("/YZq"),b=o("ePT2"),m=o("iL8V"),y=o("PhUE"),_=o("ggpB"),w=o("q579"),v=o("aqOH"),E=o("rQW8"),O=o("2rhI"),S=o("dkdd"),k=o("j1Bn"),x=o("k9eC");function C(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){R(e,t,o[t])})}return e}function R(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var L=h.a.getLogger("AuthHandshake"),P=h.a.getLogger("UserRegistration"),T=0,j=function(e,t){Object(_.a)("web_cross_domain_register.".concat(e,".").concat(Object(O.b)(t)))},A={register:function(e){var t=C({},e),o=y.b.localStorage.getItem("visitedPages");o&&(t.visited_pages=JSON.stringify(o));var n=y.b.localStorage.getItem("visitedPinLandingPagesBeforeLogin");if(n){var r=[],s=!0,l=!1,c=void 0;try{for(var u,p=n[Symbol.iterator]();!(s=(u=p.next()).done);s=!0){var d=u.value;d.is_shared_pin&&r.push({ts:d.ts,path:d.path,first_pin_image_signature:d.image_signature,is_shared:!0})}}catch(e){l=!0,c=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw c}}if(r){var g=k.a.fromGlobalContext();new x.c(g,"web_shared_pin_hf").enabledWithNoActivation()&&(t.visited_pages=JSON.stringify(r.concat(o||[])))}}if((t.user_behavior_data=Object(S.b)(),A.shouldPerformCrossDomainRegister(t))&&-1!==a.a.GEN.templateConst.settings.CORS_HANDSHAKE_DOMAINS.indexOf(i.a.instance.origin))return Object(_.a)("unauth_cross_domain_register_debugging_counter"),A.crossDomainRegister(t);return A.getResource(t).callCreate().then(A.onRegisterSuccess.bind(null,t),A.onRegisterError.bind(null,t))},crossDomainRegister:function(e){return j("attempt",e),r.default.registerUser(e).then(function(t){A.onRegisterSuccess(e,t);var o=t.data||"";if(o)return j("success_with_token",e),r.default.exchangeTokenAndSetSession(o,!0).then(function(t){j("success_token_exchanged",e),L.debug("Cross domain register successful")},function(t){throw j("success_token_not_exchanged",e),L.error("Failed to set session for current user; "+t.message),t});j("success_without_token",e),L.error("No custom access token in cross domain register response");var n=d.a._("We were able to create your account, but there was a problem logging you in. Try refreshing the page to continue.");throw new Error(n)},function(t){j("failure",e),L.error("Failed to register new user; "+t.message),A.onRegisterError(e,t)})},onRegisterSuccess:function(e,t){return n.unset("galae"),n.unset("fbalae"),P.debug("Login, successful",t),Object(m.a)(),n.set("ujr","1"),A.trackRegister(e),t},onRegisterError:function(e,t){if(t.api_error_code===a.a.API_ERROR_UNDERAGE_REGISTER_ATTEMPT&&(Object(_.a)("multi_step_set_age_restrict_cookie"),n.set("r_r","1",87600),n.set("_pinterest_pfob","disabled")),(f()(t.api_error_code)||[a.a.API_SERVER_ERROR,a.a.API_REQUEST_TIMEOUT].includes(t.api_error_code))&&T<3)return Object(_.a)("unauth_web.signup_retry_error.".concat(String(t.api_error_code),".").concat(String(e.container))),T+=1,A.register(e);throw t},trackRegister:function(e){var t;switch(e.container){case"home_page":t=s.a.fromEventType(1750),Object(_.a)("signup_home_page");break;case"mweb_homepage":t=s.a.fromEventType(1750),Object(_.a)("signup_mweb_home_page");break;case"plain_signup_modal":t=s.a.fromEventType(1751),Object(_.a)("signup_plain_modal");break;case"closeup_signup_modal":t=s.a.fromEventType(1752),Object(_.a)("signup_closeup_modal");break;case"widescreen_signup_modal":t=s.a.fromEventType(1753),Object(_.a)("signup_widescreen_modal");break;case"pinit_button_landing":t=s.a.fromEventType(1755),Object(_.a)("signup_pinit_button_landing");break;case"inspired_banner":Object(_.a)("signup_inspired_banner");break;case"category_jump_banner":Object(_.a)("signup_category_jump_banner");break;case"send_pin_banner":t=s.a.fromEventType(1756),Object(_.a)("send_pin_banner");break;default:t=s.a.fromEventType(1754),Object(_.a)("signup_unknown_placement")}var o=e.container||"container_unknown";Object(_.a)("signup.container."+o);var n=e.signupSource||"signupSource_unknown";Object(_.a)("signup.source."+n),t&&l.a.getInstance().addEvent(t);var r,a=document.referrer;r=a?a.indexOf("/t.co/")>-1?"twitter":a.indexOf("google.")>-1?"google":a.indexOf("bing.")>-1?"bing":a.indexOf("facebook.")>-1?"facebook":"other":"direct",Object(_.a)("signup_referrer."+r);var c=w.a.getQueryStringParams().referrer||Object(p.a)();Object(_.a)("signup_referrer_module."+String(c));var u=i.a.instance.user_agent_platform;"ios"===u?Object(_.a)("signup_mweb.iphone_web"):"ipad"===u?Object(_.a)("signup_mweb.ipad_web"):"android"===u&&Object(_.a)("signup_mweb.android_web");var d=e.hybridTier||"tier_unknown",g=e.page||"page_unknown",f=Object(O.b)(e);Object(_.a)("web_signup.".concat(f,".success.").concat(g,".").concat(o,".").concat(r,".").concat(d))},getResource:function(e){return b.a.create("UserRegisterResource",e)},attemptFacebookRegistration:function(e){return A.verifyFacebookEmailExists().then(function(t){if(!t.email)return Promise.reject({error:new Error("Email required to sign up."),socialConnectData:t});var o=A.buildFacebookRegistrationResourceOptions(t);return A.register(C({},o,e))})},verifyFacebookEmailExists:function(){return A.fetchFacebookUserData().then(function(e){return e.email?Promise.resolve(e):Promise.reject({error:new Error("Email required to sign up."),socialConnectData:e})})},buildFacebookRegistrationResourceOptions:function(e){return{first_name:e.first_name,last_name:e.last_name,email:e.email,gender:e.gender,image_url:e.image_url,facebook_id:e.id,facebook_token:e.access_token||"",birthday:String(Object(E.d)(e.birthday||""))}},fetchFacebookUserData:function(){return u()().then(function(e){var t=e.default;return new Promise(function(e,o){t.ensureInit(function(t){t.getLoginStatus(function(n){if(!n.authResponse)return o(new Error("not authed"));var r="/me?fields="+["picture.type(large)","id","first_name","last_name","email","gender","birthday"].join(",");t.api(r,function(t){return!t||t.error?o(new Error("FB.api errored: "+t.error)):(t.picture&&t.picture.data&&t.picture.data.url&&!t.picture.data.is_silhouette&&(t.image_url=t.picture.data.url),e(t))})},!0)},v.a)})})},shouldPerformCrossDomainRegister:function(e){return!(e.facebook_id||e.gplus_code||e.gplus_id_token||e.google_open_id_token)&&!!e.email}};t.a=A},AIe5:function(e,t,o){"use strict";var n=o("GyhR"),r=o("+U6O");t.a=function(e){var t=e.children,o=e.description,a=e.error,i=e.id,s=e.label,l=e.required,c=e.onLabelTouch;return n.createElement(r.b,null,n.createElement(r.b,{marginBottom:1},n.createElement(r.q,{htmlFor:i},n.createElement(r.K,{color:a?"orange":"darkGray"},s,l&&n.createElement(r.K,{color:"orange",bold:!0,inline:!0},n.createElement("span",{"aria-hidden":"true"},"*"))))),t,(!!a||!!o)&&n.createElement(r.q,{htmlFor:i},n.createElement(r.b,{marginTop:1},c?n.createElement(r.P,{onTouch:c},n.createElement(r.K,{color:a?"orange":"darkGray",size:"sm"},a||o)):n.createElement(r.K,{color:a?"orange":"darkGray",size:"sm"},a||o))))}},"B8/j":function(e,t,o){"use strict";t.a={request:51,requestBegin:6935,requestEnd:6936}},CBQr:function(e,t,o){"use strict";var n=o("GyhR"),r=o.n(n),a=o("VSY/"),i=o("D+W/"),s=o("Qo1m"),l=o("hvnN"),c=o.n(l);function u(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){p(e,t,o[t])})}return e}function p(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var d={tosContainer:{marginTop:"15px"},tosCommon:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",fontSize:"11px",fontWeight:"normal",textAlign:"center",WebkitTransition:"opacity .2s linear",transition:"opacity .2s linear"},tosLarge:{color:"#333",fontSize:"12px",lineHeight:"12px"},tosDark:{color:"#aaa",width:"224px"},tosLight:{color:"rgba(255,255,255,0.9)",lineHeight:"150%",margin:"10px auto",textShadow:"0 1px rgba(0,0,0,0.18)",width:"272px"}};function g(e,t){var o=i.a.GEN.templateConst.settings.EU_COUNTRIES,n=u({},d.tosCommon,d.tosDark);e.dark||(n=u({},d.tosCommon,d.tosLight));var l,c=e.noContainer?{}:d.tosContainer;return e.dynamicTopMargin&&(c=u({},c,{marginTop:"3%"})),e.disableWordBreak&&(c=u({},c,{hyphens:"none"})),e.large&&(n=u({},n,d.tosLarge)),l=o.indexOf(t.country)>-1?a.c(s.a._('By continuing, you agree to Pinterest\'s <a data-test-id="tos" href="{{ tos_url }}">Terms of Service</a>, <a data-test-id="privacy" href="{{ privacy_policy_url }}">Privacy Policy</a> and <a href="{{ cookie_url }}"> Cookie use</a>.'),{tos_url:i.a.GEN.templateConst.settings.ABOUT_TERMS_PLAIN_URL,privacy_policy_url:i.a.GEN.templateConst.settings.ABOUT_PRIVACY_PLAIN_URL,cookie_url:i.a.GEN.templateConst.settings.ABOUT_COOKIE_URL}):a.c(s.a._('By continuing, you agree to Pinterest\'s <a data-test-id="tos" href="{{ tos_url }}" target="_blank" >Terms of Service</a>, <a data-test-id="privacy" href="{{ privacy_policy_url }}" target="_blank">Privacy Policy</a>'),{tos_url:i.a.GEN.templateConst.settings.ABOUT_TERMS_PLAIN_URL,privacy_policy_url:i.a.GEN.templateConst.settings.ABOUT_PRIVACY_PLAIN_URL}),r.a.createElement("div",{style:c},r.a.createElement("span",{className:e.dark?"":"TermsOfService__light",style:n},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:l}})))}g.contextTypes={country:c.a.string.isRequired},t.a=g},GCCY:function(e,t,o){"use strict";var n=o("GyhR"),r=o.n(n),a=o("Ivf5"),i=o("5dtr"),s=o("+aUF"),l=o("D+W/"),c=o("/TEi"),u=o("Qo1m"),p=o("7Zfy"),d=o("3nbW"),g=o("i7XF"),f=o("hvnN"),h=o.n(f),b=o("tQ9o"),m=o("ggpB"),y=o("7M64"),_=o("+U6O");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var x="google_auth_id_token",C="google_auth_first_name",R={container:{__style:{backgroundColor:"white",borderRadius:"8px",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:1}},msWebview:{height:"100%",width:"100%"}},L=function(){return"undefined"!=typeof window?"".concat(window.location.origin,"/connect/gplus/"):""},P=function(e){function t(){var e,o,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=this,r=(e=E(t)).call.apply(e,[this].concat(i)),o=!r||"object"!==w(r)&&"function"!=typeof r?S(n):r,k(S(S(o)),"state",{googleSignWebviewSource:L()}),k(S(S(o)),"handleMsWebViewScriptNotify",function(e){if("success"===e.value){var t=o.props,n=t.onDismiss,r=t.onSignInCallback,a=window.localStorage.getItem(x),i=window.localStorage.getItem(C);window.localStorage.removeItem(x),window.localStorage.removeItem(C),r({access_token:"",code:"",expires_at:"",id_token:a,status:{signed_in:!0},first_name:i},!1,window.gapi),n()}else"failure"===e.value&&o.props.onError()}),k(S(S(o)),"msWebViewRef",function(e){e&&e.addEventListener("MSWebViewScriptNotify",o.handleMsWebViewScriptNotify)}),o}var o,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,n["Component"]),o=t,(a=[{key:"render",value:function(){var e=this.props.onDismiss,t=this.state.googleSignWebviewSource;return r.a.createElement(_.b,{display:"flex",position:"fixed",dangerouslySetInlineStyle:R.container,direction:"column",height:"800px",padding:1,width:"500px"},r.a.createElement(_.b,{alignItems:"end",display:"flex",height:"35px",justifyContent:"end"},r.a.createElement(_.o,{accessibilityLabel:u.a._("Cancel Google Sign-In","Accessibility label for Google Sign-In Dialog bog"),onClick:e,icon:"cancel"})),r.a.createElement(_.b,{flex:"grow"},r.a.createElement("x-ms-webview",{style:R.msWebview,ref:this.msWebViewRef,src:t})))}}])&&v(o.prototype,a),i&&v(o,i),t}(),T=o("afZw"),j=o("rlRx"),A=o("9Y9K"),I=o("08qL"),B=o("QWmP"),F=o("k9eC"),N=o("JsRk"),W=o("2Npu"),M=o("cEhz"),D=o("2rhI");function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){Y(e,t,o[t])})}return e}function V(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",function(){return Q});var H={button:{padding:"1px",marginRight:"0px",textAlign:"left",backgroundClip:"padding-box",display:"block",transition:"opacity .2s linear",position:"relative",outline:"none",width:"100%",marginTop:"0px",backgroundColor:"#4285f4",height:"40px",borderRadius:"2px"},icon:{borderRadius:"2px",backgroundColor:"#fff",display:"inline-block",height:"25px",marginLeft:"7px",textAlign:"center",width:"25px"},iconContainer:{position:"relative",margin:"auto",marginTop:"2px"},text:{color:"#fff",display:"inline-block",fontFamily:I.b,position:"absolute",textAlign:"center",top:"50%",transform:"translateY(-50%)",verticalAlign:"top",WebkitFontSmoothing:"auto",width:"83%"},tooltip:{top:"12px",left:"100%",position:"absolute"}},Q="google",X="signin_render",J=function(){return"undefined"!=typeof window&&void 0!==window.Windows},Z=function(e){function t(){var e,o,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=new Array(i),d=0;d<i;d++)s[d]=arguments[d];return n=this,a=(e=q(t)).call.apply(e,[this].concat(s)),o=!a||"object"!==G(a)&&"function"!=typeof a?z(n):a,Y(z(z(o)),"state",{showGoogleSigninWebview:!1}),Y(z(z(o)),"onSignInCallback",function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:X,a={gplus_id_token:e.id_token,gplus_access_token:e.access_token,gplus_expires_at:e.expires_at};if(e.status.signed_in)Object(m.a)("unauth_web.google_connect.success.".concat(r)),o.login(a).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o.props.isAccountSwitch&&e.resource_response&&e.resource_response.data&&e.resource_response.data.user){var n=e.resource_response.data.user;Object(j.b)(n,Q,o.props.container)}t&&Object(m.a)("autologin.google"),o.onLoginSuccess()},function(t){if(t.api_error_code===l.a.LOGIN_VOLUNTARILY_DEACTIVATED_USER)o.props.onLoginWithVoluntarilyDeactivated&&o.props.onLoginWithVoluntarilyDeactivated(t);else if(t.api_error_code===l.a.LOGIN_MFA_REQUIRED)o.props.onLoginWithMfa&&o.props.onLoginWithMfa(a,t.data);else if(t.api_error_code===l.a.LOGIN_USER_NOT_FOUND){if(o.props.preventRegister)return void o.props.preventRegister(Q);o.onLoginError(t,e,n)}else t&&t.api_error_code&&Object(m.a)("google_connect_button.failed_login.".concat(t.api_error_code,".").concat(r)),t.api_error_code===l.a.POLICY_VIOLATION_USER&&o.props.onLoginWithSuspended?o.props.onLoginWithSuspended():Object(B.a)(u.a._("Sorry, we can't log you in.","error message when user failed to login caused by suspend/deactivated etc."))});else{var i=e?e.error:"unknown";Object(m.a)("unauth_web.google_connect.failure.".concat(String(i),".").concat(r))}}),Y(z(z(o)),"onLoginSuccess",function(){var e=o.props.showResponseMessageModal;e?e(!1):g.b.handleRedirect(o.props.nextUrlParam||window.location.pathname)}),Y(z(z(o)),"shouldRequireAge",function(){var e=o.context.country;return Object(D.d)(e)||Object(D.c)(e)}),Y(z(z(o)),"handleButtonClick",function(){c.a.get(function(e){Object(p.a)().then(function(){J()&&o.setState({showGoogleSigninWebview:!0})})})}),Y(z(z(o)),"handleOnDimisssWindowsPWAWebview",function(){o.setState({showGoogleSigninWebview:!1})}),Y(z(z(o)),"handleOnErrorWindowsPWAWebview",function(){o.setState({showGoogleSigninWebview:!1}),Object(B.a)(u.a._("Sorry, there was an error signing in with Google.","error message when user failed to login/signup using Google sign-in."))}),Y(z(z(o)),"handleSignupSuccess",function(){var e=o.props,t=e.disablePostSignupNextUrl,n=e.nextUrlParam,r=e.showResponseMessageModal;o.contextLogSignupLoginEvent(7487),r?r(!0):g.b.handleSignupRedirect(n,t)}),Y(z(z(o)),"handleSignupFailure",function(){o.contextLogSignupLoginEvent(7488)}),Y(z(z(o)),"renderTooltip",function(e){return e?r.a.createElement("div",{style:H.tooltip},r.a.createElement(b.a,{message:e})):null}),o}var o,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,n["Component"]),o=t,(a=[{key:"componentDidMount",value:function(){var e=this;"undefined"!=typeof window&&(window.googleOnSignInCallbacks?window.googleOnSignInCallbacks.push(this.onSignInCallback):window.googleOnSignInCallbacks=[this.onSignInCallback]),this.readyForConnect=!1,this.autoLogin=!1,J()||c.a.get(function(t){e._googleCallback(t)}),window.googleConnectButtonContainer=this.props.container?this.props.container:""}},{key:"componentWillUnmount",value:function(){if("undefined"!=typeof window&&window.googleOnSignInCallbacks){var e=window.googleOnSignInCallbacks.indexOf(this.onSignInCallback);e>=0&&window.googleOnSignInCallbacks.splice(e,1)}delete window.googleConnectButtonContainer}},{key:"onLoginError",value:function(e,t,o){var n=this.props,r=n.onSocialConnectVerified,a=n.requestContext,i=n.showSignupWelcomeLoadingFn,s=n.showResponseMessageModal,l=U({gplus_code:t.code,gplus_id_token:t.id_token,gplus_redirect_uri:"postmessage"},void 0!==t.first_name?{gplus_first_name:t.first_name}:{}),c={container:window.googleConnectButtonContainer,hybridTier:this.context.hybridTier,page:this.context.pageType};if(r&&this.shouldRequireAge())r(D.a.GOOGLE,{},U({},l,c));else{var u=new F.c(a,"web_unauth_gplus_welcome_v2").enabled();a.experiments._queuedResource&&a.experiments._queuedResource.flush(),!s&&i&&u&&i(!0),y.a.register(U({},l,c)).then(this.handleSignupSuccess,this.handleSignupFailure)}}},{key:"_googleCallback",value:function(e){var t=this;Object(T.a)(this.props.requestContext)?c.a.get(function(e){Object(p.a)().then(function(){window.gapi.auth2.getAuthInstance().attachClickHandler("googleConnectButton",{scope:"profile email"},function(o){Object(m.a)("unauth_web.google_connect.success.".concat("auth2_attachclickhandler"));var n=U({},o.getAuthResponse(),{code:""},{status:{signed_in:!0}});t.onSignInCallback(n,!1,e,"auth2_attachclickhandler")},function(e){var t=e?e.error:"unknown";Object(m.a)("unauth_web.google_connect.failure.".concat(String(t),".").concat("auth2_attachclickhandler"))})}).catch(function(e){Object(m.a)("unauth_web.gapi_auth2_load.".concat(e||"unknown")),Object(B.a)(u.a._("Sorry, you need to select an account if you want to log in with Google.","error message when user failed to login/signup because they did not complete the Google step."))})}):e.signin.render(this.googleButton,{scope:"profile email",clientid:l.a.GEN.templateConst.settings.GPLUS_CLIENT_ID,apppackagename:l.a.GEN.templateConst.settings.GPLUS_APP_PACKAGE_NAME,redirecturi:"postmessage",accesstype:"offline",cookiepolicy:"single_host_origin",callback:function(t){this.readyForConnect&&window.googleOnSignInCallbacks&&window.googleOnSignInCallbacks[window.googleOnSignInCallbacks.length-1]&&window.googleOnSignInCallbacks[window.googleOnSignInCallbacks.length-1](t,this.autoLogin,e),this.readyForConnect=!0,this.autoLogin=!1}.bind(this)})}},{key:"contextLogSignupLoginEvent",value:function(e){var t=this.props,o=t.contextLog,n=t.viewer;n.isAuth?o(e,{login_state:n.isLimitedLogin?2:1,signup_login_method:3}):o(e,{signup_login_method:3})}},{key:"login",value:function(e){var t={container:window.googleConnectButtonContainer,hybridTier:this.context.hybridTier,page:this.context.pageType};return Object(d.a)(e,t,this.props.seoUnauthExperiments,this.props.isAccountSwitch)}},{key:"logo",value:function(e){return r.a.createElement("svg",{height:e,viewBox:"0 0 512 512",width:e,xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{d:"M482.56 261.36c0-16.73-1.5-32.83-4.29-48.27H256v91.29h127.01c-5.47 29.5-22.1 54.49-47.09 71.23v59.21h76.27c44.63-41.09 70.37-101.59 70.37-173.46z",fill:"#4285f4"}),r.a.createElement("path",{d:"M256 492c63.72 0 117.14-21.13 156.19-57.18l-76.27-59.21c-21.13 14.16-48.17 22.53-79.92 22.53-61.47 0-113.49-41.51-132.05-97.3H45.1v61.15c38.83 77.13 118.64 130.01 210.9 130.01z",fill:"#34a853"}),r.a.createElement("path",{d:"M123.95 300.84c-4.72-14.16-7.4-29.29-7.4-44.84s2.68-30.68 7.4-44.84V150.01H45.1C29.12 181.87 20 217.92 20 256c0 38.08 9.12 74.13 25.1 105.99l78.85-61.15z",fill:"#fbbc05"}),r.a.createElement("path",{d:"M256 113.86c34.65 0 65.76 11.91 90.22 35.29l67.69-67.69C373.03 43.39 319.61 20 256 20c-92.25 0-172.07 52.89-210.9 130.01l78.85 61.15c18.56-55.78 70.59-97.3 132.05-97.3z",fill:"#ea4335"}),r.a.createElement("path",{d:"M20 20h472v472H20V20z"})))}},{key:"render",value:function(){var e=this,t=this.props.inline,o=this.state.showGoogleSigninWebview,n=H.button;t&&(n=U({},n,{width:"48%",display:"inline-block"}));var a=u.a._("Continue with Google");return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{id:"googleConnectButton",buttonRef:function(t){e.googleButton=t},className:"GoogleConnectButton",onClick:this.handleButtonClick,styleOverrides:n,type:"button"},r.a.createElement("div",{style:H.icon},r.a.createElement("div",{style:H.iconContainer},this.logo(20))),r.a.createElement("span",{style:H.text},a),this.renderTooltip(this.props.tooltip)),o&&J()&&r.a.createElement(P,{onDismiss:this.handleOnDimisssWindowsPWAWebview,onError:this.handleOnErrorWindowsPWAWebview,onSignInCallback:this.onSignInCallback}))}}])&&V(o.prototype,a),i&&V(o,i),t}();Y(Z,"defaultProps",{inline:!1});Z.contextTypes={country:h.a.string,hybridTier:h.a.string,pageType:h.a.string};t.b=Object(A.compose)(i.b,Object(a.connect)(function(e){return{viewer:e.viewer}}),M.b,N.withRouter,W.a)(Z)},GIJk:function(e,t,o){"use strict";var n=o("GyhR"),r=o.n(n),a=o("Qo1m"),i=o("hvnN"),s=o.n(i),l={alternativesSeparator:{marginBottom:"3px",overflow:"hidden",textAlign:"center",color:"#333",fontWeight:"bold"}};function c(e,t){var o=e.text||a.a._("OR"),n=Object.assign({},l.alternativesSeparator,e.css),i="";return e.signupSeparatorContinuous&&(i="AlternativesSeparatorContinuous"),r.a.createElement("p",{className:i,style:n},o)}c.defaultProps={css:{}},c.contextTypes={pageType:s.a.string,userAgent:s.a.shape({isMobile:s.a.bool.isRequired}).isRequired},t.a=c},IPlI:function(e,t,o){e.exports=function(){return new Promise(function(e){Promise.all([o.e(98),o.e(221)]).then(function(t){e(o("1vdY"))}.bind(null,o)).catch(o.oe)})}},MDr3:function(e,t,o){"use strict";var n=o("GyhR"),r=o.n(n),a=o("D+W/"),i=o("IItM"),s=o("Qo1m"),l=o("+U6O");function c(e){var t=e.color,o=e.onClick,n=e.overrideText||s.a._("Got it","Acknowledge protected account modal message");return r.a.createElement(l.c,{accessibilityLabel:n,color:t||"gray",onClick:o,text:n})}var u=o("dsfX"),p=o("2Uh4");function d(e){var t=s.a._("Reset password","Request a password reset email");return r.a.createElement(l.c,{accessibilityLabel:t,color:e.color||"red",inline:e.inline,onClick:function(){Object(p.a)({usernameOrEmail:e.email,callBack:e.callBack})},text:e.overrideText||t})}var g=o("Irlq");function f(e){var t=e.email,o=e.onClose,r=e.onPasswordResetSent,a=e.socialButtons;return n.createElement(u.a,{accessibilityCloseLabel:s.a._("close","accessible label for button to close modal"),accessibilityModalLabel:s.a._("Login with Facebook or Google?","Modal accessibility label for when a user has failed login three times"),heading:s.a._("Looks like you’re having trouble logging in","Modal heading for user who have attempted to login three times"),onDismiss:o,role:"alertdialog",size:"md"},n.createElement(l.b,{paddingX:6,marginBottom:4},n.createElement(l.b,null,n.createElement(l.K,null,Object(g.b)(s.a._("We sent an email to {{ email }} to help you get back in.",""),{email:n.createElement(l.K,{inline:!0,bold:!0,key:"emailAddress"},t)})),n.createElement(l.b,{paddingY:3},n.createElement(d,{inline:!0,color:"gray",email:t,callBack:r,overrideText:s.a._("Resend email","Button to allow the user to request a password reset email")}))),n.createElement(l.b,{marginBottom:4},n.createElement(l.K,null,s.a._("Or log in with Facebook or Google.","Upsell to use Facebook or Google for login"))),a,n.createElement(l.b,{marginTop:4},n.createElement(c,{onClick:o}))))}function h(e){var t=e.email,o=e.onClose,r=e.onPasswordResetSent,a=e.socialButtons;return n.createElement(u.a,{accessibilityCloseLabel:s.a._("close","accessible label for button to close modal"),accessibilityModalLabel:s.a._("Login limit reached","Modal accessibility label for users who have been login rate limited"),heading:s.a._("Oops! Too fast","Modal heading for user who have been login rate limited"),onDismiss:o,role:"alertdialog",size:"md"},n.createElement(l.b,{paddingX:6,marginBottom:4},n.createElement(l.b,{marginBottom:4,width:"100%",overflow:"hidden"},n.createElement(l.K,{inline:!0,leading:"tall"},s.a._("It looks like you’re logging in a lot. Log in with Facebook or Google if you’re connected, or reset your password. Or you can wait 30 minutes and try again.","Statement that the users is login limited"))),n.createElement(l.b,{marginBottom:4},n.createElement(l.K,null,s.a._("Or log in with Facebook or Google.","Upsell to use Facebook or Google for login"))),n.createElement(d,{email:t,callBack:r}),a,n.createElement(l.b,{marginTop:4},n.createElement(c,{onClick:o,overrideText:s.a._("I’ll wait","Button text acknowledging login rate limiting")}))))}var b=o("1JxL");function m(e){var t=e.email,o=e.loginWith,r=e.onClose,a=e.onPasswordResetSent;e.socialButtons;return n.createElement(u.a,{accessibilityCloseLabel:s.a._("close","accessible label for button to close modal"),accessibilityModalLabel:s.a._("No matching account","Modal accessibility label for account recovery"),heading:s.a._("Oops! Something went wrong","Modal heading"),onDismiss:r,role:"alertdialog",size:"md"},n.createElement(l.b,{paddingX:6,marginBottom:4},n.createElement(l.b,{marginBottom:6},o===b.a?n.createElement(l.K,null,s.a._("We couldn’t match your Facebook account to any Pinterest account. Try resetting your password instead.","Notice that no Pinterest account exists for the Facebook account used to attempt login")):n.createElement(l.K,null,s.a._("We couldn’t match your Google account to any Pinterest account. Try resetting your password instead.","Notice that no Pinterest account exists for the Facebook account used to attempt login"))),n.createElement(d,{email:t,callBack:a}),n.createElement(l.b,{marginTop:2},n.createElement(c,{onClick:r}))))}var y="?source=account_recovery";function _(e){var t=e.email,o=e.onClose,r=e.onPasswordResetSent,i=(e.socialButtons,s.a._("Password reset email sent","Modal label for confirmation of password reset send"));return n.createElement(u.a,{accessibilityCloseLabel:s.a._("close","accessible label for button to close modal"),accessibilityModalLabel:i,heading:i,onDismiss:o,role:"alertdialog",size:"md"},n.createElement(l.b,{paddingX:6,marginBottom:4},n.createElement(l.K,{overflow:"normal"},Object(g.b)(s.a._("We sent instructions to pick a new password to {{ email }}.","Statement that a password reset email has been sent to the user"),{email:n.createElement(l.K,{inline:!0,bold:!0,overflow:"normal",key:"emailAddress"},t)})),n.createElement(l.b,{paddingY:4},n.createElement(d,{inline:!0,color:"gray",email:t,callBack:r,overrideText:s.a._("Resend email","Button to allow the user to request a password reset email")})),n.createElement(l.b,null,n.createElement(l.b,{marginBottom:4},n.createElement(l.K,null,Object(g.b)(s.a._("Didn’t get the email? Try these {{ tips }}","Direction to help center if the password reset email failed"),{tips:n.createElement(l.t,{inline:!0,key:"helpCenterLink",target:"blank",href:a.a.GEN.templateConst.settings.HELP_PASSWORD_RESET_URL+y},n.createElement(l.K,{bold:!0,inline:!0,key:"helpCenter"},s.a._("tips from our Help Center","Link text to go to help center")))}))),n.createElement(l.b,{marginBottom:4},n.createElement(l.K,null,Object(g.b)(s.a._("Not your email address? {{ tryAgain }}","Link to password reset flow for users who make an incorrect password reset request"),{tryAgain:n.createElement(l.t,{inline:!0,key:"passwordResetLink",href:a.a.GEN.templateConst.settings.PASSWORD_RESET_URL},n.createElement(l.K,{bold:!0,inline:!0,key:"tryAgain"},s.a._("Try another","Link text to enter the password reset flow for a different email address/username")))})))),n.createElement(l.b,null,n.createElement(c,{color:"red",onClick:o}))))}function w(e){var t=e.email,o=e.onClose,r=e.onPasswordResetSent,a=e.socialButtons;return n.createElement(u.a,{accessibilityCloseLabel:s.a._("close","accessible label for button to close modal"),accessibilityModalLabel:s.a._("Recover your account","Modal accessibility label for account recovery"),heading:s.a._("We protected your account","Modal heading for user who need to recover their accounts"),onDismiss:o,role:"alertdialog",size:"md"},n.createElement(l.b,{paddingX:6,marginBottom:4},n.createElement(l.b,{marginBottom:4},n.createElement(l.K,{inline:!0,leading:"tall"},s.a._("We noticed some strange activity on your Pinterest account so we reset your password and logged everyone out (including you).","Statement that we detected suspicious activity"))),n.createElement(l.b,{marginBottom:4},n.createElement(l.K,null,s.a._("Reset your password or log in with Facebook or Google to get back into your account","Prompt to take action to reset password or upsell login with Facebook/Google"))),n.createElement(d,{email:t,callBack:r}),a,n.createElement(l.b,{marginTop:4},n.createElement(c,{onClick:o}))))}var v=o("WH5r");function E(e){var t=e.onClose;return n.createElement(u.a,{accessibilityCloseLabel:s.a._("close","accessible label for button to close modal"),accessibilityModalLabel:s.a._("Login disabled for suspended account","Modal accessibility label for when a user tries to login with a suspended account"),heading:s.a._("Your account has been suspended","Modal heading for user who have attempted to login with a suspended account"),onDismiss:t,role:"alertdialog",size:"md"},n.createElement(l.b,{paddingX:6,marginBottom:4},n.createElement(l.b,{marginBottom:4},n.createElement(l.K,{inline:!0,leading:"tall"},Object(g.b)(s.a._("Your account is suspended for violating our community guidelines. We previously sent you an email explaining why and how to appeal. If you have questions, {{ help_link }}."),{help_link:n.createElement(v.a,{key:"suspended user help_link"})}))),n.createElement(l.b,{marginTop:4},n.createElement(c,{color:"red",onClick:t,overrideText:s.a._("Got it","Acknowledge suspended account modal message")}))))}var O,S=o("S0Ce"),k=o("GCCY"),x=o("i7XF");function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",function(){return A}),o.d(t,"b",function(){return I});var A=(j(O={},a.a.API_LIMIT_EXCEEDED_ERROR,x.a.RATE_LIMITED),j(O,a.a.API_EVENT_BLOCKED_ERROR,x.a.RATE_LIMITED),j(O,a.a.USER_IN_SAFE_MODE,x.a.SOFT_BANNED),j(O,a.a.POLICY_VIOLATION_USER,x.a.SUSPENDED),j(O,a.a.LOGIN_BAD_PASSWORD_ASK_RESET,x.a.LOGIN_ASSISTANCE),j(O,a.a.LOGIN_HARD_BANNED_USER,x.a.SOFT_BANNED),j(O,a.a.RESPONSE_CODE_TOO_MANY_REQUESTS,x.a.RATE_LIMITED),O),I=function(e){function t(){var e,o,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];return r=this,a=(e=L(t)).call.apply(e,[this].concat(u)),o=!a||"object"!==C(a)&&"function"!=typeof a?T(r):a,j(T(T(o)),"state",{showToast:!1}),j(T(T(o)),"dismissModal",function(){o.props.updateAccountRecoveryModal(null)}),j(T(T(o)),"showPasswordResetSent",function(){return o.props.updateAccountRecoveryModal(x.a.PASSWORD_RESET_SENT)}),j(T(T(o)),"showLoginWithFailed",function(e){e===b.a?o.props.updateAccountRecoveryModal(x.a.PREVENT_FACEBOOK_REGISTER):e===k.a&&o.props.updateAccountRecoveryModal(x.a.PREVENT_GOOGLE_REGISTER)}),j(T(T(o)),"toggleToast",function(){return o.setState(function(e){return{showToast:!e.showToast}})}),j(T(T(o)),"renderSocialButtons",function(){return n.createElement(l.b,null,n.createElement(b.b,{buttonText:s.a._("Continue with Facebook","Facebook login button text"),container:i.a.ACCOUNT_RECOVERY,disablePostSignupNextUrl:!0,onLoginWithMfa:o.props.onLoginWithMfa,onLoginWithSuspended:o.props.onLoginWithSuspended,showFallback:!0,preventRegister:o.showLoginWithFailed}),n.createElement(l.b,{marginTop:1},n.createElement(k.b,{container:i.a.ACCOUNT_RECOVERY,disablePostSignupNextUrl:!0,onLoginWithMfa:o.props.onLoginWithMfa,onLoginWithSuspended:o.props.onLoginWithSuspended,preventRegister:o.showLoginWithFailed,onLoginWithVoluntarilyDeactivated:function(e){o.dismissModal(),o.props.onLoginWithVoluntarilyDeactivated&&o.props.onLoginWithVoluntarilyDeactivated(e)}})))}),o}var o,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,n["Component"]),o=t,(r=[{key:"render",value:function(){var e=this.props,t=e.email,o=e.modalType,r={email:t,onClose:this.dismissModal,onPasswordResetSent:this.showPasswordResetSent,socialButtons:this.renderSocialButtons()};switch(o){case x.a.SUSPENDED:return n.createElement(E,{onClose:this.dismissModal});case x.a.LOGIN_ASSISTANCE:return n.createElement(f,r);case x.a.RATE_LIMITED:return n.createElement(h,r);case x.a.SOFT_BANNED:return n.createElement(w,r);case x.a.PREVENT_FACEBOOK_REGISTER:return n.createElement(m,Object.assign({},r,{loginWith:b.a}));case x.a.PREVENT_GOOGLE_REGISTER:return n.createElement(m,Object.assign({},r,{loginWith:k.a}));case x.a.PASSWORD_RESET_SENT:return n.createElement(n.Fragment,null,n.createElement(_,Object.assign({},r,{onPasswordResetSent:this.toggleToast})),this.state.showToast&&n.createElement(l.b,{fit:!0,dangerouslySetInlineStyle:{__style:{bottom:"50%",left:"50%",transform:"translateX(-50%)"}},paddingX:1,position:"fixed"},n.createElement(S.a,{onHide:this.toggleToast,text:s.a._("Email sent!"),duration:3500})));default:return null}}}])&&R(o.prototype,r),a&&R(o,a),t}()},QWmP:function(e,t,o){"use strict";o.d(t,"a",function(){return n});var n=function(e,t){var o,n;o={message:e,href:t},(n=document.createEvent("CustomEvent")).initCustomEvent("handleErrorMessage",!0,!0,o),window.dispatchEvent(n)}},QtSf:function(e,t,o){"use strict";t.a=function(e,t){var o;return t.some(function(t){var n=t(e);return n.errors.length>0&&(o=n.errors[0],!0)}),o}},Ud2L:function(e,t,o){"use strict";var n=o("GyhR"),r=o("D+W/"),a=o("Qo1m"),i=o("2Uh4"),s=o("Mce2"),l=o("ggpB"),c=o("Irlq"),u=o("+U6O");t.a=function(e){var t=e.api_error_code,o=e.errorMessage,p=e.handleTouch,d=(e.source,e.userSearch),g=(e.seoUnauthExperiments,function(e){return function(e,t,o){return n.createElement("button",{style:{background:"transparent",border:"none",verticalAlign:"inherit",padding:0},type:"button",onClick:function(){Object(l.a)("unauth_password_reset_link_tapped"),Object(i.a)({usernameOrEmail:t,callBack:o})}},n.createElement(u.K,{bold:!0,inline:!0,color:"orange",size:"sm",key:"err_text"},e))}(e,d,p)}),f=function(e){switch(t){case r.a.API_EVENT_BLOCKED_ERROR:case r.a.API_LIMIT_EXCEEDED_ERROR:case r.a.RESPONSE_CODE_TOO_MANY_REQUESTS:return Object(c.b)(a.a._("You’ve entered a lot of incorrect passwords. To get back into your account, {{ resetPasswordLink }}. Or you can wait 30 minutes and try again.","Error message when login limited"),{resetPasswordLink:g(a.a._("reset your password","Link text for password reset"))});case r.a.LOGIN_HARD_BANNED_USER:case r.a.USER_IN_SAFE_MODE:return Object(c.b)(a.a._("We noticed some strange activity on your account.  {{ resetPasswordLink }} or log in with Facebook or Google to get back into your account.","Error message when user is soft banned"),{resetPasswordLink:g(a.a._("Reset your password","Link text for password reset"))});case r.a.INVALID_PASSWORD_GOOGLE_USER:return Object(c.b)(a.a._("Your account is already linked to Google. To log in with email, {{ resetPasswordLink }}"),{resetPasswordLink:g(a.a._("set a password.","Link text to set password for user with account with only google auth"))});case r.a.INVALID_PASSWORD_FB_USER:return Object(c.b)(a.a._("Your account is already linked to Facebook. To log in with email, {{ resetPasswordLink }}"),{resetPasswordLink:g(a.a._("set a password.","Link text to set password for user with account with only facebook auth"))});case r.a.INVALID_PASSWORD_ERROR_CODE:return Object(c.b)(a.a._("The password you entered is incorrect. Try again or {{ resetPasswordLink }}"),{resetPasswordLink:g(a.a._("Reset your password","Link text for password reset"))});default:return[o]}}();return n.createElement(s.a,{id:"touchableErrorMessage"},f.map(function(e,t){return n.createElement(u.K,{inline:!0,color:"orange",size:"sm",key:"err_message_".concat(t)},e)}))}},WH5r:function(e,t,o){"use strict";o.d(t,"a",function(){return s});var n=o("GyhR"),r=o.n(n),a=o("Qo1m"),i=o("+U6O"),s=function(){return r.a.createElement(i.t,{inline:!0,href:"https://help.pinterest.com/login-request?what_do_you_need_help_with=Getting+into+my+account&tell_more_account_access=Appeal+account+suspension"},a.a._("get in touch with us","link text shown to redirect to help.pinterest.com for appealing a suspension"))}},YkTi:function(e,t,o){"use strict";var n=o("GyhR"),r=o.n(n),a=o("Ivf5"),i=o("PNko"),s=o.n(i),l=o("Qo1m"),c=o("iJ35"),u=o("VSY/");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){function t(){var e,o,r,a,i,s,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var d=arguments.length,f=new Array(d),b=0;b<d;b++)f[b]=arguments[b];return r=this,a=(e=g(t)).call.apply(e,[this].concat(f)),o=!a||"object"!==p(a)&&"function"!=typeof a?h(r):a,i=h(h(o)),c=function(){var e=o.props,t=e.fullName,r=e.imageSrc;return r?n.createElement("img",{alt:t,src:r,title:Object(u.i)(l.a._("More from {{ fullName }}"),{fullName:t})}):n.createElement("span",{className:"icon"},t[0].toUpperCase())},(s="getContent")in i?Object.defineProperty(i,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):i[s]=c,o}var o,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,n["Component"]),o=t,(r=[{key:"render",value:function(){return n.createElement("div",null,this.getContent())}}])&&d(o.prototype,r),a&&d(o,a),t}(),m=o("2Npu"),y=o("+U6O"),_=o("9Y9K"),w=o("Ii6Q");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var C=function(e){function t(){var e,o,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=this,r=(e=O(t)).call.apply(e,[this].concat(i)),o=!r||"object"!==v(r)&&"function"!=typeof r?k(n):r,x(k(k(o)),"state",{isFollowing:o.props.user.explicitly_followed_by_me||!1}),x(k(k(o)),"handleFollowClick",function(){var e=o.props,t=e.follow,n=e.unfollow,r=e.user;o.state.isFollowing?(n(r.id),o.setState({isFollowing:!1})):(t(r.id),o.setState({isFollowing:!0})),o.props.logData&&o.props.contextLog(101,o.props.logData)}),o}var o,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,n["Component"]),o=t,(a=[{key:"renderFollowButton",value:function(){var e=this.state.isFollowing,t=this.props.isSelf,o=e?l.a._("Unfollow"):l.a._("Follow");return t?r.a.createElement(y.c,{inline:!0,disabled:!0,text:l.a._("That's you!","Text describing that the person's avatar is you")}):r.a.createElement(y.c,{color:e?"gray":"red",inline:!0,onClick:this.handleFollowClick,text:o})}},{key:"render",value:function(){var e=this.props,t=e.className,o=e.showName,n=e.showFollow,a=e.size,i=e.subtitle,l=e.title,u=e.user,p=void 0===u?{}:u,d=p.full_name,g=p.username,f=p.image_key||p.image_medium_url||p.image_small_url;return r.a.createElement("div",{className:s()("Module","User","hasText","thumb",a,t)},r.a.createElement(y.b,{alignItems:"center",direction:"row",display:"flex",marginStart:-1,marginEnd:-1},r.a.createElement(y.b,{flex:"grow",paddingX:1},r.a.createElement(c.b,{className:"profileSource",to:"/".concat(g,"/")},r.a.createElement("div",{className:"thumbImageWrapper"},r.a.createElement(b,{fullName:p.full_name,imageSrc:f})),l&&r.a.createElement("h3",{className:"title"},l),o&&r.a.createElement("h4",{className:"fullname"},d),i&&r.a.createElement("div",{className:"subtitle"},i))),n&&r.a.createElement(y.b,{paddingX:1},this.renderFollowButton())))}}])&&E(o.prototype,a),i&&E(o,i),t}();x(C,"defaultProps",{followedByMe:!1,showFollow:!1,showName:!1,size:"small",subtitle:"",viewType:"thumb"});t.a=Object(_.compose)(Object(a.connect)(null,function(e){return{follow:function(t){return e(Object(w.a)(t))},unfollow:function(t){return e(Object(w.b)(t))}}}),m.a)(C)},bvxc:function(e,t,o){"use strict";var n=o("GyhR"),r=o.n(n),a=o("Ivf5"),i=o("GIJk"),s=o("D+W/"),l=o("Qo1m"),c=o("3nbW"),u=o("2Uh4"),p=o("cqmR"),d=o("hvnN"),g=o.n(d),f=o("wFAD"),h=o("ePT2"),b=o("QtSf"),m=o("PhUE"),y=o("CBQr"),_=o("Ud2L"),w=o("ggpB"),v=o("rlRx"),E=o("08qL"),O=o("9Y9K"),S=(o("YSek"),o("QWmP")),k=o("k9eC"),x=o("m3Ge"),C=o("JsRk"),R=o("MDr3"),L=o("1JxL"),P=o("GCCY"),T=o("i7XF"),j=o("2Npu"),A=o("+U6O"),I=o("ovu7");function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){G(e,t,o[t])})}return e}function N(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var U=s.a.GEN.templateConst.settings.PASSWORD_RESET_URL,V="loginmodal",q="email",K="6LeZIo0UAAAAAKFpimHio-ff_ddIT8f_QzpXG0_1",z={emailButtonStyles:{height:"40px",width:"100%",borderRadius:"2px"},emailButtonTextStyles:{fontFamily:E.a,textAlign:"center",fontSize:"15px",WebkitFontSmoothing:"auto"},spaceBetweenTextAndSocial:{height:"11px"},loginForm:{borderTop:"solid 1px #ccc",minHeight:"350px",padding:"20px 10px"},loginTitleContainer:{margin:"0 auto 25px"},loginTitle:{fontSize:"28px",fontWeight:"bold",letterSpacing:"-1px"},loginContainer:{margin:"0 auto",width:"268px"},loginFooterContainer:{marginTop:"15px",color:"#333"},socialButtonContainer:{marginTop:"10px"},socialButtonSeparator:{height:"10px"},verticalCenter:{display:"flex",flexDirection:"column",justifyContent:"center"}},Y=function(e){function t(e,o){var n,a,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,c=W(t).call(this,e,o),n=!c||"object"!==B(c)&&"function"!=typeof c?D(a):c,G(D(D(n)),"onLoginWithVoluntarilyDeactivated",function(e){n.setState({googleValidationError:e.message})}),G(D(D(n)),"onLoginWithSuspended",function(){var e=n.props.loadingIndicatorCallback;e&&e(!1),n.setState({accountRecoveryModalType:R.a[s.a.POLICY_VIOLATION_USER],loading:!1})}),G(D(D(n)),"onloadCallback",function(){try{var e=window.grecaptcha.render("recaptcha_placeholder_1",{sitekey:K,callback:"verifyCaptcha"});window.recaptchaIdOne=e}catch(e){}try{var t=window.grecaptcha.render("recaptcha_placeholder_2",{sitekey:K,callback:"verifyCaptcha"});window.recaptchaIdTwo=t}catch(e){}}),G(D(D(n)),"inExpGroupHigherPasswordReset",function(){return new k.c(n.props.requestContext,"web_unauth_higher_password_reset").enabled()}),G(D(D(n)),"handleButtonClick",function(e,t){var o=n.props,r=o.contextLog,a=o.viewer,i=p.a.runPhoneValidators(n.props.email,n.context.locale,n._loginFacebookAccountKit.bind(D(D(n))));a.isAuth?r(101,{element:30,login_state:a.isLimitedLogin?2:1,signup_login_method:1}):r(101,{element:30,signup_login_method:1}),n.setState({facebookValidationError:null,googleValidationError:null}),i&&((i=Object(b.a)(n.props.email,n.emailValidators))?(n.setState({emailValidationError:i}),Object(w.a)("unauth.login.error.CLIENT_ERROR.malformemail.".concat(V))):(n.setState({emailValidationError:null}),(i=Object(b.a)(n.props.password,n.passwordValidators))?(n.setState({passwordValidationError:i}),Object(w.a)("unauth.login.error.CLIENT_ERROR.malformpwd.".concat(V))):(n.setState({passwordValidationError:null}),n.loginUser(q,void 0,t))))}),G(D(D(n)),"preventRegister",function(e){e===L.a?n.updateAccountRecoveryModal(T.a.PREVENT_FACEBOOK_REGISTER):e===P.a&&n.updateAccountRecoveryModal(T.a.PREVENT_GOOGLE_REGISTER),n.props.triggerAccountRecoveryMode&&n.props.triggerAccountRecoveryMode(e)}),G(D(D(n)),"updateAccountRecoveryModal",function(e){return n.setState({accountRecoveryModalType:e})}),G(D(D(n)),"handleLoginFailure",function(e,t,o){var r=n.props,a=r.clearPassword,i=r.contextLog,c=r.viewer,u=n.getAuxDataLoginMethod(e);c.isAuth?i(7535,{login_state:c.isLimitedLogin?2:1,signup_login_method:u}):i(7535,{signup_login_method:u}),n.props.loadingIndicatorCallback(!1);var p=t.http_status===s.a.RESPONSE_CODE_TOO_MANY_REQUESTS?s.a.RESPONSE_CODE_TOO_MANY_REQUESTS:t.api_error_code;if(p!==s.a.LOGIN_MFA_REQUIRED){if(p===s.a.RESPONSE_CODE_TOO_MANY_REQUESTS&&t.api_error_code===s.a.API_EVENT_BLOCKED_ERROR&&t.message&&"!"!==t.message[t.message.length-1]&&!T.b.isExceedRecaptchaLocalLimit())if((n.props.requestContext.seoUnauthExperiments.v2ActivateExperiment("web_unauth_show_recaptcha_for_login_ip_rate_limit")||"").startsWith("enabled")){if(document.getElementById("recaptcha-jssdk"))n.onloadCallback();else{var d=document.createElement("script");d.id="recaptcha-jssdk",d.src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit";var g=document.getElementsByTagName("script")[0];g.parentNode&&g.parentNode.insertBefore(d,g)}return void n.setState({passwordValidationError:l.a._("Oops! You logged in too quickly. Please try again with the reCAPTCHA.","Error message showing to user when his/her login attempt exceeds ip based rules, ask they to retry using recaptcha"),loading:!1})}var f="";p!==s.a.INVALID_PASSWORD_GOOGLE_USER&&p!==s.a.INVALID_PASSWORD_FB_USER||(f=n.props.requestContext.seoUnauthExperiments.v2ActivateExperiment("web_unauth_social_only_set_password")||"");var h=T.b.getLoginErrorState(t,"login",n.props.email,_.a,n.updateAccountRecoveryModal,n.props.requestContext.seoUnauthExperiments);if(f.startsWith("enabled_flyout")){var b="";p===s.a.INVALID_PASSWORD_GOOGLE_USER?b=l.a._("Your account is linked to Google. To log in with email, ","Text in bubble prompting user who only has Google log in to create a password"):p===s.a.INVALID_PASSWORD_FB_USER&&(b=l.a._("Your account is linked to Facebook. To log in with email, ","Text in bubble prompting user who only has Facebook log in to create a password")),n.setState({googleOnlyLogin:!0,flyoutErrorText:b}),h={}}h?(n.setState(F({accountRecoveryModalType:R.a[p]},h,{loading:!1})),a&&h.passwordValidationError&&a()):(l.a._("Sorry! Something went wrong on our end.","Error message shown when user tried to login but error occured, and we don't have any other information about the error. May or may not be recoverable by the user."),Object(S.a)(l.a._("Sorry! Something went wrong on our end.")),n.setState({loading:!1}))}else T.b.handleLoginMfa(o,t.data,n.props.onLoginWithMfa)}),G(D(D(n)),"verifyCaptcha",function(){var e=window.grecaptcha.getResponse(window.recaptchaIdOne)||window.grecaptcha.getResponse(window.recaptchaIdTwo);T.b.updateRecaptchaTimeStamp(),n.handleButtonClick(void 0,e),T.b.isExceedRecaptchaLocalLimit()||(void 0!==window.recaptchaIdOne&&window.grecaptcha.reset(window.recaptchaIdOne),void 0!==window.recaptchaIdTwo&&window.grecaptcha.reset(window.recaptchaIdTwo))}),G(D(D(n)),"_loginFacebookAccountKit",function(e){if(p.a.validateResponse(e)){var t={phone_number:n.props.email,fb_auth_code:e.code};Object(w.a)("unauth_phone_only_login_attempt"),n.loginUser(L.a,t)}else n.setState({emailValidationError:l.a._("Enter your email or phone number to try again."),loading:!1})}),G(D(D(n)),"handleEmailChange",function(e){n.props.onEmailChange&&n.props.onEmailChange(e)}),G(D(D(n)),"handlePasswordChange",function(e){n.state.passwordValidationError&&n.setState({passwordValidationError:null}),n.props.onPasswordChange&&n.props.onPasswordChange(e)}),G(D(D(n)),"handleBlur",function(){n.setState({facebookValidationError:null,googleValidationError:null})}),G(D(D(n)),"handleMagicLinkClick",function(){n.setState({magicLinkLoading:!0});var e=Object(b.a)(n.props.email,n.emailValidators);e?n.setState({emailValidationError:e,magicLinkLoading:!1}):(n.setState({emailValidationError:null}),h.a.create("UserLoginPasswordlessResource",{username_or_email:n.props.email,is_magic_link:!0}).callCreate().then(function(){Object(x.a)("link_send_success",n.props.email,n.props.password),n.setState({magicLinkLoading:!1}),n.props.toggleMagicLinkConfirmation(!0)},function(e){var t;Object(x.a)("link_send_failure",n.props.email,n.props.password),t=e.message?l.a._("The email you entered does not belong to any account.","Error message shown when login email does not exist."):l.a._("Sorry! Something went wrong on our end.","error message on login modal telling users we had a problem with their request"),n.setState({emailValidationError:t,magicLinkLoading:!1})}))}),G(D(D(n)),"handlePasswordResetClicked",function(e){e.event.preventDefault(),Object(w.a)("unauth.web.social_only.password_flyout.click"),Object(u.a)({usernameOrEmail:n.props.email,callBack:n.handlePasswordResetEmailSent})}),G(D(D(n)),"handlePasswordResetEmailSent",function(){n.setState({googleOnlyLogin:!1,flyoutErrorText:""}),Object(w.a)("unauth.web.social_only.password_flyout.sent"),n.updateAccountRecoveryModal(T.a.PASSWORD_RESET_SENT)}),G(D(D(n)),"dismissSocialFlyout",function(){}),G(D(D(n)),"renderSocialFlyout",function(e){return r.a.createElement(A.k,{anchor:e,idealDirection:"right",size:"md",color:"orange",onDismiss:n.dismissSocialFlyout},r.a.createElement(A.b,{padding:3},r.a.createElement(A.P,{onTouch:n.handlePasswordResetClicked},r.a.createElement(A.K,{size:"lg",color:"white",overflow:"normal"},n.state.flyoutErrorText,r.a.createElement(A.t,{href:"/"},n.resetPasswordText)))))}),G(D(D(n)),"renderPasswordResetLink",function(){var e=n.props,t=e.contextLog,o=e.email,a=e.viewer,i=n.state.passwordValidationError,s=z.loginFooterContainer;if(n.inExpGroupHigherPasswordReset()){if(i&&r.a.isValidElement(i))return null;s={float:"left",marginBottom:"8px",marginTop:"4px"}}return r.a.createElement("div",{style:s},r.a.createElement("a",{href:U+(o?"?q=".concat(o):""),onClick:function(){Object(w.a)("login_modal_forget_account"),a.isAuth?t(101,{element:10881,login_state:a.isLimitedLogin?2:1}):t(101,{element:10881})}},l.a._("Forgot your password?","Desktop login modal link for users to recover their account")))}),G(D(D(n)),"renderRegisterForm",function(){var e=n.props,t=e.email,o=e.hideEmailField,a=e.inputStyleOverrides,i=e.isAccountSwitch,s=e.loginButtonTextOverride,c=e.magicLinkGroup,u=e.password,p=s||l.a._("Log in");return r.a.createElement(f.a,{buttonText:p,disableEmailLogin:n.props.disableEmailLogin,email:t,emailText:l.a._("Email or phone number"),emailValidationError:n.state.emailValidationError,handleMagicLinkClick:n.handleMagicLinkClick,hideEmailField:o,hidePasswordField:n.props.hidePasswordField,hideFacebookButton:n.props.hideFacebookButton,hideGoogleButton:n.props.hideGoogleButton,inputStyleOverrides:a,loading:n.state.loading&&!i,magicLinkLoading:n.state.magicLinkLoading,magicLinkGroup:c,onButtonClick:n.handleButtonClick,onEmailBlur:n.handleBlur.bind(D(D(n))),onEmailChange:n.handleEmailChange.bind(D(D(n))),onPasswordChange:n.handlePasswordChange,password:u,passwordText:l.a._("Password"),passwordValidationError:n.state.passwordValidationError,renderPasswordResetLink:n.inExpGroupHigherPasswordReset()?n.renderPasswordResetLink:null})}),G(D(D(n)),"renderOriginalForm",function(){return r.a.createElement("div",null,n.renderRegisterForm(),!n.props.hidePasswordField&&(!n.props.hideFacebookButton||!n.props.hideGoogleButton)&&r.a.createElement(i.a,null),n.renderSocialButtons())}),G(D(D(n)),"renderButtons",function(){return n.renderOriginalForm()}),n.state={accountRecoveryModalType:null,emailValidationError:e.emailValidationError||null,passwordValidationError:e.passwordValidationError||null,facebookOnlyLogin:!1,facebookValidationError:null,flyoutErrorText:"",googleOnlyLogin:!1,googleValidationError:null,loading:!1,magicLinkLoading:!1,passwordFieldVisible:!1,isStopRequest:!1};var d=l.a._("You missed a spot! Don't forget to add your email or phone number."),g=l.a._("Hmm...that doesn't look like an email address or phone number."),m=l.a._("Oh @*&#! No zany characters allowed.");n.emailValidators=[Object(I.q)({message:d}),Object(I.f)({message:g})];var y=l.a._("The password you entered is incorrect.");return n.passwordValidators=[Object(I.b)({message:m}),Object(I.o)({shortPassStr:y,badPassStyle:y,samePasswordStr:y,blackPassStr:y})],n}var o,a,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,n["Component"]),o=t,(a=[{key:"componentDidMount",value:function(){T.b.isFullyLoggedIn(this.context.isAuthenticated,this.context.loginState)&&!this.props.isAccountSwitch&&(this.props.showResponseMessageModal?this.props.showResponseMessageModal(!1):T.b.handleRedirect(this.props.nextUrlParam)),p.a.setupPhoneAuth(this.context.locale),this.resetPasswordText=l.a._("click here to set a password.","link inside bubble allowing user with only google or facebook login to click to set a password"),window.onloadCallback=this.onloadCallback,window.verifyCaptcha=this.verifyCaptcha,void 0===window.recaptchaCount?window.recaptchaCount=1:window.recaptchaCount+=1}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.emailValidationError,o=e.passwordValidationError,n={};t!==this.props.emailValidationError?n={emailValidationError:t}:o!==this.props.passwordValidationError&&(n={passwordValidationError:o}),this.setState(n)}},{key:"componentWillUnmount",value:function(){void 0!==window.recaptchaCount&&(window.recaptchaCount-=1)}},{key:"getAuxDataLoginMethod",value:function(e){return e===L.a?2:e===P.a?3:e===q?1:""}},{key:"loginUser",value:function(e,t,o){var n=this;this.setState({loading:!0}),this.props.loadingIndicatorCallback(!0);var r=t||{username_or_email:this.props.email,password:this.props.password},a=this.props,i=a.contextLog,s=a.isAccountSwitch,l=a.container,u=a.viewer,p=a.showResponseMessageModal,d={container:this.props.container,hybridTier:this.context.hybridTier,page:this.context.pageType},g=m.b.localStorage.getItem("visitedPagesBeforeLogin"),f=this.getAuxDataLoginMethod(e);u.isAuth?i(7534,{login_state:u.isLimitedLogin?2:1,signup_login_method:f}):i(7534,{signup_login_method:f}),Object(c.a)(r,d,this.props.requestContext.seoUnauthExperiments,s,g,o).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.isAuth?i(7536,{login_state:u.isLimitedLogin?2:1,signup_login_method:f}):i(7536,{signup_login_method:f}),T.b.storeLoginCredentialsToBrowser(r);var t=n.props.nextUrlParam||T.b.defaultLoginRedirectUrl();if(s&&e.resource_response&&e.resource_response.data&&e.resource_response.data.user){var o=e.resource_response.data.user;Object(v.b)(o,"email",l),p?p(!1):T.b.handleRedirect("/"+o.username)}else"/"!==t&&m.b.localStorage.setItem("authAfterLogin",!0),T.b.storeLoginCredentialsToBrowser(r),p?p(!1):T.b.handleRedirect(t)},function(t){return n.handleLoginFailure(e,t,r)})}},{key:"renderSocialButtons",value:function(){var e=this,t=this.props,o=t.disablePostSignupNextUrl,n=t.hideFacebookButton,a=t.hideGoogleButton,i=t.isAccountSwitch,s=t.isPersonalizedLoginFlyout,c=t.loadingIndicatorCallback,u=t.nextUrlParam,p=t.onLoginWithMfa,d=t.onSocialConnectVerified,g=t.shouldPreventRegister,f=this.state,h=f.facebookOnlyLogin,b=f.googleOnlyLogin,m=!n&&r.a.createElement("div",{ref:function(t){e.facebookButton=t}},r.a.createElement(L.b,{buttonText:l.a._("Continue with Facebook"),container:this.props.container,disablePostSignupNextUrl:o,isAccountSwitch:i,loadingIndicatorCallback:c,nextUrlParam:u,onSocialConnectVerified:d,onLoginWithMfa:p,onLoginWithSuspended:this.onLoginWithSuspended,tooltip:this.state.facebookValidationError,useGestaltTooltip:!0,preventRegister:g?this.preventRegister.bind(this):void 0,showResponseMessageModal:this.props.showResponseMessageModal}),h&&this.renderSocialFlyout(this.facebookButton)),y=!a&&r.a.createElement("div",{ref:function(t){e.googleButton=t}},r.a.createElement(P.b,{container:this.props.container,disablePostSignupNextUrl:o,isAccountSwitch:i,nextUrlParam:u,onLoginWithMfa:p,onLoginWithSuspended:this.onLoginWithSuspended,onSocialConnectVerified:d,tooltip:this.state.googleValidationError,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated,preventRegister:g?this.preventRegister.bind(this):void 0,showResponseMessageModal:this.props.showResponseMessageModal}),b&&this.renderSocialFlyout(this.googleButton)),_=!n&&!a?"8px":"0px",w=s?F({},z.socialButtonSeparator,{height:_}):z.socialButtonSeparator,v=s?F({},z.socialButtonContainer,{marginTop:"9px"}):z.socialButtonContainer;return r.a.createElement("div",{style:v},m,r.a.createElement("div",{style:w}),y)}},{key:"render",value:function(){var e=this.props,t=e.isAccountSwitch,o=e.email;return r.a.createElement("div",{style:z.loginContainer},r.a.createElement(R.b,{modalType:this.state.accountRecoveryModalType,updateAccountRecoveryModal:this.updateAccountRecoveryModal,email:o,onLoginWithMfa:this.props.onLoginWithMfa}),this.renderButtons(),!this.props.hideTermsOfService&&r.a.createElement(y.a,{dark:!0}),t||this.props.hidePasswordReset||this.inExpGroupHigherPasswordReset()?null:this.renderPasswordResetLink())}}])&&N(o.prototype,a),d&&N(o,d),t}();G(Y,"defaultProps",{container:"unknown",isAccountSwitch:!1,isPersonalizedLoginFlyout:!1,shouldPreventRegister:!1});Y.contextTypes={isAuthenticated:g.a.bool.isRequired,locale:g.a.string.isRequired,loginState:g.a.number,userAgent:g.a.shape({isMobile:g.a.bool.isRequired}).isRequired,hybridTier:g.a.string,pageType:g.a.string},t.a=Object(O.compose)(Object(a.connect)(function(e){return{viewer:e.viewer}}),j.a,C.withRouter)(Y)},cqmR:function(e,t,o){"use strict";var n=o("D+W/"),r=o("n/kK"),a=o("Qo1m"),i=o("IPlI"),s=o.n(i),l=o("QtSf"),c=o("ovu7"),u={PhoneNumberAsYouTypeParser:null,csrf:Math.floor(0xffffffffffff*Math.random()).toString(16),stageTranslations:function(){a.a._("Required","Error message to hint user missed a field."),a.a._("Not a phone number.","Validation error when user enters an invalid value for phone number")},phoneNumberValidators:[Object(c.q)(),Object(c.p)()],setupPhoneAuth:function(e){var t=u.csrf;window.AccountKit_OnInteractive=function(){AccountKit.init({appId:n.a.GEN.templateConst.settings.FACEBOOK_API_KEY,state:t,version:"v1.1",fbAppEventsEnabled:!0})},function(t,o,n){var a=t.getElementsByTagName(o)[0];if(!t.getElementById(n)){var i=t.createElement(o);i.id=n,i.src="https://sdk.accountkit.com/"+r.a.getLocaleString(e)+"/sdk.js",a.parentNode.insertBefore(i,a)}}(document,"script","accountkit-jssdk"),s()().then(function(e){u.PhoneNumberAsYouTypeParser=e.default})},runPhoneValidators:function(e,t,o){var n=Object(l.a)(e,u.phoneNumberValidators);if(!n)try{var r=u._extractCountryCode(t),a=new u.PhoneNumberAsYouTypeParser(r);a.input(e),AccountKit.login("PHONE",{countryCode:u._extractPhoneCountryCode(a),phoneNumber:u._extractPhoneNumber(a)},o)}catch(e){return!0}return n},validateResponse:function(e){return e&&"PARTIALLY_AUTHENTICATED"===e.status&&e.state===u.csrf},_extractCountryCode:function(e){return e.slice(-2).toUpperCase()||"US"},_extractPhoneCountryCode:function(e){return e.country_phone_code?"+"+e.country_phone_code:e.country&&e.country_metadata.length>0?"+"+e.country_metadata[0]:"+1"},_extractPhoneNumber:function(e){return e.national_number}};t.a=u},hKcJ:function(e,t,o){"use strict";var n=o("GyhR"),r=o.n(n),a=(o("hvnN"),o("+U6O"));function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p={tooltipText:{overflowWrap:"break-word",wordWrap:"break-word",color:"white",fontWeight:"bold"}},d=function(e){function t(e,o){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=l(this,c(t).call(this,e,o))).state={tooltipIsOpen:!!e.message},n}var o,i,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,n["Component"]),o=t,(i=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.message!==this.props.message&&this.setState({tooltipIsOpen:!!e.message})}},{key:"render",value:function(){var e=this,t=this.props.message;return this.state.tooltipIsOpen?r.a.createElement(a.k,{anchor:this.props.anchor,color:"darkGray",idealDirection:"right",onDismiss:function(){return e.setState({tooltipIsOpen:!0})},shouldFocus:!1,size:"md"},r.a.createElement(a.b,{column:12,padding:3},this.props.children?r.a.createElement("span",{style:p.text},this.props.children):r.a.createElement("span",{dangerouslySetInnerHTML:{__html:t},style:p.tooltipText}))):null}}])&&s(o.prototype,i),d&&s(o,d),t}();t.a=d},ivDc:function(e,t,o){"use strict";var n=o("GyhR"),r=o("AIe5"),a=o("+U6O");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}function l(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).apply(this,arguments))}var o,i,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,n["Component"]),o=t,(i=[{key:"render",value:function(){var e=this,t=this.props,o=t.description,i=t.error,l=t.id,c=t.label,u=t.required,p=void 0!==u&&u,d=t.onLabelTouch,g=s(t,["description","error","id","label","required","onLabelTouch"]);return n.createElement(r.a,{description:o,error:i,id:l,label:c,required:p,onLabelTouch:d},n.createElement(a.M,Object.assign({},g,{hasError:!!i,id:l,ref:function(t){e.textfield=t?t.textfield:null}})))}}])&&l(o.prototype,i),d&&l(o,d),t}();t.a=d},jDCj:function(e,t,o){"use strict";var n=o("GyhR"),r=o.n(n),a=o("ivDc"),i=o("hKcJ"),s=o("Qo1m"),l=(o("hvnN"),o("tQ9o")),c=o("08qL"),u=o("+U6O");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){m(e,t,o[t])})}return e}function g(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var y={input:{backgroundColor:"#fff",border:"solid 1px #ccc",WebkitBoxShadow:"none",boxShadow:"none",position:"relative",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",borderRadius:"3px",fontWeight:"bold",padding:"10px",WebkitBoxSizing:"border-box",boxSizing:"border-box",width:"100%",color:"#333",fontSize:"14px"},fieldset:{position:"relative"},errorIcon:{position:"absolute",right:"14px",top:"14px"},tooltipText:{overflowWrap:"break-word",wordWrap:"break-word",color:"white",fontWeight:"bold"},suggestedEmailSpan:{whiteSpace:"nowrap"},suggestedEmailLink:{display:"inline-block",font:"inherit",fontWeight:"bold",fontSize:"14",color:"#fff",cursor:"pointer",textDecoration:"underline",verticalAlign:"top",outline:"none",outlineOffset:"0"},fieldTitle:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",color:"#333",float:"left",fontFamily:c.b,fontSize:"16px",fontStyle:"normal",fontWeight:"bold",margin:"15px 0px 5px 3px"},suggestedEmailTooltip:{width:"match-content"}},_=function(e){function t(e,o){var n,c,d;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c=this,d=f(t).call(this,e,o),n=!d||"object"!==p(d)&&"function"!=typeof d?b(c):d,m(b(b(n)),"handleDomainErrorDismiss",function(){n.setState({shouldTooltipOpen:!1})}),m(b(b(n)),"renderErrorIcon",function(e){if(e)return r.a.createElement("div",{className:"InputField__errorIcon",style:y.errorIcon},r.a.createElement(u.n,{accessibilityLabel:s.a._("Remove","Accessible label for error icon"),color:"red",icon:"remove",inline:!0,size:14}))}),m(b(b(n)),"renderTooltip",function(e,t){if(e&&t)return n.props.useGestaltTooltip?r.a.createElement(i.a,{anchor:n._input,message:e}):r.a.createElement(l.a,{message:e})}),m(b(b(n)),"renderGestaltInputField",function(){var e=n.props,t=e.autoComplete,o=e.disabled,i=e.domainError,s=e.id,l=e.inputRef,c=e.name,p=e.onBlur,d=e.onChange,g=e.onFocus,f=e.placeholder,h=e.type,b=e.updateEmail,m=e.useExperimentalTextfield,y=e.value,_=n.props.hasError||n.props.tooltip?n.props.tooltip:"";return m?r.a.createElement(a.a,{disabled:o,error:i||_,id:s,name:c,onBlur:p,onChange:function(e){var t=e.event;e.value;d(t)},onFocus:g,placeholder:f,ref:function(e){n._gestaltInput=e,l&&l(e)},type:h,onLabelTouch:b,value:y}):r.a.createElement(u.M,{autoComplete:t,disabled:o,errorMessage:_,id:s,name:c,onBlur:p,onChange:function(e){var t=e.event;e.value;d(t)},onFocus:g,placeholder:f,ref:function(e){n._gestaltInput=e,l&&l(e)},type:h,updateEmail:b,value:y})}),n.state={initialFocus:n.props.focused||!1,gainFocus:!1},n}var o,c,_;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,n["Component"]),o=t,(c=[{key:"componentDidMount",value:function(){this.state.initialFocus&&this.focusInput()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,o=t.domainError,n=t.type;e.hasError&&!1===this.props.hasError?this.setState({gainFocus:!0}):this.setState({gainFocus:!1}),o&&n&&"email"===n&&this.setState({shouldTooltipOpen:!0})}},{key:"componentDidUpdate",value:function(){this.state.gainFocus&&this.focusInput()}},{key:"focusInput",value:function(){this._input&&this._input.focus(),this._gestaltInput&&this._gestaltInput.textfield&&this._gestaltInput.textfield.focus()}},{key:"renderVanillaTextInputField",value:function(e,t){var o=this;return r.a.createElement("div",null,r.a.createElement("input",{"aria-label":this.props.accessibilityLabel||this.props.placeholder,autoComplete:this.props.autoComplete,className:e,name:this.props.name,onBlur:this.props.onBlur,onFocus:this.props.onFocus,onChange:this.props.onChange,onClick:this.props.onClick,placeholder:this.props.placeholder,ref:function(e){o._input=e,o.props.inputRef&&o.props.inputRef(e)},style:t,type:this.props.type,value:this.props.value}),this.renderErrorIcon(this.props.hasError),this.renderTooltip(this.props.tooltip,this.props.hasError))}},{key:"render",value:function(){var e=y.input;this.props.inputStyleOverrides&&(e=d({},e,this.props.inputStyleOverrides));var t=y.fieldset;this.props.fieldsetStyleOverrides&&(t=d({},t,this.props.fieldsetStyleOverrides));var o="";return"gray"===this.props.placeholderColor?o="UnauthTextInputField__gray":"darkGray"===this.props.placeholderColor&&(o="UnauthTextInputField__darkGray"),r.a.createElement("fieldset",{className:this.props.classNames,style:t},this.props.inputFieldTitle?r.a.createElement("div",{style:y.fieldTitle},this.props.inputFieldTitle):null,this.props.useGestalt?this.renderGestaltInputField():this.renderVanillaTextInputField(o,e))}}])&&g(o.prototype,c),_&&g(o,_),t}();_.defaultProps={autoComplete:"on",hasError:!1},t.a=_},m3Ge:function(e,t,o){"use strict";o.d(t,"a",function(){return r});var n=o("ggpB"),r=function(e,t,o){Object(n.c)("unauth.magic_link_login.".concat(e),{has_email_data:!!t,has_password_data:!!o})}},tQ9o:function(e,t,o){"use strict";o.d(t,"a",function(){return u});var n=o("GyhR"),r=o.n(n),a=o("hvnN"),i=o.n(a);function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){l(e,t,o[t])})}return e}function l(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var c={invisibleWrapper:{top:"0px",width:"215px"},message:{background:"#fff",borderRadius:"6px",WebkitBoxShadow:"0 0 2px rgba(0,0,0,0.38),0 1px 3px rgba(0,0,0,0.32)",boxShadow:"0 0 2px rgba(0,0,0,0.38),0 1px 3px rgba(0,0,0,0.32)",color:"#000",fontStyle:"normal",fontWeight:"normal",lineHeight:"150%",padding:"8px 14px",textAlign:"left",maxWidth:"215px",display:"inline-block",float:"left"},suggestionTooltipMessage:{boxShadow:"none",background:"#E2780D",color:"#fff",fontSize:"14px",WebkitBoxShadow:"none"},text:{overflowWrap:"break-word",wordWrap:"break-word"}};function u(e,t){var o="Tooltip_wrapper",n="Tooltip_message";e.isSuggestionTooltip&&(n="Tooltip_suggestionMessage"),t.userAgent.isMobile&&(o="Tooltip_mobileWrapper",n="Tooltip_mobileMessage");var a=s({},c.invisibleWrapper,e.customWrapperStyles),i=e.isSuggestionTooltip?s({},c.message,c.suggestionTooltipMessage):c.message;return r.a.createElement("div",{className:o,"data-test-id":"tooltip",style:a},r.a.createElement("div",{className:n,style:i},e.children?r.a.createElement("span",{style:c.text},e.children):r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.message},style:c.text})),r.a.createElement("div",null))}u.contextTypes={message:i.a.string,userAgent:i.a.shape({isMobile:i.a.bool.isRequired}).isRequired}},wFAD:function(e,t,o){"use strict";var n=o("GyhR"),r=o("5dtr"),a=o("+aUF"),i=["gmail.com","hotmail.com","hotmail.com.ar","yahoo.com.ar","live.com.ar","outlook.com","live.com","bigpond.com","yahoo.com","icloud.com","yahoo.com.au","yahoo.com.br","bol.com.br","yahoo.ca","hotmail.ca","web.de","gmx.de","t-online.de","hotmail.de","hotmail.es","yahoo.es","hotmail.fr","orange.fr","yahoo.fr","live.fr","free.fr","laposte.net","wanadoo.fr","outlook.fr","hotmail.co.uk","rediffmail.com","yahoo.co.in","yahoo.in","libero.it","hotmail.it","alice.it","yahoo.co.jp","ezweb.ne.jp","docomo.ne.jp","i.softbank.jp","softbank.ne.jp","live.com.mx","outlook.es","aol.com","outlook.com","comcast.net"],s=o("Qo1m"),l=o("plGG"),c=function(e,t){var o=t.split("@");if(0===e.length)return o[1].length;if(0===o[1].length)return e.length;var n,r,a=[];for(n=0;n<=o[1].length;n+=1)a[n]=[n];for(r=0;r<=e.length;r+=1)a[0][r]=r;for(n=1;n<=o[1].length;n+=1)for(r=1;r<=e.length;r+=1)o[1].charAt(n-1)===e.charAt(r-1)?a[n][r]=a[n-1][r-1]:a[n][r]=Math.min(a[n-1][r-1]+1,Math.min(a[n][r-1]+1,a[n-1][r]+1));return a[o[1].length][e.length]},u=function(){return"\n@keyframes onAutoFillStart{\n  from {}\n  to {}\n}\n\ninput:-webkit-autofill {\n  animation-name: onAutoFillStart;\n  animation-duration: 50000s;\n  transition: background-color 50000s;\n}"},p=o("ePT2"),d=o("jDCj"),g=o("ggpB"),f=o("9Y9K"),h=o("Irlq"),b=o("k9eC"),m=o("m3Ge"),y=o("cEhz"),_=o("+U6O");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){x(e,t,o[t])})}return e}function E(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var C={captcha:{marginTop:"16px",transform:"scale(0.88)",transformOrigin:"0 0"},signupButton:{width:"100%"},wrapperVisible:{WebkitTransition:"opacity 0.5s linear",transition:"opacity 0.5s linear",display:"flex",opacity:1,alignItems:"center",justifyContent:"space-between",height:"100%"},wrapperHidden:{WebkitTransition:"opacity 0.5s linear",transition:"opacity 0.5s linear",pointerEvents:"none",display:"none",opacity:0}},R=function(e){function t(){var e,o,r,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];return r=this,l=(e=O(t)).call.apply(e,[this].concat(p)),o=!l||"object"!==w(l)&&"function"!=typeof l?k(r):l,x(k(k(o)),"state",{domainError:"",newEmail:"",showAgeInput:o.props.showAgeInput}),x(k(k(o)),"inSuggestStrongPasswordExperiment",function(){var e=o.props,t=e.isSignupForm,n=e.requestContext,r=e.seoUnauthExperiments;return t&&n&&n.userAgent&&"Chrome"===n.userAgent.browserName&&(r.v2ActivateExperiment("unauth_web_suggest_strong_password")||"").startsWith("enabled")}),x(k(k(o)),"onAnimationStart",function(e){"onAutoFillStart"===e.animationName&&Object(g.a)("unauth_web.signup.password.autofill")}),x(k(k(o)),"updateEmail",function(){o.state.newEmail&&(o.props.onEmailChange({target:{value:o.state.newEmail}}),Object(g.a)("unauth.email_domain_typo_suggestion.clicked"))}),x(k(k(o)),"inHideAgeInputExistingEmailWithCopyExp",function(){return new b.a(o.props.requestContext,"web_unauth_hide_age_existing_email_v2").check("enabled_with_copy")}),x(k(k(o)),"handleEmailBlur",function(){var e=o.props,t=e.checkEmailExistsWithCompletion,r=e.email,a=e.inHideAgeInputExistingEmailExp,l=e.onEmailBlur,u=e.setWelcomeBackMessageForExistingEmail;l&&l(),r&&r.length>0&&a&&t&&t(r,function(){o.setState({showAgeInput:!1}),o.inHideAgeInputExistingEmailWithCopyExp()&&u&&u(!0)},function(){o.setState({showAgeInput:!0}),o.inHideAgeInputExistingEmailWithCopyExp()&&u&&u(!1)});var p=r&&-1!==r.indexOf("@")?r.split("@"):[];if(r&&r!==o.state.newEmail||o.setState({domainError:""}),r&&p&&r.length<60){var d=p[1]&&i.includes(p[1])?null:p[1]&&i.map(function(e){var t=c(e,r);return 2===t||1===t?e:null}).filter(function(e){return"string"==typeof e});if(d&&d.length){var f=d[0]?"".concat(p[0],"@").concat(d[0]):"",b=Object(h.b)(s.a._("Did you mean {{ newEmail }}?"),{newEmail:n.createElement(_.K,{bold:!0,inline:!0,color:"orange",size:"sm",key:"err_text"},f)});o.setState({domainError:b,newEmail:f}),r===f?o.setState({domainError:""}):Object(g.a)("unauth.email_domain_typo_suggestion.shown")}}}),x(k(k(o)),"renderDefaultLoginButton",function(e,t){var r=o.props,i=r.email,s=r.buttonText,l=r.buttonTextLabel,c=r.password;return n.createElement("div",{"data-test-id":"registerFormSubmitButton",onClick:t?function(){return Object(m.a)("login_click_".concat(e?"disabled":"enabled"),i,c)}:function(){}},n.createElement(a.a,{accessibilityLabel:l,className:"red SignupButton",disabled:e,styleOverrides:C.signupButton,type:"submit"},n.createElement("div",null,s)))}),x(k(k(o)),"renderMagicLinkButton",function(e){var t=o.props,r=t.buttonTextLabel,i=t.email,l=t.handleMagicLinkClick,c=t.magicLinkLoading,u=t.password;return n.createElement("div",{onClick:function(){return Object(m.a)("passwordless_click_".concat(e?"disabled":"enabled"),i,u)}},n.createElement(a.a,{accessibilityLabel:r,className:"red SignupButton",disabled:e,loading:c,styleOverrides:C.signupButton,onClick:l},n.createElement(_.b,null,s.a._("Log in without password","text on button allowing users to get an email to login"))))}),o}var o,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,n["Component"]),o=t,f=[{key:"getDerivedStateFromProps",value:function(e,t){return e.email===t.newEmail?{domainError:"",newEmail:""}:null}}],(r=[{key:"componentDidMount",value:function(){if(this.inSuggestStrongPasswordExperiment()){var e=document.querySelector('input[type="password"]');e&&e.addEventListener("animationstart",this.onAnimationStart,!1)}}},{key:"componentWillUnmount",value:function(){this.inSuggestStrongPasswordExperiment()&&document.removeEventListener("animationstart",this.onAnimationStart)}},{key:"doesEmailExist",value:function(e){p.a.create("EmailExistsResource",{email:e}).callGet({showError:!1})}},{key:"renderLoginButtons",value:function(){var e=this.props,t=e.email,o=e.magicLinkGroup,r=this.props.disableEmailLogin||!1,a=""!==this.props.password,i=this.renderDefaultLoginButton(r||!a,!0),s=this.renderMagicLinkButton(a||""===t);return o&&o.startsWith("enabled_login_primary")?n.createElement(_.b,null,i,s):o&&o.startsWith("enabled_magic_link_primary")?n.createElement(_.b,null,s,i):o&&o.startsWith("enabled_inactive_login")?i:this.renderDefaultLoginButton(r)}},{key:"render",value:function(){var e=this.props,t=e.age,o=e.ageValidationError,r=e.disableEmailLogin,a=e.email,i=e.emailLabel,c=e.emailText,p=e.emailValidationError,g=e.hideEmailField,f=e.hideFacebookButton,h=e.hideGoogleButton,b=e.hidePasswordField,m=e.inputStyleOverrides,y=e.onAgeBlur,w=e.onAgeChange,E=e.onButtonClick,O=e.onEmailChange,S=e.onPasswordChange,k=e.password,x=e.passwordFieldVisible,R=e.passwordText,L=e.passwordValidationError,P=e.renderPasswordResetLink,T=e.suppressFocus,j=C.wrapperVisible;!1===x&&(j=C.wrapperHidden);var A=p;return A||!b&&!r||(f||h?!f&&h?A=s.a._("Your account is connected to Facebook - use the Facebook button to log in","Customized desktop login for users with Facebook"):f&&!h&&(A=s.a._("Your account is connected to Google - use the Google button to log in","Customized desktop login for users with Google")):A=s.a._("Your account is connected to Facebook and Google - use the buttons to log in","Customized desktop login for users with FB and Google")),n.createElement("form",{"data-test-id":"registerForm",method:"POST",noValidate:!0,onSubmit:function(e){e.preventDefault(),E(e)}},!g&&n.createElement(_.b,{"data-test-id":"emailInputField"},n.createElement(d.a,{accessibilityLabel:i,autoComplete:"username",fieldsetStyleOverrides:{marginBottom:"7px"},focused:!T,hasError:!!p,domainError:this.state.domainError,id:"email",inputStyleOverrides:m,name:"id",onBlur:this.handleEmailBlur,onChange:O,placeholder:c,tooltip:A,type:"email",value:a,updateEmail:this.state.domainError?this.updateEmail:null,useExperimentalTextfield:!0,useGestalt:!0})),!b&&n.createElement(n.Fragment,null,this.inSuggestStrongPasswordExperiment()&&n.createElement(l.a,{unsafeCSS:u()}),n.createElement(_.b,{"data-test-id":"passwordInputField"},n.createElement(d.a,{autoComplete:this.inSuggestStrongPasswordExperiment()?"new-password":"current-password",disabled:r,hasError:!!L,id:"password",inputStyleOverrides:v({},m,j),name:"password",onChange:S,placeholder:R,tooltip:L,type:"password",value:k,useExperimentalTextfield:!this.inSuggestStrongPasswordExperiment(),useGestalt:!0})),P?P():null),!b&&this.state.showAgeInput?n.createElement(_.b,{"data-test-id":"ageInputField"},n.createElement(d.a,{accessibilityLabel:"age",autoComplete:"off",dataTestId:"ageInputField",fieldsetStyleOverrides:{marginTop:"7px"},hasError:!!o,id:"age",inputStyleOverrides:v({},m),name:"age",onBlur:y,onChange:w,placeholder:s.a._("Age"),tooltip:o,type:"text",value:t,useExperimentalTextfield:!0,useGestalt:!0})):null,window.recaptchaCount>0?n.createElement("div",{id:"recaptcha_placeholder_".concat(window.recaptchaCount),className:"g-recaptcha",style:C.captcha}):null,!b&&this.renderLoginButtons())}}])&&E(o.prototype,r),f&&E(o,f),t}();t.a=Object(f.compose)(r.b,y.b)(R)}}]);