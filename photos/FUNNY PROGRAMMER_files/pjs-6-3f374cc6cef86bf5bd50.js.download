(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[6],{"0Oe5":function(e,t,n){"use strict";var o=n("GyhR"),i=n.n(o),a=n("wCwO"),r=n("Qo1m"),s=n("+U6O");t.a=function(){return i.a.createElement(s.b,{alignItems:"center",display:"flex",justifyContent:"center",position:"absolute",width:"100%",height:"100%"},i.a.createElement(s.b,{color:"white",height:600,minWidth:"500px",shape:"rounded",width:"30%"},i.a.createElement(s.b,{alignItems:"center",direction:"column",display:"flex",height:"99%",justifyContent:"center",padding:12},i.a.createElement(s.b,{alignItems:"center",color:"red",display:"flex",height:60,justifyContent:"center",marginBottom:4,shape:"circle",width:60},i.a.createElement(s.n,{accessibilityLabel:r.a._("Loading state for google one tap registration"),color:"white",icon:"pin",size:"28"})),i.a.createElement(s.b,{alignItems:"center",paddingY:5,dangerouslySetInlineStyle:{__style:{"text-align":"center"}}},i.a.createElement(s.m,{size:"sm"},r.a._("Welcome to Pinterest!","Welcome to Pinterest!"))),i.a.createElement(s.K,{size:"xl",align:"center",overflow:"normal"},r.a._("Your answers to the next questions will help us find the right ideas for you","loading state description while waiting for google one tap registration to complete"))),i.a.createElement(a.a,{duration:6e3,finalProgress:95})))}},"4RNB":function(e,t,n){"use strict";var o=n("GyhR"),i=n.n(o),a=n("5dtr"),r=n("D+W/"),s=n("Qo1m"),l=n("i7XF"),u=n("QtSf"),c=n("+U6O"),p=function(e){var t=e.age,n=e.error,o=e.handleAgeChange,a=e.handleSubmit,r=e.inputRef;return i.a.createElement(c.b,null,i.a.createElement("form",{method:"post",noValidate:!0,onSubmit:function(e){e.preventDefault(),a()}},i.a.createElement(c.b,null,i.a.createElement(c.K,{align:"left"},s.a._("How old are you?","Title for the age collection input field after connecting with Facebook or Google"))),i.a.createElement(c.b,{marginTop:2}),i.a.createElement(c.b,null,i.a.createElement(c.M,{id:"age",errorMessage:n||"",onChange:o,placeholder:s.a._("Age","text field for user to enter their age"),ref:function(e){r&&r(e)},type:"number"})),i.a.createElement(c.b,{marginTop:3}),i.a.createElement(c.b,null,i.a.createElement(c.c,{color:"red",disabled:!t,text:s.a._("Continue"),type:"submit"}))))},d=n("ggpB"),g=n("7M64"),h=n("2Npu"),m=n("ovu7"),f=n("9Y9K"),b=n("k9eC"),y=n("2rhI");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){O(e,t,n[t])})}return e}function w(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C={container:{margin:"0 auto",width:"268px"}},k=function(e){function t(){var e,n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];return o=this,i=(e=E(t)).call.apply(e,[this].concat(u)),n=!i||"object"!==v(i)&&"function"!=typeof i?x(o):i,O(x(x(n)),"state",{age:"",error:""}),O(x(x(n)),"getViewParameter",function(e){return e.type===y.a.FACEBOOK?3205:e.type===y.a.GOOGLE?3204:e.type===y.a.GOOGLE_ONE_TAP?3201:void 0}),O(x(x(n)),"handleAgeChange",function(e){var t=e.value;n.setState({age:t})}),O(x(x(n)),"handleSignupSuccess",function(){n.track("signup_success"),n.props.contextLog(7487,{viewParameter:n.getViewParameter(n.props.registrationCredentials)});var e=n.props.showResponseMessageModal;e?e(!0):l.b.handleSignupRedirect(n.props.nextUrlParam||window.location.pathname,!0)}),O(x(x(n)),"handleSignupFailure",function(e){n.track("signup_failure"),n.props.loadingIndicatorCallback&&n.props.loadingIndicatorCallback(!1),n.props.showSignupWelcomeLoadingFn&&n.props.showSignupWelcomeLoadingFn(!1),n.props.contextLog(7488,{viewParameter:n.getViewParameter(n.props.registrationCredentials)});var t=e.message||s.a._("Oops! Something went wrongâ€¦ Click Continue to try again.","Error during signup during age collection step");e.api_error_code===r.a.API_ERROR_UNDERAGE_REGISTER_ATTEMPT&&(t=s.a._("Uh oh... it looks like youâ€™re not old enough just yet.","Underage error during signup")),n.setState({error:t})}),O(x(x(n)),"handleSubmit",function(){var e=n.state.age;n.track("submit_button_click.".concat(e||"undefined"));var t=n.props,o=t.contextLog,i=t.loadingIndicatorCallback,a=t.registrationCredentials,r=t.requestContext,s=t.showSignupWelcomeLoadingFn,l=t.showResponseMessageModal,u=n.validateAge(e||"");if(u)n.setState({error:u});else{var c;n.setState({error:""}),a.type===y.a.GOOGLE_ONE_TAP?c="web_unauth_google_one_tap_welcome":a.type===y.a.GOOGLE?c="web_unauth_gplus_welcome_v2":a.type===y.a.FACEBOOK&&(c="web_unauth_fb_welcome_v2");var p=!1;if(c?(p=new b.c(r,c).enabled(),r.experiments._queuedResource&&r.experiments._queuedResource.flush()):i&&i(!0),o(7537,{viewParameter:n.getViewParameter(a)}),a.type===y.a.FACEBOOK){n.track("attempt_signup");var d=S({},g.a.buildFacebookRegistrationResourceOptions(a.userData),a.credentialsAndLoggingData,{age:e});g.a.register(d).then(n.handleSignupSuccess,n.handleSignupFailure)}else a.type!==y.a.GOOGLE&&a.type!==y.a.GOOGLE_ONE_TAP||(n.track("attempt_signup"),g.a.register(S({},a.credentialsAndLoggingData,{age:e})).then(n.handleSignupSuccess,n.handleSignupFailure));!l&&s&&p&&s(!0)}}),n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,o["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){this.track("shown"),this.focusInputField()}},{key:"track",value:function(e){var t=this.props,n=t.container,o=t.registrationCredentials,i=o?o.type:"undefined";Object(d.a)("unauth_web.age_collection_form.".concat(e,".").concat(i,".").concat(n))}},{key:"focusInputField",value:function(){this.inputRef&&this.inputRef.textfield&&this.inputRef.textfield.focus()}},{key:"validateAge",value:function(e){return Object(u.a)(e,[Object(m.a)({message:s.a._("Please enter a valid number.")})])}},{key:"render",value:function(){var e=this,t=this.state,n=t.age,o=t.error;return i.a.createElement("div",{style:C.container},i.a.createElement(p,{age:n,error:o,handleAgeChange:this.handleAgeChange,handleSubmit:this.handleSubmit,inputRef:function(t){e.inputRef=t}}))}}])&&w(n.prototype,a),c&&w(n,c),t}();O(k,"defaultProps",{container:"undefined"});t.a=Object(f.compose)(a.b,h.a)(k)},"4iIQ":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"e",function(){return r}),n.d(t,"d",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"j",function(){return u}),n.d(t,"h",function(){return c}),n.d(t,"g",function(){return p}),n.d(t,"f",function(){return d}),n.d(t,"i",function(){return g}),n.d(t,"a",function(){return h}),n.d(t,"k",function(){return m});var o=n("TLUQ"),i=n("2cJX"),a=670,r=460,s=560,l=3,u=708,c=398,p=480,d=6,g=500,h=1150,m=800;t.l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5?arguments[5]:void 0;if(n===o.a.PIN&&r===i.a.tier1&&!s){var l=e.v2GetGroup("web_unauth_plp_education_video")||"",u=t[1000150]&&501018===t[1000150].experience_id;if(a&&u&&l&&l.startsWith("enabled_modal"))return!0;if(!a&&u&&l&&l.startsWith("enabled_in_feed"))return!0}return!1}},"9Fbe":function(e,t,n){"use strict";var o=n("GyhR"),i=n.n(o);t.a=function(e,t,n){var o,a,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s="M27.5 71c3.3 1 6.7 1.6 10.3 1.6C57 72.6 72.6 57 72.6 37.8 72.6 18.6 57 3 37.8 3 18.6 3 3 18.6 3 37.8c0 14.8 9.3 27.5 22.4 32.5-.3-2.7-.6-7.2 0-10.3l4-17.2s-1-2-1-5.2c0-4.8 3-8.4 6.4-8.4 3 0 4.4 2.2 4.4 5 0 3-2 7.3-3 11.4C35.6 49 38 52 41.5 52c6.2 0 11-6.6 11-16 0-8.3-6-14-14.6-14-9.8 0-15.6 7.3-15.6 15 0 3 1 6 2.6 8 .3.2.3.5.2 1l-1 3.8c0 .6-.4.8-1 .4-4.4-2-7-8.3-7-13.4 0-11 7.8-21 22.8-21 12 0 21.3 8.6 21.3 20 0 12-7.4 21.6-18 21.6-3.4 0-6.7-1.8-7.8-4L32 61.7c-.8 3-3 7-4.5 9.4z",l=i.a.createElement("circle",{cx:"38",cy:"38",fill:"white",r:"40"});return o=t?"-3 -3 82 82":"3 3 70 70",a=n||"#e60023",r?i.a.createElement("svg",{height:e,viewBox:o,width:e},t?l:null,i.a.createElement("path",{d:s,fill:a,fillRule:"evenodd"})):i.a.createElement("svg",{height:e,style:{display:"block"},viewBox:o,width:e},t?l:null,i.a.createElement("path",{d:s,fill:a,fillRule:"evenodd"}))}},Aizh:function(e,t,n){"use strict";var o=n("GyhR"),i=(n("vG9Z"),n("hvnN")),a=n.n(i);a.a.shape({v2GetGroup:a.a.func.isRequired,v2ActivateExperiment:a.a.func.isRequired}).isRequired;t.a=function(e){var t=function(t,n){return o.createElement(e,Object.assign({seoExperiments:n.seoExperiments},t))};return t.displayName="WithSeoExperiments(".concat(e.displayName||e.name,")"),t.contextTypes={seoExperiments:a.a.shape({v2GetGroup:a.a.func.isRequired,v2ActivateExperiment:a.a.func.isRequired}).isRequired},t}},Ii6Q:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l});var o=n("ePT2"),i=n("7m1P");function a(e,t){return o.a.create("UserFollowResource",{user_id:e,aux_data:t?{pin_id:t}:void 0})}function r(e,t){return{type:i.a.USER_FOLLOW,payload:{id:e,value:t}}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){a(e,t).callCreate().catch(function(){return n(r(e,!1))}),n(r(e,!0))}}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){a(e,t).callDelete().catch(function(){return n(r(e,!0))}),n(r(e,!1))}}},JpAB:function(e,t,n){"use strict";n.r(t),function(e){var o=n("GyhR"),i=n.n(o),a=n("Ivf5"),r=n("VSY/"),s=n("5dtr"),l=n("+aUF"),u=n("D+W/"),c=n("iz36"),p=n("vG9Z"),d=n("1JxL"),g=n("Qo1m"),h=n("T/Yn"),m=n("V0Gb"),f=n("bvxc"),b=n("O9k4"),y=n("9Fbe"),v=n("ocVj"),S=n("hvnN"),w=n.n(S),E=n("BbB1"),_=n("yiER"),x=n("MJXA"),O=n("tAeg"),C=n("0Oe5"),k=n("4RNB"),L=n("q579"),P=n("Aizh"),T=n("cEhz"),R=n("9Y9K"),M=n.n(R),A=n("UnnU"),j=n("4+0X"),F=n("Irlq"),B=n("k9eC"),I=n("m3Ge"),W=n("rlRx"),V=n("4iIQ"),N=n("ggpB"),U=n("2Npu"),D=n("73jm"),G=n("+U6O"),q=n("1eSR");function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){te(e,t,n[t])})}return e}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function K(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),e}function J(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?ee(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=Object(h.a)({chunkName:function(){return"app-common-react-components-growth-unauth-Video-UnauthVideo"},isReady:function(e){return!!n.m[this.resolve(e)]},requireAsync:function(){return n.e("app-common-react-components-growth-unauth-Video-UnauthVideo").then(n.bind(null,"eJa8"))},requireSync:function e(t){var o=this.resolve(t);return n(o)},resolve:function(){return"eJa8"}}),oe=u.a.GEN.templateConst.settings.PARTNER_SITE_SIGNUP,ie={signup:{backgroundColor:"#fff",borderRadius:"8px",position:"relative",textAlign:"center",width:"404px",margin:"auto",minHeight:"450px",boxShadow:"0 2px 10px rgba(0,0,0,0.45)"},signupMobile:{backgroundColor:"#fff",position:"absolute",left:"0",right:"0",top:"0",minHeight:"100vh",textAlign:"center"},signupModal:{textAlign:"center"},signupForm:{minHeight:"400px",padding:"20px 10px"},signupInviteForm:{minHeight:"400px",padding:"30px 10px 20px"},signupTitleContainer:{margin:"0 auto 25px",width:"270px"},signupTitleMfaContainer:{padding:"0 10px"},signupTitle:{color:"#333",fontSize:"32px",fontWeight:"bold",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",letterSpacing:"-1.2px"},haveAccountText:{display:"inline-block",marginRight:"4px"},logoContainer:{display:"block",height:"45px",margin:"5px auto",width:"45px"},pinterestLogo:{textAlign:"center",paddingTop:"20px",display:"inline-block"},inputFields:{backgroundColor:"#f0f0f0",border:"0px",outline:"none"},separator:{borderBottom:"#efefef 1px solid",margin:"20px 0px 15px -68px",width:"404px"},signupLoginToggle:{color:"#333",fontSize:"14px",fontWeight:"normal",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},profilePic:{margin:"0 auto 16px",width:"108px"},personalizedModalContainer:{backgroundColor:"#fff",borderRadius:"8px",padding:"22px 0",position:"relative",textAlign:"center",width:"400px",margin:"auto",boxShadow:"0 2px 10px rgba(0,0,0,0.45)"},closeButton:{backgroundColor:"transparent",backgroundRepeat:"no-repeat",border:"none",outline:"none",overflow:"hidden",padding:"10px",position:"absolute",right:"10px",top:"10px"},notNowButton:{border:"none",color:"#717171",fontWeight:"bold",textDecoration:"none",backgroundColor:"#eee",height:"36px",borderRadius:"5px",fontSize:"16px",width:"268px",marginTop:"10px"},onClickEmailConfirmationButton:{width:"270px",marginTop:"40px"},signupSubtitles:{textAlign:"center",color:"#333",fontSize:"16px",fontWeight:"normal",margin:"-15px 0 20px"},businessHeader:{float:"left",color:"#333",fontSize:"14px",fontWeight:"normal",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},businessLink:{cursor:"pointer",marginLeft:"5px",float:"left"},businessContainer:{margin:"10px auto 5px",display:"flex",alignItems:"baseline",width:"fit-content"},closeButtonStyle:{position:"absolute",right:"10px",paddingTop:"10px",zIndex:"1"}},ae=function(e){function t(e){var n;Q(this,t),te(ee(ee(n=J(this,X(t).call(this,e)))),"getSignupTitleStyles",function(){var e=n.props.darkSignupTitle,t=ie.signupTitle;return e&&(t=H({},t,{color:"#000"})),t}),te(ee(ee(n)),"getSignupBoxStyle",function(){return"home_page"===n.props.container?H({},ie.signup,{minHeight:"initial"}):ie.signup}),te(ee(ee(n)),"showAdditionalStep",function(e){return function(t,o,i){n.setState({type:e,socialRegistrationCredentials:{type:t,userData:o,credentialsAndLoggingData:i}})}}),te(ee(ee(n)),"getLunchTextString",function(e,t,n){var o;return(e=e||"").startsWith("enabled_morning")&&(o=t&&n?g.a._("Log in to make your lunch hour more enjoyable","Short subtitle on a time-specific log in prompt that will be shown to users between the hours of 11am and 1pm. The title being shown is 'Long morning?'"):t||n?g.a._("Long morning?","Short title on a time-specific sign up or log in prompt (ideally phrased as a question if possible) that will be shown to users between the hours of 11am and 1pm."):g.a._("Sign up to make your lunch hour more enjoyable","Short subtitle on a time-specific sign up prompt that will be shown to users between the hours of 11am and 1pm. The title being shown is 'Long morning?'")),e.startsWith("enabled_dream")&&(o=t&&n?g.a._("Log in to help pass the time","Short subtitle on a time-specific log in prompt that will be shown to users between the hours of 11am and 1pm. The title being shown is 'Can't wait for lunch?'"):t||n?g.a._("Dreaming of lunch? ðŸ•","Short title on a time-specific sign up or log in prompt (ideally phrased as a question if possible) that will be shown to users between the hours of 11am and 1pm. Feel free to change the emoji too."):g.a._("Sign up for free to help pass the time","Short subtitle on a time-specific sign up prompt that will be shown to users between the hours of 11am and 1pm. The title being shown is 'Can't wait for lunch?'")),e.startsWith("enabled_wait")&&(o=t&&n?g.a._("Log in to help pass the time","Short subtitle on a time-specific log in prompt that will be shown to users between the hours of 11am and 1pm. The title being shown is 'Can't wait for lunch?'"):t||n?g.a._("Can't wait for lunch?","Short title on a time-specific sign up or log in prompt (ideally phrased as a question if possible) that will be shown to users between the hours of 11am and 1pm."):g.a._("Sign up for free to help pass the time","Short subtitle on a time-specific sign up prompt that will be shown to users between the hours of 11am and 1pm. The title being shown is 'Can't wait for lunch?'")),o}),te(ee(ee(n)),"inHomePageTitleExp",function(){return(n.props.seoUnauthExperiments.v2ActivateExperiment("web_unauth_homepage_title")||"").startsWith("enabled")}),te(ee(ee(n)),"tagline",function(e,t,o){var i,a=g.a._("Sign up to see more","sigup copy default includes pin click and scrolling"),r={defaultSource:a,boardInvite:g.a._("Sign up to accept your board invite","Sign up copy board invite"),userFollow:g.a._("Sign up to see more of this profile","signup copy user follow"),userProfilePage:g.a._("Sign up to see more of this profile","signup copy profile page"),saveButton:g.a._("Sign up to see more","signup copy save button"),signupButton:g.a._("Sign up to see more","signup copy signup button"),homePage:a,login:a,loginMfa:a,actionButton:a,boardPage:a,giftWrap:a,invite:a,mwebDefaultSource:a,navigateBoard:a,navigateInterest:a,navigatePin:a,personalizedFlyout:a,unauthBanner:a,unauthHeader:a},s=g.a._("Log in to see more","Title on desktop login modal"),l={boardInvite:g.a._("Log in to accept your board invite","Login copy board invite"),invite:g.a._("Log in to invite friends"),login:s,saveButton:g.a._("Log in to see more","Title on desktop login modal"),homePage:s,defaultSource:s,loginMfa:s,actionButton:s,boardPage:s,giftWrap:s,mwebDefaultSource:s,navigateBoard:s,navigateInterest:s,navigatePin:s,personalizedFlyout:s,signupButton:s,unauthBanner:s,userFollow:s,userProfilePage:s,unauthHeader:s},u={login:g.a._("Two-Factor Authentication Required")};return i=e===D.b.signup||e===D.b.signupOrPersonalizedLogin?r[t]:e===D.b.loginMfa?u[D.a.login]:l[t],t===D.a.homePage&&n.inHomePageTitleExp()&&(i=g.a._("Welcome to Pinterest","Title on desktop signup modal on home page")),i}),te(ee(ee(n)),"valuePropAsSubtitle",function(e){return e===D.a.homePage&&n.inHomePageTitleExp()?g.a._("Find new ideas to try","Value prop on desktop signup modal on home page"):g.a._("Access Pinterest's best ideas with a free account","Pinterest value proposition on desktop login modal")}),te(ee(ee(n)),"valuePropAsTitle",function(){return g.a._("Access our best ideas with a free account","Value prop on desktop signup modal")}),te(ee(ee(n)),"switchToSignup",function(){n.context.userAgent.isMobile||n.setNameFromEmail(),n.setModalType(D.b.signup)}),te(ee(ee(n)),"toggleMagicLinkConfirmation",function(e){n.setState({type:e?D.b.magicLinkConfirmation:D.b.login})}),te(ee(ee(n)),"clearPassword",function(){n.setState({password:""})}),te(ee(ee(n)),"handleCloseButtonClick",function(e){n.trackScopedAction("y_button_click"),n.props.handleCloseClick&&n.props.handleCloseClick(e)}),te(ee(ee(n)),"handlePreventRegisterFromPersonalizedModal",function(e){Object(N.a)("unauth.personalized_login.prevent_register.".concat(e)),n.setState({headerStyle:"default",isPersonalizedModal:!1,isLoading:!1}),n.switchToSignup()}),te(ee(ee(n)),"handleNotYouClick",function(e){var t=n.props,o=t.contextLog,i=t.viewer;e.event.preventDefault(),n.setState({headerStyle:"default",isPersonalizedModal:!1,password:""}),Object(N.a)("unauth.personalized_login.not_you.click"),i.isAuth?o(101,{element:10879,login_state:i.isLimitedLogin?2:1}):o(101,{element:10879})}),te(ee(ee(n)),"handleNotNowButtonClick",function(e){n.trackScopedAction("not_now_button_click"),n.props.handleCloseClick&&n.props.handleCloseClick(e)}),te(ee(ee(n)),"toggleLoadingIndicator",function(e){n.setState({isLoading:e})}),te(ee(ee(n)),"handleLoginToggleButtonClick",function(e){var t=n.props.handleModalTypeSwitch;n.trackScopedAction("login_toggle_click"),t&&t(),n.setModalType(D.b.login,e),n.setWelcomeBackMessageForExistingEmail(!1)}),te(ee(ee(n)),"handleSignupToggleButtonClick",function(e){var t=n.props,o=t.handleModalTypeSwitch,i=t.seoUnauthExperiments,a=t.pageType,r=t.hybridTier,s=t.requestContext,l=t.eligibleExperiences;n.trackScopedAction("signup_toggle_click"),o&&o(),n.setModalType(D.b.signup,e),Object(V.l)(i,l,a,!0,r,s.isBot)&&(n.state.type===D.b.login||n.state.type===D.b.signup)&&n.setState({isShowRegisterForm:!1})}),te(ee(ee(n)),"handleConfirmationPageButtonClick",function(e){n.setModalType(D.b.login,e)}),te(ee(ee(n)),"handleNotNowClick",function(e){n.setModalType(D.b.signup,e),n.toggleLoadingIndicator(!1)}),te(ee(ee(n)),"handleSignupToggleFromPersonalized",function(e){var t=n.props,o=t.contextLog,i=t.viewer;e.event.preventDefault(),Object(N.a)("unauth.personalized_login.signup_instead.click"),n.setState({password:""}),i.isAuth?o(101,{element:10880,login_state:i.isLimitedLogin?2:1}):o(101,{element:10880}),n.handleSignupToggleButtonClick(e)}),te(ee(ee(n)),"handlePostConnectClick",function(){Object(N.a)("unauth.fb_email_reauth.post_connect.click")}),te(ee(ee(n)),"handlePostSuccessConnect",function(){Object(N.a)("unauth.fb_email_reauth.post_success.connect")}),te(ee(ee(n)),"handleShowRegisterForm",function(){n.setState({isShowRegisterForm:!0})}),te(ee(ee(n)),"updateEmail",function(e){n.setState({email:e,clearError:!0})}),te(ee(ee(n)),"showSignupWelcomeLoadingFn",function(e){n.setState({showSignupWelcomeLoading:e}),n.props.handleShowingSignupWelcomeLoading&&n.props.handleShowingSignupWelcomeLoading(e)}),te(ee(ee(n)),"setWelcomeBackMessageForExistingEmail",function(e){n.setState({isExitingUserInSignup:e})}),te(ee(ee(n)),"renderModalHeader",function(e,t,a){var r=n.props,s=r.inviter,l=r.type;if(e){var u=s?s.first_name:"",c=s?s.image_medium_url:"",p=l===D.b.respondMessage,d=p?g.a._("Sign up and let {{ name }} know what you think","Prompt user to signup to access all Pinterest features").replace("{{ name }}",u):g.a._("Join {{ name }} on Pinterest for more ideas","Prompt user to signup to access all Pinterest features").replace("{{ name }}",u),h=n.getSignupTitleStyles();return i.a.createElement(o.Fragment,null,i.a.createElement("div",{style:ie.profilePic},i.a.createElement(G.a,{src:c,name:u,verified:p,icon:"pinterest"})),i.a.createElement("div",{style:a},i.a.createElement("h3",{style:h},d)))}return t});var a=L.a.getQueryStringParams();return n.state={clearError:!1,type:"signup"===a.type?D.b.signup:n.props.type,email:e.email||"",password:"",age:void 0,gender:"",mfaCode:"",mfaCreds:e.mfaCreds||null,mfaPhoneNumberEnd:"",name:"",isExitingUserInSignup:!1,isPersonalizedModal:null,isLoading:!1,socialRegistrationCredentials:n.props.socialRegistrationCredentials,step:"signup",showSignupWelcomeLoading:!1,isShowRegisterForm:!1},n}return Z(t,o["Component"]),K(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.AMPClientId,n=e.contextLog,o=e.userInfo,i=e.viewer;if(this.logModalShown(this.state.type),this.context.logging&&(i.isAuth?n(1771,{view:this.context.logging.viewType,viewParameter:this.context.logging.viewParameter,login_state:i.isLimitedLogin?2:1}):n(1771,{view:this.context.logging.viewType,viewParameter:this.context.logging.viewParameter})),t&&Object(N.c)("signup_page_from_amp",{amp_client_id:t}),i.isAuth&&i.isLimitedLogin){var a={connected_to_facebook:this.isLimitedLoginUserFBConnected(),connected_to_google:this.isLimitedLoginUserGplusConnected(),email:i.email,first_name:i.firstName,has_password:i.hasPassword,medium_image_url:i.imageMediumUrl};this.setPersonalizedModal(a)}else this.setPersonalizedModal(o)}},{key:"UNSAFE_componentWillUpdate",value:function(e,t){t.type!==this.state.type&&this.logModalShown(t.type)}},{key:"componentDidUpdate",value:function(e){this.props.userInfo!==e.userInfo&&this.setPersonalizedModal(this.props.userInfo),this.props.type!==e.type&&this.setState({type:this.props.type,email:this.props.email||"",password:"",age:void 0,gender:"",mfaCode:"",mfaCreds:this.props.mfaCreds||null,mfaPhoneNumberEnd:"",name:"",socialRegistrationCredentials:this.props.socialRegistrationCredentials})}},{key:"componentWillUnmount",value:function(){this.props.isAccountSwitch&&Object(W.h)("add_account_dismiss",null,this.props.container)}},{key:"getSignupStyles",value:function(){var e=this.context.userAgent.isMobile,t=this.props.modal,n=this.getSignupBoxStyle();return t?ie.signupModal:e?ie.signupMobile:n}},{key:"setModalType",value:function(e,t){this.setState({type:e})}},{key:"setNameFromEmail",value:function(){this.setState({name:Object(v.a)(this.state.email)})}},{key:"setPersonalizedModal",value:function(e){var t=this.props,n=t.signupSource,o=t.isAccountSwitch,i=t.requestContext,a=t.toggleModalType,r=this.state,s=r.isPersonalizedModal,l=r.type;o||e&&Object.keys(e).length>0&&!s&&(this.setState({isPersonalizedModal:!0,userInfo:e}),n===D.a.homePage&&l===D.b.signup&&a&&(new B.c(i,"web_unauth_default_login_if_personalized_login").enabled()&&a(),i.experiments._queuedResource&&i.experiments._queuedResource.flush()))}},{key:"logModalShown",value:function(e){Object(N.a)("unauth.authentication_modal.shown.".concat(this.props.toggleType,".").concat(e))}},{key:"trackScopedAction",value:function(e){Object(N.a)("unauth.authentication_modal.".concat(e,".").concat(this.props.toggleType,".").concat(this.state.type))}},{key:"handleDataChange",value:function(e,t){var n={};n[e]=t.target.value,this.setState(n)}},{key:"handleLoginWithMfa",value:function(e,t){var n={mfaCreds:e,mfaPhoneNumberEnd:void 0};t&&t.phone_number_end&&(n.mfaPhoneNumberEnd=t.phone_number_end),this.setState(n),this.setModalType(D.b.loginMfa)}},{key:"changeStep",value:function(e){this.setState({step:e})}},{key:"disableDenzelProfileHeader",value:function(){j.b.publish("profile","signupButtonClicked",{})}},{key:"isLimitedLoginUnidentifiedSignupMethod",value:function(){var e=this.props.viewer;return e.isAuth&&e.isLimitedLogin&&!(e.hasPassword||this.isLimitedLoginUserGplusConnected()||this.isLimitedLoginUserFBConnected())}},{key:"isLimitedLoginUserFBConnected",value:function(){var e=this.props.viewer;return e.socialNetwork&&e.socialNetwork.facebook&&e.socialNetwork.facebook.connected}},{key:"isLimitedLoginUserGplusConnected",value:function(){var e=this.props.viewer;return e.socialNetwork&&e.socialNetwork.gplus&&e.socialNetwork.gplus.connected}},{key:"renderModalSideImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,n=e||{},o=n.image_url,a={height:"100%",width:n.image_aspect_ratio*t,maxWidth:400,backgroundSize:"cover",backgroundPosition:"center",backgroundImage:"url(".concat(o,")")};return i.a.createElement("div",{style:{borderRadius:"8px 0 0 8px",overflow:"hidden"}},i.a.createElement("div",{style:a}))}},{key:"renderModalSideVideo",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=this.state,a=o.isShowRegisterForm,r=o.type,s=V.b;return r===D.b.login?s=V.d:r===D.b.signup&&(s=a?V.b:V.e),i.a.createElement(ne,{muted:!0,margin:V.c,video:{mp4:{url:e,thumbnail:t,duration:n,width:s,height:s}},view:this.context.logging.viewType,viewParameter:this.context.logging.viewParameter,componentLogging:13326,fallback:i.a.createElement("div",null)})}},{key:"renderLoadingIndicator",value:function(){return this.state.isLoading?i.a.createElement(m.a,null):null}},{key:"renderPersonalizedLogin",value:function(){var e,t=this,n=this.props,a=n.location,r=n.passwordValidationError,s=n.pins,l=n.requestContext,u=n.viewer,c=n.type,p=Object(q.a)(a.pathname,{path:"/pin/:id",exact:!0});if(u.isLimitedLogin&&p){var d=p.params.id,h=d&&s[d]&&s[d].images&&s[d].images["474x"];e=h&&{image_url:h.url,image_aspect_ratio:h.width/h.height||0}}var m=g.a._("Not you? Log in with a different account","Short message (in small fonts) on the bottom of the login modal that prompts a user to log in to a different account"),b=g.a._("Need an account? Sign up now","Short message (in small fonts) on the bottom of the login modal that prompts a users to create an account"),v=this.state.userInfo?this.state.userInfo.first_name:"",S=Object(F.b)(g.a._("Welcome back, {{name}}!","Short title (large font) on the login modal welcoming back a user who previously logged in to Pinterest"),{name:v}),w=u.isAuth&&u.isLimitedLogin&&!!new B.c(l,"web_limited_login_personalized_copy").enabledWithNoActivation(),_=Object(F.b)(g.a._("Hey {{name}}! Want to log back in?","Welcome back title text with {name} being user's name"),{name:v}),x=ie.logoContainer,O=H({},ie.signupTitleContainer,{width:"350px",overflow:"hidden",maxHeight:"120px"}),C=i.a.createElement(o.Fragment,null,this.renderLoadingIndicator(),i.a.createElement("div",{style:x},Object(y.a)(40,!0)),i.a.createElement("div",{style:O},i.a.createElement("h3",{style:this.getSignupTitleStyles()},w?_:S)),i.a.createElement("div",{style:ie.profilePic},i.a.createElement(G.a,{src:this.state.userInfo?this.state.userInfo.medium_image_url:"",name:this.state.userInfo?this.state.userInfo.first_name:""})),i.a.createElement(G.b,{marginBottom:3},i.a.createElement(G.K,{size:"md",align:"center"},this.state.userInfo?this.state.userInfo.email:null)),i.a.createElement(E.c,null,function(e){return i.a.createElement(f.a,{requestContext:e,container:t.props.container,disablePostSignupNextUrl:!0,email:t.state.userInfo?t.state.userInfo.email:null,loadingIndicatorCallback:t.toggleLoadingIndicator,passwordValidationError:r,inputStyleOverrides:ie.inputFields,nextUrlParam:t.props.nextUrlParam,loginButtonTextOverride:g.a._("Continue"),hideEmailField:!0,hidePasswordField:!!t.state.userInfo&&!t.state.userInfo.has_password&&!t.isLimitedLoginUnidentifiedSignupMethod(),hideFacebookButton:!!t.state.userInfo&&!t.state.userInfo.connected_to_facebook&&!t.isLimitedLoginUnidentifiedSignupMethod(),hideGoogleButton:!!t.state.userInfo&&!t.state.userInfo.connected_to_google&&!t.isLimitedLoginUnidentifiedSignupMethod(),hidePasswordReset:!0,hideTermsOfService:!0,onEmailChange:function(){},onSocialConnectVerified:t.showAdditionalStep(D.b.socialSignupWithAge),onLoginWithMfa:t.handleLoginWithMfa.bind(t),onPasswordChange:t.handleDataChange.bind(t,"password"),password:t.state.password,shouldPreventRegister:!0,triggerAccountRecoveryMode:t.handlePreventRegisterFromPersonalizedModal,showResponseMessageModal:c===D.b.respondMessage?t.props.showResponseMessageModal:void 0})}),i.a.createElement(G.b,{paddingY:5},i.a.createElement(G.j,null)),i.a.createElement(G.b,null,i.a.createElement(G.P,{onTouch:this.handleNotYouClick,fullWidth:!1},i.a.createElement(G.K,{size:"sm",align:"center",bold:!0},i.a.createElement(G.t,{href:"#"},m)))),i.a.createElement(G.b,{marginTop:1,marginBottom:4},i.a.createElement(G.P,{onTouch:this.handleSignupToggleFromPersonalized,fullWidth:!1},i.a.createElement(G.K,{size:"sm",align:"center",bold:!0},i.a.createElement(G.t,{href:"#"},b)))));return e?i.a.createElement("div",{"data-test-id":"login",style:H({},ie.personalizedModalContainer,{display:"flex",width:"auto",padding:""})},this.renderModalSideImage(e),i.a.createElement("div",{style:{width:400,padding:"22px 0"}},C)):i.a.createElement("div",{"data-test-id":"login",style:ie.personalizedModalContainer},C)}},{key:"renderSignupToLoginToggle",value:function(){return i.a.createElement(O.a,{buttonText:g.a._("Already a member? Log in","Toggle to switch from the sign up modal to the login modal "),link:"/login/",onClick:this.handleLoginToggleButtonClick,titleStylesOverride:ie.signupLoginToggle,useSmallButton:!0})}},{key:"renderDefaultSignup",value:function(){var e=this,t=this.props,n=t.container,a=t.contextLog,r=t.emailValidationError,s=t.passwordValidationError,l=t.signupSource,u=t.seoUnauthExperiments,p=t.viewer,d=t.renderBusinessCreateButton,h=t.inviter,m=t.pageType,f=t.hybridTier,b=t.requestContext,v=t.eligibleExperiences,S=t.type,w=this.props.customSignupTagline||(l?this.tagline(this.state.type,l,u):this.tagline(this.state.type,D.a.defaultSource,u));this.state.isExitingUserInSignup&&(w=g.a._("Welcome back to Pinterest!","welcoming user back to pinterest in signup modal when we recognize their email"));var E=this.getSignupTitleStyles(),O=H({},this.getSignupStyles(),{width:"440px"},"home_page"===n?{paddingBottom:55}:null),C=ie.signupForm,k=ie.logoContainer,L=ie.signupTitleContainer;"login_page"!==n&&(L=H({},L,{width:"355px"}));var P=ie.signupTitleContainer,T=ie.signupSubtitles,R=i.a.createElement("div",null,i.a.createElement(_.a,{css:ie.separator}),i.a.createElement("div",null,this.renderSignupToLoginToggle()));this.props.toggleType===A.a.NOT_NOW_BUTTON?R=i.a.createElement("div",null,i.a.createElement(_.a,{css:ie.separator}),i.a.createElement("div",null,this.renderSignupToLoginToggle()),i.a.createElement("div",null,i.a.createElement("div",{style:ie.businessContainer},i.a.createElement("h5",{style:ie.businessHeader},g.a._("Are you a business? ")),i.a.createElement("a",{href:oe,style:ie.businessLink,target:"_blank",onClick:function(){Object(N.a)("unauth.business_link.click"),p.isAuth?a(101,{component:13096,element:10281,login_state:p.isLimitedLogin?2:1}):a(101,{component:13096,element:10281})}},g.a._("Get started here"))))):"home_page"===n&&(R=i.a.createElement(G.b,{marginTop:3},this.renderSignupToLoginToggle()));var M=40;l===D.a.homePage&&(M=50);var j=this.valuePropAsTitle(),F=!!h&&!h.is_default_image,B=i.a.createElement(o.Fragment,null,i.a.createElement("div",{style:k},Object(y.a)(M,!0)),i.a.createElement("div",{style:L},i.a.createElement("h3",{style:E},"login_page"!==n&&"home_page"!==n?j:w)),i.a.createElement("div",{style:P},!this.state.isExitingUserInSignup&&i.a.createElement("h3",{style:T},"login_page"!==n&&"home_page"!==n?w:this.valuePropAsSubtitle(l)))),I=Object(V.l)(u,v,m,!0,f,b.isBot)&&(this.state.type===D.b.login||this.state.type===D.b.signup),W=i.a.createElement(o.Fragment,null,this.renderLoadingIndicator(),i.a.createElement("div",{style:F?ie.signupInviteForm:C},this.renderModalHeader(F,B,L),i.a.createElement(x.a,{additionalEmailPasswordChildren:R,age:this.state.age,container:this.props.container,dark:!0,disablePostSignupNextUrl:!0,email:this.state.email,emailValidationError:r,loadingIndicatorCallback:this.toggleLoadingIndicator,passwordValidationError:s,gender:this.state.gender,setWelcomeBackMessageForExistingEmail:this.setWelcomeBackMessageForExistingEmail,name:this.state.name,nextUrlParam:this.props.postSignupUrlParam||this.props.nextUrlParam,onAgeChange:this.handleDataChange.bind(this,"age"),onEmailChange:this.handleDataChange.bind(this,"email"),onFBEmailDeniedPerm:this.showAdditionalStep(D.b.FBEmailRerequest),onSocialConnectVerified:this.showAdditionalStep(D.b.socialSignupWithAge),onGenderChange:this.handleDataChange.bind(this,"gender"),onLoginWithMfa:this.handleLoginWithMfa.bind(this),onNameChange:this.handleDataChange.bind(this,"name"),onPasswordChange:this.handleDataChange.bind(this,"password"),onStepChange:this.changeStep.bind(this),onShowRegisterForm:this.handleShowRegisterForm,setNameFromEmail:this.setNameFromEmail.bind(this),signupSource:l,showSignupWelcomeLoadingFn:this.showSignupWelcomeLoadingFn,password:this.state.password,clearPassword:this.clearPassword,showResponseMessageModal:S===D.b.respondMessage?this.props.showResponseMessageModal:void 0})),d&&d());return I?i.a.createElement(c.a,{placementId:1000150,experienceIds:[501018]},function(t){t.complete;var n=t.display_data;return n.square_video&&n.square_video.url&&n.square_video.thumbnail&&n.square_video.duration?i.a.createElement("div",{"data-test-id":"signup",style:H({},O,{display:"flex",width:"auto"})},e.renderModalSideVideo(!0,n.square_video.url,n.square_video.thumbnail,n.square_video.duration),i.a.createElement("div",{style:{width:440}},W)):null}):i.a.createElement("div",{"data-test-id":"signup",style:O},W)}},{key:"renderLoginToSignupToggle",value:function(e){return i.a.createElement(O.a,{buttonText:g.a._("Not on Pinterest yet? Sign up","Toggle to switch from the login modal to the sign up modal"),link:e,onClick:this.handleSignupToggleButtonClick,titleStylesOverride:ie.signupLoginToggle,useSmallButton:!0})}},{key:"renderDefaultLogin",value:function(){var e=this,t=this.context.userAgent.isMobile,n=this.props,a=n.container,r=n.customLoginTagline,s=n.emailValidationError,l=n.isAccountSwitch,u=n.magicLinkGroup,p=n.passwordValidationError,d=n.seoUnauthExperiments,h=n.signupSource,m=(n.renderBusinessCreateButton,n.pageType),b=n.hybridTier,v=n.requestContext,S=n.eligibleExperiences,w=n.type,x=r||(h?this.tagline(this.state.type,h,d):this.tagline(this.state.type,D.a.login,d)),O=ie.logoContainer,C=ie.signupTitleContainer;"login_page"!==a&&(C=H({},C,{width:"355px"}));var k=40;h===D.a.homePage&&(k=50);var L=t?{height:"75px"}:null,P=H({},this.getSignupStyles(),{width:"440px"},null),T=ie.signupForm,R=ie.signupTitleContainer,M=ie.signupSubtitles,j=H({},ie.separator,{marginLeft:"-10px"}),F=i.a.createElement("div",null,i.a.createElement(_.a,{css:j}),i.a.createElement("div",null,this.renderLoginToSignupToggle("/signup/")));this.props.toggleType===A.a.NOT_NOW_BUTTON?F=i.a.createElement("div",null,i.a.createElement(_.a,{css:{margin:"10px auto"}}),i.a.createElement("div",{style:ie.haveAccountText},this.renderLoginToSignupToggle()),i.a.createElement("div",{style:L})):this.props.toggleType===A.a.NO_TOGGLE||l?F=null:this.props.toggleType===A.a.SMALL_TOGGLE&&(F=i.a.createElement("div",null,i.a.createElement(_.a,{css:{margin:"10px auto"}}),this.renderLoginToSignupToggle(),i.a.createElement("div",{style:L})));var B=l?g.a._("Have another Pinterest account? Log in to easily switch between them","Subtitle on the login modal that explains to a user why they would add an additional account to their profile"):this.valuePropAsSubtitle(h),I=Object(V.l)(d,S,m,!0,b,v.isBot)&&(this.state.type===D.b.login||this.state.type===D.b.signup),W=i.a.createElement(o.Fragment,null,this.renderLoadingIndicator(),i.a.createElement("div",{style:T},i.a.createElement("div",{style:O},Object(y.a)(k,!0)),i.a.createElement("div",{style:C},i.a.createElement("h3",{style:this.getSignupTitleStyles()},x)),i.a.createElement("div",{style:R},i.a.createElement("h3",{style:M},B)),i.a.createElement(E.c,null,function(t){return i.a.createElement(f.a,{requestContext:t,container:e.props.container,disablePostSignupNextUrl:!0,email:e.state.email,emailValidationError:s,loadingIndicatorCallback:e.toggleLoadingIndicator,passwordValidationError:p,inputStyleOverrides:ie.inputFields,isAccountSwitch:l,magicLinkGroup:u,nextUrlParam:e.props.nextUrlParam,onEmailChange:e.handleDataChange.bind(e,"email"),onSocialConnectVerified:e.showAdditionalStep(D.b.socialSignupWithAge),onLoginWithMfa:e.handleLoginWithMfa.bind(e),onPasswordChange:e.handleDataChange.bind(e,"password"),password:e.state.password,toggleMagicLinkConfirmation:e.toggleMagicLinkConfirmation,clearPassword:e.clearPassword,showResponseMessageModal:w===D.b.respondMessage?e.props.showResponseMessageModal:void 0})}),F),!1);return I?i.a.createElement("div",{"data-test-id":"login",style:H({},P,{display:"flex",width:"auto"})},i.a.createElement(c.a,{placementId:1000150,experienceIds:[501018]},function(t){var n=t.complete,o=t.display_data;return o.square_video&&o.square_video.url&&o.square_video.thumbnail&&o.square_video.duration?e.renderModalSideVideo(!1,o.square_video.url,o.square_video.thumbnail,o.square_video.duration):(n(),null)}),i.a.createElement("div",{style:{width:440}},W)):i.a.createElement("div",{"data-test-id":"login",style:P},W)}},{key:"renderLoginMfa",value:function(){var e=this.props.seoUnauthExperiments,t=this.tagline(this.state.type,D.a.loginMfa,e),n=this.getSignupStyles(),o=ie.signupForm,a=ie.logoContainer,r=this.getSignupTitleStyles();return i.a.createElement("div",{"data-test-id":"login",style:n},i.a.createElement("div",{style:o},i.a.createElement("div",{style:a},Object(y.a)(40,!0)),i.a.createElement("div",{style:H({},ie.signupTitleContainer,ie.signupTitleMfaContainer)},i.a.createElement("h3",{style:r},t)),i.a.createElement(b.a,{container:this.props.container,code:this.state.mfaCode,creds:this.state.mfaCreds,email:this.state.email,inputStyleOverrides:ie.inputFields,isAccountSwitch:this.props.isAccountSwitch,nextUrlParam:this.props.nextUrlParam,onCodeChange:this.handleDataChange.bind(this,"mfaCode"),password:this.state.password,phoneNumberEnd:this.state.mfaPhoneNumberEnd})))}},{key:"renderMagicLinkConfirmation",value:function(){var e=this,t=this.state,n=t.email,o=t.password;return Object(I.a)("confirmation_shown",n,o),i.a.createElement("div",{"data-test-id":"login",style:this.getSignupStyles()},i.a.createElement("div",{style:ie.signupForm},i.a.createElement("div",{style:ie.logoContainer},Object(y.a)(40,!0)),i.a.createElement("div",{style:ie.signupTitleContainer},i.a.createElement("h3",{style:ie.signupTitle},g.a._("Check your email","title on login modal telling user to check their email"))),i.a.createElement(G.b,{direction:"column",alignItems:"center",display:"flex"},i.a.createElement(G.b,{paddingY:3,width:270},i.a.createElement(G.K,{size:"lg"},i.a.createElement("span",{dangerouslySetInnerHTML:{__html:r.c(g.a._("We just sent an email to you at <strong>{{ email }}</strong>. It has a magic link that you can use to log in.","Message on login modal telling users an email has been sent to them containing a link to log in"),{email:n})}}))),i.a.createElement(G.b,{paddingY:3,width:270},i.a.createElement(G.c,{text:g.a._("Back","text on button to return to login modal from magic link confirmation screen"),onClick:function(){Object(I.a)("confirmation_dismissed",n,o),e.toggleMagicLinkConfirmation(!1)}})))))}},{key:"renderSocialSignupWithAge",value:function(){var e=this.state.socialRegistrationCredentials,t=this.props,n=t.nextUrlParam,o=t.type,a=g.a._("Sign up to see more","Age collection signup step for Facebook/G+ authentication");return i.a.createElement("div",{"data-test-id":"login",style:this.getSignupBoxStyle()},this.renderLoadingIndicator(),i.a.createElement("div",{style:ie.signupForm},i.a.createElement("div",{style:ie.logoContainer},Object(y.a)(40,!0)),i.a.createElement("div",{style:ie.signupTitleContainer},i.a.createElement("h3",{style:ie.signupTitle},a)),i.a.createElement(k.a,{container:this.props.container,disablePostSignupNextUrl:!0,loadingIndicatorCallback:this.toggleLoadingIndicator,nextUrlParam:n,registrationCredentials:e,showSignupWelcomeLoadingFn:this.showSignupWelcomeLoadingFn,showResponseMessageModal:o===D.b.respondMessage?this.props.showResponseMessageModal:void 0})),i.a.createElement(G.b,{margin:4},i.a.createElement(G.j,null),i.a.createElement(G.b,{padding:3},this.renderSignupToLoginToggle())))}},{key:"renderFBEmailRerequestForm",value:function(){var e=this.props.type,t=H({},this.getSignupBoxStyle(),{minHeight:"400px"}),n=H({},ie.signupTitleContainer,{width:"320px"}),o=g.a._("Add your email to finish","Tagline on facebook rerequest form"),a=H({},ie.signupSubtitles,{marginTop:"24px"}),r=H({},ie.notNowButton,{marginTop:"90px"}),s=g.a._("We need your email address to complete this signup. Click the button below, and we can use the email associated with your Facebook account.","message to explain reauth step beneath the tagline");return i.a.createElement("div",{"data-test-id":"login",style:t},this.renderLoadingIndicator(),i.a.createElement("div",{style:ie.signupForm},i.a.createElement("div",{style:ie.logoContainer},Object(y.a)(40,!0)),i.a.createElement("div",{style:n},i.a.createElement("h3",{style:ie.signupTitle},o),i.a.createElement("h3",{style:a},s),i.a.createElement("div",{style:{width:"260px",margin:"auto"}},i.a.createElement(d.b,{isRerequest:!0,container:"FBEmailRerequest",buttonText:g.a._("Continue with Facebook","Button text on facebook connect button on FB email reauth form"),loadingIndicatorCallback:this.toggleLoadingIndicator,useGestaltTooltip:!0,handlePostConnectClick:this.handlePostConnectClick,handlePostSuccessConnect:this.handlePostSuccessConnect,showResponseMessageModal:e===D.b.respondMessage?this.props.showResponseMessageModal:void 0}))),i.a.createElement(l.a,{className:"lightGrey",onClick:this.handleNotNowClick,styleOverrides:r},g.a._("Not now","word on not now button to dismiss the FB email reauth form"))))}},{key:"renderEmailConfirmation",value:function(){var e=this.state.socialRegistrationCredentials.userData.email,t=g.a._("Check your email","email confirmation tagline for Facebook cellphone only sign up"),n=g.a._("We've sent a confirmation email to ","email confirmation message for Facebook cellphone only sign up"),o=H({},ie.signupSubtitles,{marginTop:"24px"});return i.a.createElement("div",{"data-test-id":"login",style:this.getSignupBoxStyle()},i.a.createElement("div",{style:ie.signupForm},i.a.createElement("div",{style:ie.logoContainer},Object(y.a)(40,!0)),i.a.createElement("div",{style:ie.signupTitleContainer},i.a.createElement("h3",{style:ie.signupTitle},t),i.a.createElement("h3",{style:o},n,e)),i.a.createElement(l.a,{className:"red",onClick:this.handleConfirmationPageButtonClick,styleOverrides:ie.onClickEmailConfirmationButton},g.a._("Done","word on the button in email confirmation page"))))}},{key:"render",value:function(){var e=this.state,t=e.isAccountSwitch,n=e.isPersonalizedModal,o=e.showSignupWelcomeLoading,a=e.type,r=this.props.viewer;return a===D.b.signupOrPersonalizedLogin?n&&!t?this.renderPersonalizedLogin():this.renderDefaultSignup():a===D.b.signup?o?i.a.createElement(C.a,null):(this.props.signupSource===D.a.userProfilePage&&this.disableDenzelProfileHeader(),this.renderDefaultSignup()):a===D.b.login?o?i.a.createElement(C.a,null):!n||t||r.isAuth&&!r.isLimitedLogin?this.renderDefaultLogin():this.renderPersonalizedLogin():a===D.b.loginMfa?this.renderLoginMfa():a===D.b.socialSignupWithAge?o?i.a.createElement(C.a,null):this.renderSocialSignupWithAge():a===D.b.FBEmailRerequest?this.renderFBEmailRerequestForm():a===D.b.emailConfirmation?this.renderEmailConfirmation():a===D.b.magicLinkConfirmation?this.renderMagicLinkConfirmation():a===D.b.respondMessage?this.renderDefaultSignup():null}}]),t}();te(ae,"defaultProps",{disablePersonalizedLoginActivation:!1,isAccountSwitch:!1,signupSource:D.a.defaultSource,toggleType:A.a.DEFAULT_TOGGLE,type:D.b.signup});var re=function(e){return{location:e.location,pins:e.pins||{},userInfo:e.loggedOutUserInfo?e.loggedOutUserInfo.userInfo:{},viewer:e.viewer,eligibleExperiences:e.experiences?e.experiences.eligibleExperiences:{}}};ae.contextTypes={isBot:w.a.bool,logging:w.a.shape({viewParameter:w.a.number,viewType:w.a.number.isRequired}),userAgent:w.a.shape({isMobile:w.a.bool.isRequired}).isRequired,locale:w.a.string},t.default=Object(R.compose)(s.b,Object(a.connect)(re),U.a,P.a,T.b)(ae)}.call(this,"/")},MJXA:function(e,t,n){"use strict";var o=n("GyhR"),i=n.n(o),a=n("Ivf5"),r=n("WQSK"),s=n("5dtr"),l=n("GIJk"),u=n("D+W/"),c=n("1JxL"),p=n("GCCY"),d=n("Qo1m"),g=n("3nbW"),h=n("cqmR"),m=n("hvnN"),f=n.n(m),b=n("wFAD"),y=n("ePT2"),v=n("QtSf"),S=n("CBQr"),w=n("Ud2L"),E=n("ggpB"),_=n("7M64"),x=n("08qL"),O=n("+U6O"),C=n("9Y9K"),k=n("QWmP"),L=n("JsRk"),P=n("MDr3"),T=n("i7XF"),R=n("2Npu"),M=n("cEhz"),A=n("ovu7"),j=n("2rhI"),F=n("k9eC");function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D={emailButtonStyles:{height:"40px",width:"100%",borderRadius:"2px"},emailButtonTextStyles:{fontFamily:x.a,textAlign:"center",fontSize:"15px",WebkitFontSmoothing:"auto"},spaceBetweenTextAndSocial:{height:"11px"},signupContainer:{margin:"0 auto",width:"268px"},socialButtonContainer:{marginTop:"10px"},socialButtonSeparator:{height:"10px"}},G="emailpwdstep",q=function(e){function t(e,n){var o,a,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,s=W(t).call(this,e,n),o=!s||"object"!==B(s)&&"function"!=typeof s?N(a):s,U(N(N(o)),"onLoginWithSuspended",function(){(0,o.props.loadingIndicatorCallback)(!1),o.setState({accountRecoveryModalType:P.a[u.a.POLICY_VIOLATION_USER]})}),U(N(N(o)),"onLoginWithVoluntarilyDeactivated",function(e){o.setState({googleValidationError:e.message})}),U(N(N(o)),"setLoadingState",function(e){var t=o.props,n=t.loadingIndicatorCallback,i=t.showSignupWelcomeLoadingFn;return i&&!1===e&&i(!1),n(e)}),U(N(N(o)),"handleButtonClick",function(e){if("1"!==r.get("r_r")){var t=h.a.runPhoneValidators(o.props.email,o.context.locale,o._loginFacebookAccountKit.bind(N(N(o))));o.setState({facebookValidationError:null,googleValidationError:null}),t&&o.handleEmailSignUp(e)}else o.showUnderAgeError()}),U(N(N(o)),"handleEmailChange",function(e){o.props.onEmailChange&&o.props.onEmailChange(e)}),U(N(N(o)),"handlePasswordChange",function(e){o.state.passwordValidationError&&o.setState({passwordValidationError:null}),o.props.onPasswordChange&&o.props.onPasswordChange(e)}),U(N(N(o)),"handleEmailSignUp",function(e){Object(E.a)("unauth_email_validation_attempt");var t=Object(v.a)(o.props.email,o.emailValidators);t?(o.setState({emailValidationError:t}),Object(E.a)("unauth.login.error.CLIENT_ERROR.malformemail.".concat(G))):((t=Object(v.a)(o.props.password,o.loginPasswordValidators))?(o.setState({passwordValidationError:t}),Object(E.a)("unauth.login.error.CLIENT_ERROR.malformpwd.".concat(G))):(o.setState({passwordValidationError:null}),o.validateEmailAvailable(e)),o.setState({emailValidationError:null}),o.props.setNameFromEmail&&!o.context.userAgent.isMobile&&o.props.setNameFromEmail())}),U(N(N(o)),"_loginFacebookAccountKit",function(e){if(h.a.validateResponse(e)){var t={phone_number:o.props.email,fb_auth_code:e.code};Object(E.a)("unauth_phone_only_login_attempt"),o.login(t)}else o.setState({emailValidationError:d.a._("Enter your email or phone number to try again.")}),o.setLoadingState(!1)}),U(N(N(o)),"register",function(){o.setLoadingState(!0);var e=o.props,t=e.age,n=e.container,i=e.email,a=e.name,s=e.password,l=e.showSignupWelcomeLoadingFn,c=e.signupSource,p=e.requestContext,g=e.showResponseMessageModal,h={container:n,email:i,password:s,age:t,country:o.context.country,signupSource:c,first_name:a,last_name:"",hybridTier:o.context.hybridTier,page:o.context.pageType};Object(E.a)("one_step_age_signup_complete");var m=new F.c(p,"web_unauth_email_welcome").enabled();p.experiments._queuedResource&&p.experiments._queuedResource.flush(),!g&&l&&m&&l(!0),_.a.register(h).then(o.handleSignupSuccess,function(e){o.contextLogSignupLoginEvent(7488),o.setLoadingState(!1),e.api_error_code===u.a.API_ERROR_UNDERAGE_REGISTER_ATTEMPT?(r.set("r_r","1"),o.showUnderAgeError()):Object(k.a)(d.a._("Sorry! Something went wrong on our end."))}),o.contextLogSignupLoginEvent(7537)}),U(N(N(o)),"handleSignupSuccess",function(){var e=o.props.showResponseMessageModal;o.contextLogSignupLoginEvent(7487),Object(E.a)("unauth.signup_one_step.completed"),e?e(!0):T.b.handleSignupRedirect(o.props.nextUrlParam,o.props.disablePostSignupNextUrl)}),U(N(N(o)),"shouldRequireAge",function(){var e=o.context.country;return Object(j.d)(e)||Object(j.c)(e)}),U(N(N(o)),"validateAgeRequirement",function(){var e=!1;return!o.context.userAgent.isMobile&&o.shouldRequireAge()&&(e=Object(v.a)(o.props.age||"",o.ageValidators))&&(o.setState({ageValidationError:e}),o.setLoadingState(!1),Object(E.a)("unauth.login.error.CLIENT_ERROR.invalidage.".concat(G))),e}),U(N(N(o)),"validatePasswordRequirement",function(){var e=Object(v.a)(o.props.password,o.passwordValidators);return e&&(o.setState({passwordValidationError:e}),o.setLoadingState(!1),Object(E.a)("unauth.login.error.CLIENT_ERROR.malformpwd.".concat(G))),e}),U(N(N(o)),"completeRegistration",function(e){o.setState({emailValidationError:null}),o.setLoadingState(!1),Object(E.a)("unauth.signup_step_1.completed"),o.context.userAgent.isMobile||o.register()}),U(N(N(o)),"checkEmailExistsWithCompletion",function(e,t,n){y.a.create("EmailExistsResource",{email:e}).callGet({emailValidationError:!1}).then(function(e){!1===e.resource_response.data?n():t()},function(){var e=d.a._("Hmm...that doesn't look like an email address");o.setState({emailValidationError:e})})}),U(N(N(o)),"updateAccountRecoveryModal",function(e){return o.setState({accountRecoveryModalType:e})}),U(N(N(o)),"handleSignupWithEmailClick",function(){Object(E.a)("unauth_signup_email_btn_click"),o.setState({showRegisterForm:!0}),o.props.onShowRegisterForm&&o.props.onShowRegisterForm()}),U(N(N(o)),"renderSocialButtons",function(){var e=o.props.sm,t=i.a.createElement(c.b,{buttonText:d.a._("Continue with Facebook"),container:o.props.container,disablePostSignupNextUrl:o.props.disablePostSignupNextUrl,onSocialConnectVerified:o.props.onSocialConnectVerified,onFBEmailDeniedPerm:o.props.onFBEmailDeniedPerm,loadingIndicatorCallback:o.props.loadingIndicatorCallback,onLoginWithMfa:o.props.onLoginWithMfa,onLoginWithSuspended:o.onLoginWithSuspended,showSignupWelcomeLoadingFn:o.props.showSignupWelcomeLoadingFn,tooltip:o.state.facebookValidationError,useGestaltTooltip:!0,showResponseMessageModal:o.props.showResponseMessageModal}),n=i.a.createElement("div",{ref:function(e){o.googleButton=e}},"1"!==e&&i.a.createElement(p.b,{action:"signup",container:o.props.container,disablePostSignupNextUrl:o.props.disablePostSignupNextUrl,nextUrlParam:"/",onSocialConnectVerified:o.props.onSocialConnectVerified,onLoginWithMfa:o.props.onLoginWithMfa,onLoginWithSuspended:o.onLoginWithSuspended,onLoginWithVoluntarilyDeactivated:o.onLoginWithVoluntarilyDeactivated,showSignupWelcomeLoadingFn:o.props.showSignupWelcomeLoadingFn,tooltip:o.state.googleValidationError,showResponseMessageModal:o.props.showResponseMessageModal}));return i.a.createElement("div",{style:D.socialButtonContainer},t,i.a.createElement("div",{style:D.socialButtonSeparator}),n)}),U(N(N(o)),"renderSignupForm",function(){var e=o.props,t=e.age,n=e.email,a=e.setWelcomeBackMessageForExistingEmail,r=e.inputStyleOverrides,s=e.newEmail,l=e.onAgeChange,u=e.password,c=e.suppressFocus,p=e.updateEmail;return o.state.showRegisterForm?i.a.createElement(b.a,{age:t,ageValidationError:o.state.ageValidationError,buttonText:o.getButtonText(),buttonTextLabel:d.a._("Continue creating your Pinterest account","Accessiblity button text to continue creating an account"),checkEmailExistsWithCompletion:o.checkEmailExistsWithCompletion,email:n,emailText:d.a._("Email"),emailLabel:d.a._("Enter your email","Accessiblity input text on login screen"),emailValidationError:o.state.emailValidationError,setWelcomeBackMessageForExistingEmail:a,inHideAgeInputExistingEmailExp:o.inHideAgeInputExistingEmailExp(),inputStyleOverrides:r,newEmail:s,onAgeChange:l,onButtonClick:o.handleButtonClick.bind(N(N(o))),onEmailChange:o.handleEmailChange,onPasswordChange:o.handlePasswordChange,password:u,passwordText:d.a._("Create a password"),passwordValidationError:o.state.passwordValidationError,showAgeInput:o.shouldRequireAge(),suppressFocus:c,updateEmail:p,isSignupForm:!0}):i.a.createElement("div",{"data-test-id":"emailSignUpButton"},i.a.createElement(O.c,{text:d.a._("Sign up with email","the description of sign up with email button on sign up modal"),color:"red",onClick:o.handleSignupWithEmailClick}))}),U(N(N(o)),"renderReorderedButtons",function(){var e=o.props.signupSeparatorContinuous;return i.a.createElement("div",null,o.renderSocialButtons(),o.state.showRegisterForm?i.a.createElement("div",{style:{marginBottom:"10px"}},i.a.createElement(l.a,{signupSeparatorContinuous:e})):null,o.renderSignupForm())}),U(N(N(o)),"renderSocialButtonsOnly",function(){o.renderSocialButtons()}),U(N(N(o)),"renderOriginalForm",function(){var e=o.props.signupSeparatorContinuous;return i.a.createElement("div",null,o.renderSignupForm(),o.state.showRegisterForm?i.a.createElement(l.a,{signupSeparatorContinuous:e}):null,o.renderSocialButtons())}),U(N(N(o)),"renderButtons",function(){var e=o.props.sm;return"2"===e?o.renderReorderedButtons():"1"===e?o.renderSocialButtonsOnly():o.renderOriginalForm()}),U(N(N(o)),"showUnderAgeError",function(){o.setState({ageValidationError:d.a._("Sorry, you can't sign up yet. Youâ€™re not old enough to use Pinterest yet.","Error message when under age user trying to register")})}),o.state={ageValidationError:e.ageValidationError||null,accountRecoveryModalType:null,emailValidationError:e.emailValidationError||null,facebookValidationError:null,googleValidationError:null,passwordValidationError:e.passwordValidationError||null,showRegisterForm:"home_page"===o.props.container},o.emailValidators=[Object(A.q)({message:d.a._("You missed a spot! Don't forget to add your email.")}),Object(A.f)({message:d.a._("Hmm... that doesn't look like an email address.")})];var g=d.a._("Your password is too short! You need 6+ characters."),m=d.a._("Oh @*&#! No zany characters allowed."),f=d.a._("Help us protect you by providing your age","Error message shown when user did not fill the age field in the sign up model");return o.passwordValidators=[Object(A.q)({message:g}),Object(A.b)({message:m}),Object(A.n)({shortPassStr:g,samePasswordStr:d.a._("Please make your username and password different."),blackPassStr:d.a._("Please make a stronger password.")})],o.loginPasswordValidators=[Object(A.q)({message:g}),Object(A.b)({message:m}),Object(A.k)({messages:{min:g},min:6})],o.shouldRequireAge()?o.ageValidators=[Object(A.q)({message:f}),Object(A.a)({message:d.a._("Please enter a valid number.")})]:o.ageValidators=[Object(A.a)({message:d.a._("Please enter a valid number.")})],o}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,o["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){h.a.setupPhoneAuth(this.context.locale)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.ageValidationError,n=e.emailValidationError,o=e.passwordValidationError,i={};n!==this.props.emailValidationError?i={emailValidationError:n}:o!==this.props.passwordValidationError?i={passwordValidationError:o}:t!==this.props.ageValidationError&&(i={ageValidationError:t}),this.setState(i)}},{key:"getButtonText",value:function(){var e=d.a._("Continue","Continue button on web");return this.context.userAgent.isMobile&&(e=d.a._("Continue","Continue button on mobile web")),e}},{key:"handleBlur",value:function(e){"id"===e?this.setState({emailValidationError:null}):"age"===e&&this.setState({ageValidationError:null}),this.setState({facebookValidationError:null,googleValidationError:null})}},{key:"handleLoginFailure",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=this.props,o=n.clearPassword,i=n.email,a=n.onLoginWithMfa;this.contextLogSignupLoginEvent(7535);var r=e.http_status===u.a.RESPONSE_CODE_TOO_MANY_REQUESTS?u.a.RESPONSE_CODE_TOO_MANY_REQUESTS:e.api_error_code;if(r!==u.a.LOGIN_MFA_REQUIRED){var s=T.b.getLoginErrorState(e,"emailPasswordStep",i,w.a,this.updateAccountRecoveryModal,this.props.seoUnauthExperiments);s?(this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){U(e,t,n[t])})}return e}({accountRecoveryModalType:P.a[r]},s)),o&&s.passwordValidationError&&o(),this.setLoadingState(!1)):(d.a._("Sorry! Something went wrong on our end.","Error message shown when user tried to login but error occured, and we don't have any other information about the error. May or may not be recoverable by the user."),Object(k.a)(d.a._("Sorry! Something went wrong on our end.")),this.setLoadingState(!1))}else T.b.handleLoginMfa(t,e.data,a)}},{key:"handleLoginSuccess",value:function(e){this.contextLogSignupLoginEvent(7536),T.b.storeLoginCredentialsToBrowser(e);var t=this.props.showResponseMessageModal;t?t(!1):window.location.reload()}},{key:"login",value:function(e){var t=this;this.setLoadingState(!0);var n=e||{username_or_email:this.props.email,password:this.props.password},o={container:this.props.container,hybridTier:this.context.hybridTier,page:this.context.pageType};Object(g.a)(n,o,this.props.seoUnauthExperiments).then(function(){t.handleLoginSuccess(n)},function(e){e.api_error_code===u.a.INVALID_PASSWORD_ERROR_CODE?(t.setState({passwordValidationError:e.message}),t.setLoadingState(!1)):e.api_error_code===u.a.INVALID_PASSWORD_FB_USER?(t.setState({facebookValidationError:e.message}),t.setLoadingState(!1)):e.api_error_code===u.a.INVALID_PASSWORD_GOOGLE_USER?(t.setState({googleValidationError:e.message}),t.setLoadingState(!1)):e.api_error_code===u.a.LOGIN_MFA_REQUIRED?(T.b.storeLoginCredentialsToBrowser(n),t.props.onLoginWithMfa(n,e.data)):(t.setState({emailValidationError:e.message}),t.setLoadingState(!1))})}},{key:"contextLogSignupLoginEvent",value:function(e){var t=this.props,n=t.contextLog,o=t.viewer;o.isAuth?n(e,{login_state:o.isLimitedLogin?2:1,signup_login_method:1}):n(e,{signup_login_method:1})}},{key:"inHideAgeInputExistingEmailExp",value:function(){var e=this.context.country,t=new F.a(this.props.requestContext,"web_unauth_hide_age_existing_email_v2");return(Object(j.d)(e)||Object(j.c)(e))&&(t.check("enabled")||t.check("enabled_with_copy"))}},{key:"validateEmailAvailable",value:function(e){var t=this;this.setLoadingState(!0);var n=this.context,o=n.hybridTier,i=n.pageType,a=this.props,r=a.container,s=a.email,l=a.password,u=a.seoUnauthExperiments;this.checkEmailExistsWithCompletion(s,function(){var e={username_or_email:s,password:l},n={container:r,hybridTier:o,page:i};Object(g.a)(e,n,u).then(function(n){t.handleLoginSuccess(e)},function(n){t.handleLoginFailure(n,e)}),t.contextLogSignupLoginEvent(7534)},function(){t.validateAgeRequirement()||t.validatePasswordRequirement()||t.completeRegistration(e)})}},{key:"loginThenValidateEmailAvailble",value:function(e){var t=this;this.setLoadingState(!0);var n=this.context,o=n.hybridTier,i=n.pageType,a=this.props,r=a.email,s=a.password,l=a.seoUnauthExperiments,c={username_or_email:r,password:s},p={container:this.props.container,hybridTier:o,page:i};Object(g.a)(c,p,l).then(function(e){t.handleLoginSuccess(c)},function(n){n.api_error_code===u.a.INVALID_EMAIL_ERROR_CODE?t.validateAgeRequirement()||t.validatePasswordRequirement()||t.completeRegistration(e):t.handleLoginFailure(n,c,!0)}),this.contextLogSignupLoginEvent(7534)}},{key:"render",value:function(){var e=this.props,t=e.additionalChildren,n=e.dark,o=D.signupContainer,a=i.a.createElement(P.b,{modalType:this.state.accountRecoveryModalType,updateAccountRecoveryModal:this.updateAccountRecoveryModal,email:this.props.email,onLoginWithMfa:this.props.onLoginWithMfa,onLoginWithSuspended:this.onLoginWithSuspended,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated});return i.a.createElement("div",{style:o},a,this.renderButtons(),i.a.createElement(S.a,{dark:n}),t)}}])&&I(n.prototype,a),s&&I(n,s),t}();q.contextTypes={country:f.a.string,locale:f.a.string.isRequired,userAgent:f.a.shape({isMobile:f.a.bool.isRequired}).isRequired,hybridTier:f.a.string,pageType:f.a.string};var z=Object(C.compose)(s.b,Object(a.connect)(function(e){return{viewer:e.viewer}}),L.withRouter,M.b,R.a)(q);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z={signup:{margin:"0 auto",position:"relative",textAlign:"center"},inputStyleOverrides:{backgroundColor:"#f0f0f0",border:"0px",outline:"none"}},$=Object.freeze({SIGNUP:"signup"}),ee=function(e){function t(){var e,n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return o=this,n=!(i=(e=Y(t)).call.apply(e,[this].concat(r)))||"object"!==H(i)&&"function"!=typeof i?J(o):i,X(J(J(n)),"state",{step:$.SIGNUP}),n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,o["Component"]),n=t,(a=[{key:"setModalType",value:function(e,t){this.setState({step:e}),this.props.onStepChange&&this.props.onStepChange(e)}},{key:"showStep",value:function(e){if(e===$.SIGNUP)return i.a.createElement(z,{additionalChildren:this.props.additionalEmailPasswordChildren,age:this.props.age,container:this.props.container,dark:this.props.dark,disablePostSignupNextUrl:this.props.disablePostSignupNextUrl,email:this.props.email,emailValidationError:this.props.emailValidationError,setWelcomeBackMessageForExistingEmail:this.props.setWelcomeBackMessageForExistingEmail,loadingIndicatorCallback:this.props.loadingIndicatorCallback,name:this.props.name,nextUrlParam:this.props.nextUrlParam,passwordValidationError:this.props.passwordValidationError,inputStyleOverrides:Z.inputStyleOverrides,onAgeChange:this.props.onAgeChange,onEmailChange:this.props.onEmailChange,onFBEmailDeniedPerm:this.props.onFBEmailDeniedPerm,onSocialConnectVerified:this.props.onSocialConnectVerified,onLoginWithMfa:this.props.onLoginWithMfa,onPasswordChange:this.props.onPasswordChange,password:this.props.password,setNameFromEmail:this.props.setNameFromEmail,showSignupWelcomeLoadingFn:this.props.showSignupWelcomeLoadingFn,signupSeparatorContinuous:this.props.signupSeparatorContinuous,signupSource:this.props.signupSource,sm:this.props.sm,suppressFocus:this.props.suppressFocus,clearPassword:this.props.clearPassword,onShowRegisterForm:this.props.onShowRegisterForm,showResponseMessageModal:this.props.showResponseMessageModal})}},{key:"render",value:function(){return i.a.createElement("div",{"data-test-id":"signup",style:Z.signup},this.showStep(this.state.step))}}])&&Q(n.prototype,a),r&&Q(n,r),t}();X(ee,"defaultProps",{dark:!0}),ee.contextTypes={userAgent:f.a.shape({isMobile:f.a.bool.isRequired}).isRequired};t.a=ee},O9k4:function(e,t,n){"use strict";var o=n("GyhR"),i=n.n(o),a=n("+aUF"),r=n("D+W/"),s=n("Qo1m"),l=n("3nbW"),u=n("i7XF"),c=n("hvnN"),p=n.n(c),d=n("QtSf"),g=n("jDCj"),h=n("ggpB"),m=n("Irlq"),f=n("QWmP"),b=n("ovu7");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function S(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _,x,O,C=r.a.GEN.templateConst.settings.PASSWORD_RESET_URL,k={loginForm:{borderTop:"solid 1px #ccc",minHeight:"350px",padding:"20px 10px"},loginText:{fontSize:"14px",margin:"24px 0",textAlign:"left"},loginTitleContainer:{margin:"0 auto 25px"},loginTitle:{fontSize:"28px",fontWeight:"bold",letterSpacing:"-1px"},loginContainer:{margin:"0 auto",marginTop:"45px",width:"268px"},loginFooterContainer:{marginTop:"15px",color:"#333"},signupButton:{width:"100%"}},L=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=S(this,w(t).call(this,e))).state={codeValidationError:null,loading:!1},n.codeValidators=[Object(b.q)({message:s.a._("You missed a spot! Don't forget to add your verification code.")}),Object(b.m)({message:s.a._("Hmm...that doesn't look like a verification code.")})],n}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,o["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){!this.props.isAccountSwitch&&u.b.isFullyLoggedIn(this.context.isAuthenticated,this.context.loginState)&&u.b.handleRedirect(this.props.nextUrlParam)}},{key:"_getLocationForLoginRedirect",value:function(){var e=window.location.pathname!==C?window.location.pathname:"/";return this.props.nextUrlParam||e}},{key:"handleButtonClick",value:function(e){var t=Object(d.a)(this.props.code,this.codeValidators);t?(this.setState({codeValidationError:t}),Object(h.a)("unauth.login.error.CLIENT_ERROR.wrongcode.".concat("loginmfa"))):(this.setState({codeValidationError:null}),this.loginUser())}},{key:"handleResendCode",value:function(e){var t=this;e.preventDefault(),this.setState({loading:!0});var n=this.props.creds;n?n.mfa_resend=!0:n={mfa_resend:!0,username_or_email:this.props.email,password:this.props.password};var o={container:this.props.container,hybridTier:this.context.hybridTier,page:this.context.pageType};Object(l.a)(n,o).then(function(){t.setState({loading:!1})},function(e){t.setState({loading:!1}),e.message?t.setState({codeValidationError:e.message}):Object(f.a)(s.a._("Sorry! Something went wrong on our end."))})}},{key:"loginUser",value:function(e){var t=this;this.setState({loading:!0});var n=e||this.props.creds;n?n.mfa_token=this.props.code:n={mfa_token:this.props.code,username_or_email:this.props.email,password:this.props.password};var o={container:this.props.container,hybridTier:this.context.hybridTier,page:this.context.pageType};Object(l.a)(n,o).then(function(){u.b.handleRedirect(t._getLocationForLoginRedirect())},function(e){e.message?t.setState({codeValidationError:e.message,loading:!1}):(Object(f.a)(s.a._("Sorry! Something went wrong on our end.")),t.setState({loading:!1}))})}},{key:"render",value:function(){var e=this,t=k.loginContainer,n=s.a._("Continue"),o=this.props.phoneNumberEnd,r=o?Object(m.b)(s.a._("Please check your phone with the number ending in {{ phoneNumberEnd }} for a code and enter it in the field below to log in."),{phoneNumberEnd:i.a.createElement("strong",{key:"phone"},o)}):s.a._("Please check your phone for a code and enter it in the field below to log in.");return i.a.createElement("div",{style:t},i.a.createElement("p",{style:k.loginText},r),i.a.createElement("form",{method:"POST",noValidate:!0,onSubmit:function(t){t.preventDefault(),e.handleButtonClick(t)}},i.a.createElement(g.a,{autoComplete:"off",focused:!0,hasError:!!this.state.codeValidationError,id:"mfaCode",inputStyleOverrides:this.props.inputStyleOverrides,name:"code",onChange:this.props.onCodeChange,placeholder:s.a._("Verification code"),tooltip:this.state.codeValidationError,type:"text",value:this.props.code,useGestaltTooltip:this.props.useGestaltTooltip}),i.a.createElement(a.a,{accessibilityLabel:n,className:"red SignupButton",loading:this.state.loading,styleOverrides:k.signupButton,type:"submit"},i.a.createElement("div",null,n))),i.a.createElement("div",{style:k.loginFooterContainer},Object(m.b)(s.a._("If you didn't get it, we can {{ resendCode }}."),{resendCode:i.a.createElement("a",{onClick:this.handleResendCode.bind(this),href:"",key:"code"},s.a._("resend the code"))})))}}])&&v(n.prototype,r),c&&v(n,c),t}();O={container:"unknown"},(x="defaultProps")in(_=L)?Object.defineProperty(_,x,{value:O,enumerable:!0,configurable:!0,writable:!0}):_[x]=O,L.contextTypes={isAuthenticated:p.a.bool.isRequired,locale:p.a.string.isRequired,loginState:p.a.number,hybridTier:p.a.string,pageType:p.a.string},t.a=L},TLUQ:function(e,t,n){"use strict";t.a={TOPIC:"topic",PASSWORDRESET:"passwordReset",PASSWORDUSERNAME:"passwordUserName",PROFILE:"profile",PIN:"pin",KLP:"klp",BOARD:"board",SEARCH:"search",PINFEEDBACK:"pinFeedBack"}},UnnU:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o={DEFAULT_TOGGLE:"DEFAULT_TOGGLE",NO_TOGGLE:"NO_TOGGLE",SMALL_TOGGLE:"SMALL_TOGGLE",NOT_NOW_BUTTON:"NOT_NOW_BUTTON"}},ocVj:function(e,t,n){"use strict";function o(e){var t=e.split("@")[0];return(t.includes(".")?t.replace("."," "):t.includes("_")?t.replace("_"," "):t).replace(/[0-9]/g,"").replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}n.d(t,"a",function(){return o})},tAeg:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n("GyhR"),i=n.n(o),a=n("+aUF"),r=n("+U6O");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){g(e,t,n[t])})}return e}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={header:{color:"#5a5a5a",fontWeight:500,fontSize:"12px"},button:{width:"160px",fontSize:"14px",padding:"10px 20px"}},m=function(e){function t(){var e,n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return o=this,i=(e=c(t)).call.apply(e,[this].concat(r)),n=!i||"object"!==s(i)&&"function"!=typeof i?d(o):i,g(d(d(n)),"state",{hover:!1}),g(d(d(n)),"toggleHover",function(){n.setState({hover:!n.state.hover})}),n}var n,m,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o["Component"]),n=t,(m=[{key:"render",value:function(){var e=this.props,t=e.buttonText,n=e.fullWidth,o=e.link,s=e.onClick,u=e.title,c=e.titleStylesOverride,p=e.useSmallButton,d=h.header;c&&(d=l({},d,c));var g=n?l({},h.button,{width:"100%",marginTop:"0"}):h.button,m=i.a.createElement(a.a,{className:"lightGray",href:o,onClick:s,styleOverrides:g,type:"button"},t),f={};if(p){d=l({},d,{float:"left"}),f={margin:"0 auto 5px",width:"fit-content",display:"flex",alignItems:"baseline"};var b=this.state.hover?{cursor:"pointer",marginLeft:"5px",borderBottom:"0.5px solid #8a8a8a"}:{cursor:"pointer",marginLeft:"5px"};m=i.a.createElement(r.b,{onMouseEnter:this.toggleHover,onMouseLeave:this.toggleHover},i.a.createElement("a",{onClick:s,style:b},t))}return i.a.createElement("div",{style:f},u&&i.a.createElement("h5",{style:d},u),m)}}])&&u(n.prototype,m),f&&u(n,f),t}()},wCwO:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n("GyhR"),i=n.n(o),a=n("+U6O");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var p=function(e){function t(){var e,n,o,i,a,s,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var p=arguments.length,d=new Array(p),g=0;g<p;g++)d[g]=arguments[g];return o=this,n=!(i=(e=l(t)).call.apply(e,[this].concat(d)))||"object"!==r(i)&&"function"!=typeof i?c(o):i,a=c(c(n)),u={startProgressBar:!1},(s="state")in a?Object.defineProperty(a,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[s]=u,n}var n,p,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,o["PureComponent"]),n=t,(p=[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({startProgressBar:!0})},0)}},{key:"render",value:function(){var e=this.props,t=e.duration,n=e.finalProgress,o=e.showLightGrayBackground,r=e.rounded;return i.a.createElement(a.b,{width:"100%",color:o?"lightGray":"transparent",shape:r?"rounded":"square"},i.a.createElement(a.b,{color:"red",height:6,shape:"rounded",width:"".concat(n,"%"),dangerouslySetInlineStyle:{__style:{transform:this.state.startProgressBar?"scale(1, 1)":"scale(0, 1)",transformOrigin:"left",transitionDuration:"".concat(t,"ms"),transitionTimingFunction:"ease-in"}}}))}}])&&s(n.prototype,p),d&&s(n,d),t}()},yiER:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n("GyhR"),i=n.n(o),a=(n("hvnN"),{separator:{borderBottom:"#dedede 1px solid",margin:"5px auto",width:"110px"}});function r(e){var t=e.css,n=Object.assign({},a.separator,t);return i.a.createElement("div",{style:n})}r.defaultProps={css:{}}}}]);